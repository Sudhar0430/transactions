<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
 <meta http-equiv="Content-Security-Policy"
  content="
    default-src 'self' https://fonts.googleapis.com https://fonts.gstatic.com https://www.gstatic.com https://www.googleapis.com https://*.firebaseapp.com https://*.firebaseio.com https://cdn.jsdelivr.net https://upload.wikimedia.org;
    script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.gstatic.com https://www.googleapis.com https://*.firebaseapp.com https://*.firebaseio.com https://cdn.jsdelivr.net;
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.gstatic.com;
    img-src 'self' data: https://upload.wikimedia.org https://*.googleusercontent.com;
  ">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinTrack - Personal Finance Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet" />
    <style>
        :root {
            --primary-color: #4361ee;
            --primary-light: #4895ef;
            --secondary-color: #3f37c9;
            --accent-color: #f72585;
            --success-color: #4cc9f0;
            --dark-color: #1a1a2e;
            --light-color: #f8f9fa;
            --gray-color: #6c757d;
            --light-gray: #e9ecef;
            --expense-color: #ff6b6b;
            --income-color: #51cf66;
            --shopping-color: #ff922b;
            --food-color: #a6d65d;
            --transportation-color: #339af0;
            --entertainment-color: #cc5de8;
            --housing-color: #f76707;
            --health-color: #20c997;
            --education-color: #748ffc;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f5f7fb;
            color: var(--dark-color);
        }

        .app-container {
    display: flex;
    flex-direction: row;
    min-height: 100vh;
    align-items: stretch;
}
:root {
    --primary-color: #4361ee;
    --primary-light: rgba(67, 97, 238, 0.1);
    --secondary-color: #3a0ca3;
    --accent-color: #f72585;
    --gray-color: #6c757d;
    --light-gray: #e9ecef;
    --dark-gray: #343a40;
    --white: #ffffff;
    --sidebar-width: 280px;
    --sidebar-collapsed-width: 80px;
    --transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.1);
    --sidebar-bg: #b0eeaa7b; /* Light gray-green background */
}

/* Sidebar Structure */
.sidebar {
    width: var(--sidebar-width);
    background: var(--sidebar-bg);
    box-shadow: 4px 0 15px rgba(0, 0, 0, 0.05);
    display: flex;
    flex-direction: column;
    padding: 1.5rem 0;
    height: 100vh;
    position: sticky;
    top: 0;
    border-right: 1px solid rgba(0, 0, 0, 0.05);
    transition: var(--transition);
    z-index: 100;
    overflow-y: auto;
    background-image: linear-gradient(
        to bottom,
        var(--sidebar-bg),
        var(--sidebar-bg)
    );
}

.sidebar:hover {
    box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
}

/* Collapsed State */
.sidebar.collapsed {
    width: var(--sidebar-collapsed-width);
}

.sidebar.collapsed .logo h1,
.sidebar.collapsed .sidebar-section-title,
.sidebar.collapsed .nav-menu li a span,
.sidebar.collapsed .user-info,
.sidebar.collapsed .logout-btn,
.sidebar.collapsed .badge {
    display: none;
}

.sidebar.collapsed .logo {
    justify-content: center;
    padding: 0 0 1.5rem;
}

.sidebar.collapsed .logo i {
    margin-right: 0;
}

.sidebar.collapsed .nav-menu li a {
    justify-content: center;
    padding: 0.75rem 0;
    margin-right: 0;
    border-radius: 50px;
}

.sidebar.collapsed .nav-menu li a i {
    margin-right: 0;
    font-size: 1.3rem;
}

.sidebar.collapsed .user-profile {
    justify-content: center;
    padding: 1rem 0;
}

.sidebar.collapsed .avatar {
    margin-right: 0;
}

/* Tooltips for collapsed state */
.sidebar.collapsed .nav-menu li {
    position: relative;
}

.sidebar.collapsed .nav-menu li a::after {
    content: attr(data-tooltip);
    position: absolute;
    left: 100%;
    top: 50%;
    transform: translateY(-50%);
    background: var(--dark-gray);
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    font-size: 0.8rem;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: var(--transition);
    z-index: 1000;
    margin-left: 15px;
    pointer-events: none;
}

.sidebar.collapsed .nav-menu li a:hover::after {
    opacity: 1;
    visibility: visible;
    margin-left: 20px;
}

/* Hamburger Menu Toggle */
.hamburger-toggle {
    position: absolute;
    top: 1.5rem;
    right: 1rem;
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--gray-color);
    transition: var(--transition);
    z-index: 101;
    padding: 0.5rem;
    border-radius: 50%;
}

.hamburger-toggle:hover {
    color: var(--primary-color);
    background-color: var(--primary-light);
    transform: rotate(90deg);
}

.sidebar.collapsed .hamburger-toggle {
    right: 0.5rem;
}

/* Logo Section */
.logo {
    display: flex;
    align-items: center;
    padding: 0 1.5rem 1.5rem;
    color: var(--primary-color);
    margin-bottom: 0.5rem;
    transition: var(--transition);
    position: relative;
}

.logo:hover {
    transform: translateX(5px);
}

.logo i {
    font-size: 1.8rem;
    margin-right: 0.8rem;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    transition: var(--transition);
}

.logo h1 {
    font-size: 1.5rem;
    font-weight: 700;
    letter-spacing: -0.5px;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    transition: var(--transition);
}

/* Navigation Sections */
.sidebar-section {
    margin-bottom: 1rem;
    padding: 0 1.5rem;
    transition: var(--transition);
    overflow: hidden;
}

.sidebar.collapsed .sidebar-section {
    padding: 0 0.5rem;
}

.sidebar-section-title {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--gray-color);
    margin-bottom: 0.75rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    transition: var(--transition);
}

.sidebar-section-title::before {
    content: "";
    display: inline-block;
    width: 8px;
    height: 8px;
    background-color: var(--primary-color);
    border-radius: 50%;
    margin-right: 8px;
    transition: var(--transition);
}

/* Navigation Menu */
.nav-menu {
    display: flex;
    flex-direction: column;
}

.nav-menu ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.nav-menu li {
    margin: 0.15rem 0;
    position: relative;
}

.nav-menu li a {
    display: flex;
    align-items: center;
    padding: 0.75rem 1.5rem;
    text-decoration: none;
    color: var(--dark-gray);
    font-weight: 500;
    font-size: 0.9rem;
    transition: var(--transition);
    border-radius: 0 50px 50px 0;
    margin-right: 1rem;
    position: relative;
}

.nav-menu li a i {
    margin-right: 1rem;
    font-size: 1.1rem;
    width: 20px;
    text-align: center;
    transition: var(--transition);
}

.nav-menu li a span {
    transition: var(--transition);
}

.nav-menu li a:hover {
    background-color: var(--primary-light);
    color: var(--primary-color);
    transform: translateX(5px);
}

.nav-menu li a:hover i {
    transform: scale(1.1);
    color: var(--primary-color);
}

.nav-menu li.active a {
    color: var(--white);
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    box-shadow: 0 4px 6px rgba(67, 97, 238, 0.2);
}

.nav-menu li.active a i {
    color: var(--white);
}

.nav-menu li.active::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 4px;
    height: 60%;
    background: var(--accent-color);
    border-radius: 0 4px 4px 0;
}

/* Divider */
.sidebar-divider {
    height: 1px;
    background-color: var(--light-gray);
    margin: 1rem 1.5rem;
    position: relative;
    transition: var(--transition);
}

.sidebar.collapsed .sidebar-divider {
    margin: 1rem 0.5rem;
}

.sidebar-divider::after {
    content: "";
    position: absolute;
    left: 25%;
    top: 0;
    width: 50%;
    height: 1px;
    background-color: var(--primary-light);
}

/* User Profile Section */
.user-profile {
    margin-top: auto;
    padding: 1.5rem;
    display: flex;
    align-items: center;
    border-top: 1px solid var(--light-gray);
    position: relative;
    transition: var(--transition);
}

.sidebar.collapsed .user-profile {
    padding: 1rem 0.5rem;
    justify-content: center;
}

.user-profile:hover {
    background-color: rgba(0, 0, 0, 0.02);
}

.avatar {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    overflow: hidden;
    margin-right: 1rem;
    border: 2px solid var(--primary-light);
    transition: var(--transition);
}

.user-profile:hover .avatar {
    transform: scale(1.05);
    border-color: var(--primary-color);
}

.avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.user-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    transition: var(--transition);
}

.user-info .name {
    font-weight: 600;
    font-size: 0.9rem;
    color: var(--dark-gray);
}

.user-info .email {
    font-size: 0.75rem;
    color: var(--gray-color);
    opacity: 0.8;
}

.logout-btn {
    background: none;
    border: none;
    color: var(--gray-color);
    cursor: pointer;
    font-size: 1.1rem;
    transition: var(--transition);
    padding: 0.5rem;
    border-radius: 50%;
}

.logout-btn:hover {
    color: var(--accent-color);
    background-color: rgba(247, 37, 133, 0.1);
    transform: rotate(15deg);
}
.nav-menu li.active a::after {
    content: '';
    position: absolute;
    right: 1rem;
    width: 8px;
    height: 8px;
    background: var(--white);
    border-radius: 50%;
    box-shadow: 0 0 0 2px var(--accent-color);
}
.nav-menu .has-children > a::after {
    content: 'â–¸';
    margin-left: auto;
    transition: var(--transition);
}

.nav-menu .has-children.expanded > a::after {
    transform: rotate(90deg);
}

.nav-menu .submenu {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}

.nav-menu .expanded .submenu {
    max-height: 500px;
}
.notification-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: var(--accent-color);
    color: white;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.6rem;
    font-weight: bold;
}
.quick-action {
    position: absolute;
    bottom: 20px;
    right: 20px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: var(--accent-color);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    cursor: pointer;
    transition: all 0.3s ease;
    z-index: 102;
}

.sidebar.collapsed .quick-action {
    transform: translateX(calc(var(--sidebar-collapsed-width) - 70px));
}

/* Badge for active items */
.badge {
    position: absolute;
    right: 1.5rem;
    background-color: var(--accent-color);
    color: white;
    border-radius: 10px;
    padding: 0.15rem 0.5rem;
    font-size: 0.7rem;
    font-weight: 600;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

/* Scrollbar Styling */
.sidebar::-webkit-scrollbar {
    width: 6px;
}

.sidebar::-webkit-scrollbar-track {
    background: var(--light-gray);
}

.sidebar::-webkit-scrollbar-thumb {
    background-color: var(--primary-light);
    border-radius: 6px;
}

.sidebar::-webkit-scrollbar-thumb:hover {
    background-color: var(--primary-color);
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .sidebar {
        position: fixed;
        transform: translateX(-100%);
    }
    
    .sidebar.active {
        transform: translateX(0);
        width: var(--sidebar-width);
    }
    
    .sidebar.collapsed {
        width: var(--sidebar-collapsed-width);
    }
    
    .hamburger-toggle {
        display: block;
    }
}
@keyframes wave {
    0% { box-shadow: 0 0 0 0 rgba(67, 97, 238, 0.4); }
    100% { box-shadow: 0 0 0 10px rgba(67, 97, 238, 0); }
}

.nav-menu li.active a {
    animation: wave 1.5s infinite;
    position: relative;
    overflow: hidden;
}
.nav-menu li.active {
    position: relative;
}

.nav-menu li.active::before {
    content: '';
    position: absolute;
    inset: -2px;
    background: linear-gradient(45deg, 
        #f72585, #4361ee, #3a0ca3);
    z-index: -1;
    border-radius: 50px;
    animation: borderSpin 3s linear infinite;
}

@keyframes borderSpin {
    100% { transform: rotate(360deg); }
}

.nav-menu li a {
    position: relative;
    overflow: hidden;
}

.nav-menu li a::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, 
        rgba(255,255,255,0.8) 0%, 
        rgba(255,255,255,0) 70%);
    transform: scale(0);
    opacity: 0;
    transition: transform 0.5s, opacity 1s;
}

.nav-menu li a:hover::after {
    transform: scale(1);
    opacity: 1;
}
/* Will-change for smoother animations */
.sidebar, .nav-menu li a, .logo {
    will-change: transform, width;
}

/* Containment for better performance */
.sidebar {
    contain: strict;
}
.user-status {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 2px solid var(--sidebar-bg);
}

.status-online { background: #4ade80; }
.status-away { background: #fbbf24; }
.status-busy { background: #f87171; }
.status-offline { background: #9ca3af; }
.quick-action {
    position: absolute;
    bottom: 20px;
    right: 20px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: var(--accent-color);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    cursor: pointer;
    transition: all 0.3s ease;
    z-index: 102;
}

.sidebar.collapsed .quick-action {
    transform: translateX(calc(var(--sidebar-collapsed-width) - 70px));
}

        /* Main Content Styles */
      .main-content {
    flex: 1;
    padding: 2rem;
    overflow-y: auto;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
    margin: 1rem;
}

.main-content:not(.active) {
    opacity: 0;
    height: 0;
    overflow: hidden;
    transform: translateY(30px) scale(0.95);
    margin: 0;
    padding: 0;
}

.main-content.active {
    opacity: 1;
    height: auto;
    overflow: visible;
    transform: translateY(0) scale(1);
    animation: contentAppear 0.6s ease-out;
}

@keyframes contentAppear {
    0% {
        opacity: 0;
        transform: translateY(20px) scale(0.98);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 2px dashed rgba(67, 97, 238, 0.2);
    position: relative;
}


.header h2 {
    font-size: 2rem;
    font-weight: 700;
    color: var(--dark-color);
    position: relative;
    display: inline-block;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.header-actions {
    display: flex;
    align-items: center;
    gap: 1.5rem;
}

.search-bar {
    position: relative;
    width: 280px;
    transition: all 0.3s ease;
}

.search-bar:hover {
    transform: translateY(-2px);
}

.search-bar i {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--gray-color);
    z-index: 2;
}

.search-bar input {
    width: 100%;
    padding: 0.8rem 1.2rem 0.8rem 3rem;
    border: 2px solid transparent;
    border-radius: 12px;
    font-family: 'Poppins', sans-serif;
    transition: all 0.3s;
    background-color: white;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    position: relative;
}

.search-bar input:focus {
    outline: none;
    border-color: var(--primary-light);
    box-shadow: 0 0 0 4px rgba(67, 97, 238, 0.2), 0 6px 20px rgba(67, 97, 238, 0.15);
    transform: scale(1.02);
}

.search-bar::before {
    content: "";
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    border-radius: 14px;
    background: linear-gradient(45deg, var(--primary-color), var(--secondary-color), #ff8a00, var(--primary-color));
    background-size: 400% 400%;
    z-index: -1;
    opacity: 0;
    transition: opacity 0.3s;
}

.search-bar:focus-within::before {
    opacity: 1;
    animation: gradientBorder 3s ease infinite;
}

@keyframes gradientBorder {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.add-transaction-btn {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    color: white;
    border: none;
    padding: 0.8rem 1.5rem;
    border-radius: 12px;
    font-family: 'Poppins', sans-serif;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
    position: relative;
    overflow: hidden;
}

.add-transaction-btn::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: all 0.5s;
}

.add-transaction-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(67, 97, 238, 0.4);
}

.add-transaction-btn:hover::before {
    left: 100%;
}

.add-transaction-btn:active {
    transform: translateY(1px);
    box-shadow: 0 2px 10px rgba(67, 97, 238, 0.3);
}

        /* Summary Cards */
.summary-cards {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1.5rem;
    margin-bottom: 2rem;
    perspective: 1000px;
}

/* Base Card Style with Enhanced Effects */
.card {
    background: white;
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
    display: flex;
    align-items: center;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
    transform-style: preserve-3d;
}

/* Floating Particles Background */
.card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background-image: 
        radial-gradient(circle at 20% 30%, rgba(255,255,255,0.8) 0.5px, transparent 1px),
        radial-gradient(circle at 80% 70%, rgba(255,255,255,0.8) 0.5px, transparent 1px);
    background-size: 30px 30px;
    opacity: 0;
    transition: opacity 0.6s ease, transform 1s linear;
    animation: particleFlow 20s linear infinite;
}

@keyframes particleFlow {
    0% { transform: translate(0,0); }
    100% { transform: translate(50px,50px); }
}

/* Hover Effects */
.card:hover {
    transform: translateY(-8px) rotateX(5deg) rotateY(2deg);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
}

.card:hover::before {
    opacity: 0.3;
}

/* Gradient Border Effect */
.card::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 16px;
    padding: 2px;
    background: linear-gradient(45deg, rgba(255,255,255,0.8), transparent);
    
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.4s ease;
}

.card:hover::after {
    opacity: 1;
}

/* Icon Enhancements */
.card-icon {
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Base Colors (Your Original Palette) */
.balance-card .card-icon {
    background-color: #3366cc; /* darker blue */
}

.income-card .card-icon {
    background-color: #28a745; /* darker green */
}

.expense-card .card-icon {
    background-color: #e74c3c; /* darker red */
}

.savings-card .card-icon {
    background-color: #17a2b8; /* darker cyan/teal */
}
.card-icon {
    width: 55px;
    height: 55px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 1rem;
    font-size: 1.4rem;
    color: white;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    z-index: 2;
}

.card:hover .card-icon {
    transform: scale(1.1) rotate(15deg);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}

/* Pulsing Animation for Icons */
.card-icon::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    z-index: -1;
    animation: pulse 2s infinite;
    opacity: 0;
}

@keyframes pulse {
    0% { transform: scale(0.8); opacity: 0.7; }
    70% { transform: scale(1.3); opacity: 0; }
    100% { opacity: 0; }
}

.card:hover .card-icon::after {
    animation: pulse 2s infinite;
}

/* Text Effects */
.card-info h3 {
    font-size: 0.9rem;
    font-weight: 500;
    color: #666;
    margin-bottom: 0.3rem;
    transition: transform 0.3s ease;
}

.card-info p {
    font-size: 1.5rem;
    font-weight: 700;
    color: #222;
    position: relative;
    display: inline-block;
}

.card-info p::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 2px;
    background: currentColor;
    transition: width 0.4s ease;
}

.card:hover .card-info p::after {
    width: 100%;
}

/* Floating Numbers Effect */
.card-info p span {
    display: inline-block;
    transition: transform 0.3s ease;
}

.card:hover .card-info p span {
    animation: floatNumber 0.5s ease forwards;
}

@keyframes floatNumber {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

/* Background Wave Animation */
.card .wave {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 20%;
    background: rgba(255,255,255,0.2);
    clip-path: polygon(0 50%, 100% 30%, 100% 100%, 0% 100%);
    animation: waveMove 8s linear infinite;
    opacity: 0.5;
    z-index: 1;
}

@keyframes waveMove {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

/* Card-Specific Enhancements */
.balance-card .wave { background: rgba(51, 102, 204, 0.1); }
.income-card .wave { background: rgba(40, 167, 69, 0.1); }
.expense-card .wave { background: rgba(231, 76, 60, 0.1); }
.savings-card .wave { background: rgba(23, 162, 184, 0.1); }

/* Responsive Adjustments */
@media (max-width: 1200px) {
    .summary-cards {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .summary-cards {
        grid-template-columns: 1fr;
    }
}

        /* Charts Section */
 .charts-section {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 1.5rem;
    margin-bottom: 2rem;
    perspective: 1200px;
}

.spending-chart, .category-chart {
    background: linear-gradient(135deg, #fafefe, #cfddf8);
    border-radius: 16px;
    padding: 2rem;
    box-shadow: 0 8px 24px rgba(0, 0, 139, 0.1);
    transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(255, 255, 255, 0.3);
}

/* Glow effect on hover */
.spending-chart:hover, .category-chart:hover {
    transform: translateY(-8px) rotateX(2deg) rotateY(2deg);
    box-shadow: 0 15px 35px rgba(30, 144, 255, 0.2), 
                0 5px 15px rgba(0, 0, 0, 0.1);
}

/* Subtle shimmer effect */
.spending-chart::before, .category-chart::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.4),
        transparent
    );
    transition: 0.5s;
}

.spending-chart:hover::before, .category-chart:hover::before {
    left: 100%;
}

/* Animated border */
.spending-chart::after, .category-chart::after {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, #6495ed, #87cefa, #b0e0e6, #87cefa, #6495ed);
    background-size: 400%;
    border-radius: 18px;
    z-index: -1;
    opacity: 0;
    transition: 0.5s;
    animation: borderGlow 8s linear infinite;
}

.spending-chart:hover::after, .category-chart:hover::after {
    opacity: 0.7;
}

@keyframes borderGlow {
    0% {
        background-position: 0 0;
    }
    50% {
        background-position: 300% 0;
    }
    100% {
        background-position: 0 0;
    }
}

/* Staggered fade-in animation */
.spending-chart {
    opacity: 0;
    transform: translateY(30px) rotateX(15deg);
    animation: fadeInUp 0.8s cubic-bezier(0.22, 0.61, 0.36, 1) 0.2s forwards;
}

.category-chart {
    opacity: 0;
    transform: translateY(30px) rotateX(15deg);
    animation: fadeInUp 0.8s cubic-bezier(0.22, 0.61, 0.36, 1) 0.4s forwards;
}

@keyframes fadeInUp {
    to {
        opacity: 1;
        transform: translateY(0) rotateX(0);
    }
}

/* Floating elements effect */
.chart-container {
    height: 250px;
    position: relative;
    transform-style: preserve-3d;
}

.chart-container canvas {
    transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    transform: translateZ(0);
}

.spending-chart:hover .chart-container canvas {
    transform: translateZ(20px) scale(1.02);
}

.category-chart:hover .chart-container canvas {
    transform: translateZ(20px) rotate(2deg) scale(1.02);
}

/* Section header enhancements */
.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    position: relative;
}

.section-header h3 {
    font-size: 1.2rem;
    font-weight: 600;
    position: relative;
    display: inline-block;
}

.section-header h3::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 0;
    width: 0;
    height: 3px;
    background: linear-gradient(90deg, #6495ed, #87cefa);
    transition: width 0.6s ease;
    border-radius: 3px;
}

.spending-chart:hover .section-header h3::after,
.category-chart:hover .section-header h3::after {
    width: 100%;
}

.month-selector {
    padding: 0.4rem 0.8rem;
    border: 1px solid rgba(100, 149, 237, 0.3);
    border-radius: 6px;
    font-family: 'Poppins', sans-serif;
    font-size: 0.9rem;
    color: #555;
    background: rgba(255, 255, 255, 0.7);
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

.month-selector:hover {
    border-color: rgba(100, 149, 237, 0.6);
    box-shadow: 0 4px 8px rgba(100, 149, 237, 0.1);
}

.month-selector:focus {
    outline: none;
    border-color: #6495ed;
    box-shadow: 0 0 0 3px rgba(100, 149, 237, 0.2);
}

/* Floating dots background decoration */
.spending-chart .chart-container::before,
.category-chart .chart-container::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background-image: 
        radial-gradient(circle at 10% 20%, rgba(100, 149, 237, 0.1) 1px, transparent 1px),
        radial-gradient(circle at 90% 80%, rgba(135, 206, 250, 0.1) 1px, transparent 1px);
    background-size: 20px 20px;
    opacity: 0;
    transition: opacity 0.6s ease;
}

.spending-chart:hover .chart-container::before,
.category-chart:hover .chart-container::before {
    opacity: 1;
}
        /* Recent Transactions */
   .recent-transactions {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    overflow: hidden; /* For pseudo-element effects */
}

/* Subtle lift on hover */
.recent-transactions:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
}

/* Minimal fade-in animation */
.recent-transactions {
    opacity: 0;
    animation: fadeIn 0.4s ease-out forwards;
    animation-delay: 0.2s;
}

@keyframes fadeIn {
    to {
        opacity: 1;
    }
}

/* Clean table styling */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
}

th, td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid var(--light-gray);
    transition: background-color 0.2s ease;
}

/* Slight highlight on row hover */
tr:not(:first-child):hover td {
    background-color: rgba(240, 248, 255, 0.5); /* Very light blue */
}

/* Smooth underline for view-all link */
.view-all {
    color: var(--primary-color);
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 500;
    position: relative;
    display: inline-block;
    padding-bottom: 2px;
}

.view-all::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 1px;
    background-color: var(--primary-color);
    transition: width 0.3s ease;
}

.view-all:hover::after {
    width: 100%;
}

/* Minimal icon animations */
.category-icon {
    margin-right: 0.8rem;
    font-size: 1rem;
    transition: transform 0.3s ease;
}

tr:hover .category-icon {
    transform: scale(1.1);
}

/* Color transitions for amount cells */
.income, .expense {
    transition: color 0.3s ease;
}

tr:hover .income {
    color: darken(var(--income-color), 10%);
}

tr:hover .expense {
    color: darken(var(--expense-color), 10%);
}

/* Action buttons refinement */
.action-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1rem;
    margin: 0 0.3rem;
    color: var(--gray-color);
    transition: all 0.2s ease;
    padding: 0.2rem;
    border-radius: 4px;
}

.action-btn.edit:hover {
    color: var(--primary-color);
    background: rgba(var(--primary-color-rgb), 0.1);
}

.action-btn.delete:hover {
    color: var(--accent-color);
    background: rgba(var(--accent-color-rgb), 0.1);
}

/* Minimal loading skeleton effect (optional) */
@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.6;
    }
}

.loading-row td {
    animation: pulse 1.5s ease-in-out infinite;
    background-color: #f5f5f5;
    color: transparent;
    position: relative;
    overflow: hidden;
}

.loading-row td::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
    transform: translateX(-100%);
    animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
    100% {
        transform: translateX(100%);
    }
}

        /* Modal Styles */
        .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(2px); /* Subtle blur effect */
}

.modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

/* Smooth scaling animation for the modal */
.modal {
    background: white;
    border-radius: 12px;
    width: 500px;
    max-width: 90%;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    transform: translateY(-20px) scale(0.98);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    
    will-change: transform, opacity;
}

.modal-overlay.active .modal {
    transform: translateY(0) scale(1);
    opacity: 1;
}

/* Modal header with subtle bottom shadow */
.modal-header {
    padding: 1.5rem;
    border-bottom: 1px solid var(--light-gray);
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
}

.modal-header h3 {
    font-size: 1.3rem;
    font-weight: 600;
    margin: 0;
}

/* Close button animation */
.close-modal {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--gray-color);
    transition: all 0.3s ease;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
}

.close-modal:hover {
    color: var(--accent-color);
    background-color: rgba(0, 0, 0, 0.05);
    transform: rotate(90deg);
}

/* Modal body with smooth content appearance */
.modal-body {
    padding: 1.5rem;
    animation: fadeInContent 0.4s ease-out 0.2s both;
}

@keyframes fadeInContent {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Enhanced form inputs */
.form-group {
    margin-bottom: 1.5rem;
    animation: fadeInContent 0.4s ease-out both;
}

/* Stagger animations for form groups */
.form-group:nth-child(1) { animation-delay: 0.1s; }
.form-group:nth-child(2) { animation-delay: 0.15s; }
.form-group:nth-child(3) { animation-delay: 0.2s; }
.form-group:nth-child(4) { animation-delay: 0.25s; }

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
    color: var(--dark-color);
    transform: translateY(5px);
    transition: all 0.3s ease;
}

.form-group input, 
.form-group select {
    width: 100%;
    padding: 0.8rem 1rem;
    border: 1px solid var(--light-gray);
    border-radius: 8px;
    font-family: 'Poppins', sans-serif;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background-color: #f9fafb;
}

.form-group input:focus, 
.form-group select:focus {
    outline: none;
    border-color: var(--primary-light);
    box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    background-color: white;
    transform: translateY(-1px);
}

/* Enhanced radio buttons */
.radio-group {
    display: flex;
    gap: 1.5rem;
}

.radio-group input[type="radio"] {
    display: none;
}

.radio-group label {
    position: relative;
    padding-left: 28px;
    cursor: pointer;
    display: inline-block;
    font-weight: 400;
    transition: color 0.3s ease;
}

.radio-group label:before {
    content: "";
    position: absolute;
    left: 0;
    top: 1px;
    width: 18px;
    height: 18px;
    border: 2px solid var(--light-gray);
    border-radius: 50%;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-sizing: border-box;
}

.radio-group input[type="radio"]:checked + label {
    color: var(--primary-color);
    font-weight: 500;
}

.radio-group input[type="radio"]:checked + label:before {
    border-color: var(--primary-color);
    background-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
}

.radio-group label:after {
    content: "";
    position: absolute;
    left: 5px;
    top: 6px;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: white;
    opacity: 0;
    transform: scale(0);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.radio-group input[type="radio"]:checked + label:after {
    opacity: 1;
    transform: scale(1);
}

/* Submit button with floating effect */
.submit-btn {
    width: 100%;
    padding: 0.8rem;
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 8px;
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 5px rgba(67, 97, 238, 0.2);
    position: relative;
    overflow: hidden;
}

.submit-btn:hover {
    background-color: var(--secondary-color);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(67, 97, 238, 0.3);
}

.submit-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 3px rgba(67, 97, 238, 0.2);
}

/* Ripple effect */
.submit-btn::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 5px;
    height: 5px;
    background: rgba(255, 255, 255, 0.5);
    opacity: 0;
    border-radius: 100%;
    transform: scale(1, 1) translate(-50%);
    transform-origin: 50% 50%;
}

.submit-btn:focus:not(:active)::after {
    animation: ripple 0.6s ease-out;
}

@keyframes ripple {
    0% {
        transform: scale(0, 0);
        opacity: 0.5;
    }
    100% {
        transform: scale(20, 20);
        opacity: 0;
    }
}

        /* New Multi-page Styles */
        .goal-progress {
            background: var(--light-gray);
            border-radius: 8px;
            height: 12px;
            margin: 0.5rem 0;
        }

        .goal-progress-bar {
            height: 100%;
            border-radius: 8px;
            background: var(--primary-color);
            transition: width 0.3s ease;
        }

        .settings-form {
            max-width: 600px;
            margin: 0 auto;
        }

        /* Responsive Styles */
        @media (max-width: 1200px) {
            .summary-cards {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .charts-section {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                padding: 1rem 0;
            }
            
            .logo {
                padding: 0 1rem 1rem;
            }
            
            .nav-menu li a {
                padding: 0.6rem 1rem;
            }
            
            .main-content {
                padding: 1rem;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .header-actions {
                width: 100%;
                flex-direction: column;
                gap: 1rem;
            }
            
            .search-bar {
                width: 100%;
            }
            
            .add-transaction-btn {
                width: 100%;
                justify-content: center;
            }
            
            table {
                display: block;
                overflow-x: auto;
            }
        }

        @media (max-width: 480px) {
            .summary-cards {
                grid-template-columns: 1fr;
            }
            
            .card {
                flex-direction: column;
                text-align: center;
            }
            
            .card-icon {
                margin-right: 0;
                margin-bottom: 1rem;
            }
            
        }
        .transaction-type-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .type-tab {
            flex: 1;
            padding: 0.8rem;
            border: 2px solid var(--light-gray);
            border-radius: 8px;
            background: none;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .type-tab.active {
            border-color: var(--primary-color);
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary-color);
        }

        .category-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .category-option {
            padding: 1rem;
            border: 2px solid var(--light-gray);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .category-option:hover {
            border-color: var(--primary-light);
        }

        .category-option.selected {
            border-color: var(--primary-color);
            background: rgba(67, 97, 238, 0.1);
        }

        .category-option i {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            display: block;
        }

        .amount-input {
            position: relative;
        }

        .amount-input span {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            color: var(--gray-color);
        }

        .amount-input input {
            padding-left: 2.5rem !important;
        }
        /* Analytics specific layout */
.analytics-summary {
    margin-top: 2rem;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 1.5rem;
}

.analytics-charts {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 1.5rem;
}


@media (max-width: 768px) {
    .analytics-charts {
        grid-template-columns: 1fr;
    }
}
/* Analytics summary card styles */
.analytics-summary .card {
    background: #f9fafc; /* soft pale background as default */
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    display: flex;
    align-items: center;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* Hover effect for a soft lift */
.analytics-summary .card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
}

/* Individual soft background colors */
.analytics-summary .card.income {
    background: linear-gradient(135deg, #e6fff2, #f0fff8); /* soft mint green */
}

.analytics-summary .card.expense {
    background: linear-gradient(135deg, #fff0f0, #ffe6e6); /* soft pink */
}

.analytics-summary .card.savings {
    background: linear-gradient(135deg, #f0f4ff, #e6e9ff); /* soft lavender-blue */
}

.analytics-summary .card.best-month {
    background: linear-gradient(135deg, #fffaf0, #fff5e6); /* soft peach */
}

/* Darker icons inside the card */
.analytics-summary .card .card-icon {
    color: #333; /* darker icon color */
    background: rgba(255, 255, 255, 0.6); /* soft light background behind icon */
    border-radius: 50%;
    padding: 0.5rem;
    margin-right: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.4rem;
}
/* Smooth pastel backgrounds for summary cards */
.summary-cards .card {
    background: #f9fafc; /* soft pale default */
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    display: flex;
    align-items: center;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* Hover effect for a gentle lift */
.summary-cards .card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
}

/* Income card background */
.summary-cards .card:nth-child(1) {
    background: linear-gradient(135deg, #e6fff2, #f0fff8); /* soft mint green */
}

/* Expense card background */
.summary-cards .card:nth-child(2) {
    background: linear-gradient(135deg, #fff0f0, #ffe6e6); /* soft pink */
}

/* Net Savings card background */
.summary-cards .card:nth-child(3) {
    background: linear-gradient(135deg, #f0f4ff, #e6e9ff); /* soft lavender-blue */
}

/* Best Saving Month card background */
.summary-cards .card:nth-child(4) {
    background: linear-gradient(135deg, #fffaf0, #fff5e6); /* soft peach */
}

/* Darker icons */
.summary-cards .card .card-icon i {
    color: #333; /* dark icon color */
    font-size: 1.5rem;
}

/* Fix main-content alignment next to sidebar */
.main-content {
    flex: 1;
    width: 100%;
    display: flex;
    flex-direction: column;
}

.header {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ------------------------------------------
   ðŸŽ¯ GOALS PAGE STYLING
--------------------------------------------- */

.goal-layout {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
    padding: 2rem;
    background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
    min-height: 100vh;
}

.goal-header-row {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 1.5rem;
    flex-wrap: wrap;
    width: 100%;
    position: relative;
    padding: 1rem 0;
}

.goal-header-row::before {
    content: "";
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    height: 2px;
    background: linear-gradient(90deg, transparent, rgba(67, 97, 238, 0.4), transparent);
}

.goals-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 2rem;
    width: 100%;
    max-width: 1400px;
    padding: 1rem;
    perspective: 1000px;
}

.goal-card {
    background: white;
    padding: 1.8rem;
    border-radius: 16px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
    display: flex;
    flex-direction: column;
    gap: 1rem;
    transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    transform-style: preserve-3d;
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(255, 255, 255, 0.3);
    animation: cardAppear 0.6s ease-out forwards;
    opacity: 0;
    transform: translateY(20px);
}

.goal-card::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: linear-gradient(90deg, #4361ee, #3a0ca3);
}

@keyframes cardAppear {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.goal-card:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 12px 40px rgba(67, 97, 238, 0.15);
}

.goal-card:nth-child(1) { animation-delay: 0.1s; }
.goal-card:nth-child(2) { animation-delay: 0.2s; }
.goal-card:nth-child(3) { animation-delay: 0.3s; }
.goal-card:nth-child(4) { animation-delay: 0.4s; }

.add-goal-btn {
    padding: 0.8rem 1.8rem;
    background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
    color: white;
    font-weight: 600;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
    display: flex;
    align-items: center;
    gap: 0.5rem;
    position: relative;
    overflow: hidden;
    font-size: 1rem;
}

.add-goal-btn::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: 0.5s;
}

.add-goal-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(67, 97, 238, 0.4);
}

.add-goal-btn:hover::before {
    left: 100%;
}

.add-goal-btn i {
    font-size: 1.2rem;
}

.goal-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    display: none;
    align-items: center;
    justify-content: center;
    background-color: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    z-index: 1000;
    animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.goal-modal-content {
    background: white;
    padding: 2.5rem;
    border-radius: 16px;
    width: 500px;
    max-width: 95%;
    box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
    animation: modalAppear 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%);
}

@keyframes modalAppear {
    from {
        transform: translateY(30px) scale(0.95);
        opacity: 0;
    }
    to {
        transform: translateY(0) scale(1);
        opacity: 1;
    }
}

.goal-modal-content h3 {
    margin-bottom: 1.5rem;
    font-size: 1.5rem;
    color: #2b2d42;
    text-align: center;
    position: relative;
    padding-bottom: 0.5rem;
}

.goal-modal-content h3::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, #4361ee, #3a0ca3);
    border-radius: 3px;
}

.goal-modal-content input,
.goal-modal-content select,
.goal-modal-content textarea {
    width: 100%;
    margin-bottom: 1.2rem;
    padding: 0.8rem 1rem;
    border: 1px solid #e0e0e0;
    border-radius: 10px;
    font-family: 'Poppins', sans-serif;
    transition: all 0.3s;
    background-color: #f9f9ff;
}

.goal-modal-content input:focus,
.goal-modal-content select:focus,
.goal-modal-content textarea:focus {
    outline: none;
    border-color: #4361ee;
    box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
    background-color: white;
}

.submit-goal-btn {
    width: 100%;
    padding: 1rem;
    border: none;
    background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
    color: white;
    font-weight: 600;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s;
    margin-top: 1rem;
    font-size: 1rem;
    box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
}

.submit-goal-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(67, 97, 238, 0.4);
}

.close {
    position: absolute;
    right: 20px;
    top: 20px;
    font-size: 1.5rem;
    cursor: pointer;
    color: #6c757d;
    transition: color 0.3s;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
}

.close:hover {
    color: #4361ee;
    background-color: #f0f2ff;
}

.progress-bar {
    height: 12px;
    background: #e9ecef;
    border-radius: 20px;
    overflow: hidden;
    margin: 0.5rem 0;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
}

.progress {
    height: 100%;
    background: linear-gradient(90deg, #4cc9f0, #4361ee);
    transition: width 0.6s cubic-bezier(0.65, 0, 0.35, 1);
    position: relative;
    overflow: hidden;
}

.progress::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, 
        rgba(255, 255, 255, 0.1) 0%, 
        rgba(255, 255, 255, 0.4) 50%, 
        rgba(255, 255, 255, 0.1) 100%);
    animation: progressShine 2s infinite linear;
}

@keyframes progressShine {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

.status {
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: inline-block;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

.status.on-track {
    background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
    color: #155724;
}

.status.behind {
    background: linear-gradient(135deg, #fff3cd 0%, #ffeeba 100%);
    color: #856404;
}

.status.completed {
    background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%);
    color: #0c5460;
}

.goal-actions {
    display: flex;
    gap: 0.8rem;
    margin-top: 1rem;
}

.goal-actions button {
    flex: 1;
    padding: 0.6rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.3rem;
}

.goal-actions button:first-child {
    background-color: #e9ecef;
    color: #495057;
}

.goal-actions button:first-child:hover {
    background-color: #dee2e6;
}

.goal-actions button:last-child {
    background-color: #4361ee;
    color: white;
}

.goal-actions button:last-child:hover {
    background-color: #3a56d0;
}

.completion-popup {
    display: none;
    position: fixed;
    top: 30%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #d4edda;
    color: #155724;
    padding: 1.5rem 3rem;
    border-radius: 12px;
    font-size: 1.2rem;
    font-weight: 600;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    z-index: 2000;
    text-align: center;
    animation: popupAppear 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border-left: 5px solid #28a745;
}

@keyframes popupAppear {
    0% {
        transform: translate(-50%, -40%) scale(0.8);
        opacity: 0;
    }
    50% {
        transform: translate(-50%, -55%) scale(1.05);
    }
    100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
    }
}

.goal-summary, 
.completed-goals,
.goal-history {
    width: 100%;
    background: white;
    padding: 2rem;
    border-radius: 16px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
    text-align: center;
    margin-bottom: 2rem;
    border: 1px solid rgba(0, 0, 0, 0.03);
    position: relative;
    overflow: hidden;
}

.goal-summary::before,
.completed-goals::before,
.goal-history::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: linear-gradient(90deg, #4361ee, #3a0ca3);
}

.goal-summary h3,
.completed-goals h3,
.goal-history h3 {
    margin-bottom: 1.5rem;
    color: #2b2d42;
    font-size: 1.3rem;
    position: relative;
    display: inline-block;
}

.goal-summary h3::after,
.completed-goals h3::after,
.goal-history h3::after {
    content: "";
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 50px;
    height: 3px;
    background: linear-gradient(90deg, #4361ee, #3a0ca3);
    border-radius: 3px;
}

.pin-btn {
    background: transparent;
    border: none;
    font-size: 1.3rem;
    cursor: pointer;
    color: #ffbb00;
    transition: all 0.3s;
    position: absolute;
    right: 1.5rem;
    top: 1.5rem;
}

.pin-btn:hover {
    transform: scale(1.2);
    color: #ff9500;
}

.pin-btn.pinned {
    color: #ff9500;
    text-shadow: 0 0 10px rgba(255, 187, 0, 0.4);
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .goals-grid {
        grid-template-columns: 1fr;
    }
    
    .goal-card {
        width: 100%;
    }
    
    .goal-modal-content {
        width: 90%;
        padding: 1.5rem;
    }
}
/* Budget Planner Styling */
#budget-page {
  padding: 2rem 1rem;
  max-width: 1000px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
  min-height: 100vh;
  font-family: 'Poppins', sans-serif;
}

.budget-header {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  padding: 1rem 0;
  position: relative;
  margin-bottom: 2rem;
}

.budget-header::before {
  content: "";
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 80%;
  height: 2px;
  background: linear-gradient(90deg, transparent, rgba(0, 184, 148, 0.4), transparent);
}

.add-budget-btn {
  padding: 0.8rem 1.8rem;
  background: linear-gradient(135deg, #00b894 0%, #019875 100%);
  color: white;
  font-weight: 600;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
  display: flex;
  align-items: center;
  gap: 0.5rem;
  position: relative;
  overflow: hidden;
  font-size: 1rem;
}

.add-budget-btn::before {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: 0.5s;
}

.add-budget-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(0, 184, 148, 0.4);
}

.add-budget-btn:hover::before {
  left: 100%;
}

.budget-summary {
  display: flex;
  justify-content: space-between;
  background: white;
  padding: 1.5rem 2rem;
  border-radius: 16px;
  font-weight: bold;
  margin-bottom: 2rem;
  width: 100%;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(0, 0, 0, 0.03);
}

.budget-summary::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 5px;
  background: linear-gradient(90deg, #00b894, #019875);
}

.budget-entries {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.5rem;
  width: 100%;
}

.budget-entry {
  background: white;
  padding: 1.5rem;
  border-radius: 12px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
  position: relative;
  overflow: hidden;
  border-left: 6px solid;
  animation: cardAppear 0.6s ease-out forwards;
  opacity: 0;
  transform: translateY(20px);
}

@keyframes cardAppear {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.budget-entry:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 40px rgba(0, 184, 148, 0.15);
}

.budget-entry.income { 
  border-color: #00b894;
  background: linear-gradient(135deg, #ffffff 0%, #f0fff8 100%);
}

.budget-entry.expense { 
  border-color: #d63031;
  background: linear-gradient(135deg, #ffffff 0%, #fff5f5 100%);
}

.budget-entry:nth-child(1) { animation-delay: 0.1s; }
.budget-entry:nth-child(2) { animation-delay: 0.2s; }
.budget-entry:nth-child(3) { animation-delay: 0.3s; }
.budget-entry:nth-child(4) { animation-delay: 0.4s; }

.budget-entry-info h4 {
  margin: 0;
  font-size: 1.1rem;
  color: #2b2d42;
  font-weight: 600;
}

.budget-entry-info p {
  margin: 0.5rem 0 0;
  font-size: 0.9rem;
  color: #555;
}

.budget-entry-amount {
  font-size: 1.2rem;
  font-weight: bold;
}

.budget-entry.income .budget-entry-amount {
  color: #00b894;
}

.budget-entry.expense .budget-entry-amount {
  color: #d63031;
}

.budget-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  display: none;
  align-items: center;
  justify-content: center;
  background-color: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(5px);
  z-index: 1000;
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.budget-modal-content {
  background: white;
  padding: 2.5rem;
  border-radius: 16px;
  width: 500px;
  max-width: 95%;
  box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
  animation: modalAppear 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  position: relative;
  border: 1px solid rgba(255, 255, 255, 0.2);
  background: linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%);
}

@keyframes modalAppear {
  from {
    transform: translateY(30px) scale(0.95);
    opacity: 0;
  }
  to {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

.budget-modal-content h3 {
  margin-bottom: 1.5rem;
  font-size: 1.5rem;
  color: #2b2d42;
  text-align: center;
  position: relative;
  padding-bottom: 0.5rem;
}

.budget-modal-content h3::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 60px;
  height: 3px;
  background: linear-gradient(90deg, #00b894, #019875);
  border-radius: 3px;
}

.budget-modal-content input,
.budget-modal-content select,
.budget-modal-content textarea {
  width: 100%;
  margin-bottom: 1.2rem;
  padding: 0.8rem 1rem;
  border: 1px solid #e0e0e0;
  border-radius: 10px;
  font-family: 'Poppins', sans-serif;
  transition: all 0.3s;
  background-color: #f9f9ff;
}

.budget-modal-content input:focus,
.budget-modal-content select:focus,
.budget-modal-content textarea:focus {
  outline: none;
  border-color: #00b894;
  box-shadow: 0 0 0 3px rgba(0, 184, 148, 0.1);
  background-color: white;
}

.submit-budget-btn {
  width: 100%;
  padding: 1rem;
  border: none;
  background: linear-gradient(135deg, #00b894 0%, #019875 100%);
  color: white;
  font-weight: 600;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s;
  margin-top: 1rem;
  font-size: 1rem;
  box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
}

.submit-budget-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0, 184, 148, 0.4);
}

.close {
  position: absolute;
  right: 20px;
  top: 20px;
  font-size: 1.5rem;
  cursor: pointer;
  color: #6c757d;
  transition: color 0.3s;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
}

.close:hover {
  color: #00b894;
  background-color: #f0fff8;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .budget-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 1.5rem;
  }
  
  .budget-summary {
    flex-direction: column;
    gap: 1rem;
  }
  
  .budget-entry {
    flex-direction: column;
    align-items: flex-start;
    gap: 1rem;
  }
  
  .budget-modal-content {
    width: 90%;
    padding: 1.5rem;
  }
}

.logo img.app-logo {
  width: 140px;
  height: auto;
  display: block;
  margin: 1rem auto;
}
/* AI Advisor Page - Enhanced Design */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Open+Sans:wght@400;600&display=swap');

/* Base Styles */
#ai-advisor-page {
    font-family: 'Open Sans', sans-serif;
    padding: 30px;
    max-width: 1200px;
    margin: 0 auto;
    background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ed 100%);
    min-height: 100vh;
}

/* Headings */
#ai-advisor-page h2 {
    font-family: 'Poppins', sans-serif;
    font-size: 2.5rem;
    color: #2c3e50;
    margin-bottom: 30px;
    text-align: center;
    position: relative;
    padding-bottom: 15px;
}

#ai-advisor-page h2::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 4px;
    background: linear-gradient(90deg, #3498db, #9b59b6);
    border-radius: 2px;
}

#ai-advisor-page h3 {
    font-family: 'Poppins', sans-serif;
    font-size: 1.6rem;
    color: #34495e;
    margin: 25px 0 15px;
    position: relative;
    display: inline-block;
}

#ai-advisor-page h3::before {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    width: 40px;
    height: 3px;
    background: #3498db;
    border-radius: 3px;
}

/* Content Cards */
.ai-content-card {
    background: white;
    border-radius: 16px;
    padding: 25px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
    margin-bottom: 30px;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
    border: 1px solid rgba(255,255,255,0.3);
    overflow: hidden;
    position: relative;
}

.ai-content-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 35px rgba(0,0,0,0.12);
}

.ai-content-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: linear-gradient(90deg, #3498db, #9b59b6);
}

/* Advice Box with Animation */
.advice-box {
    background-color: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 8px 25px rgba(41, 128, 185, 0.15);
    margin: 20px 0;
    position: relative;
    border-left: 5px solid #3498db;
    transform: scale(0.98);
    transition: all 0.3s ease;
    opacity: 0.9;
}

.advice-box:hover {
    transform: scale(1);
    opacity: 1;
    box-shadow: 0 10px 30px rgba(41, 128, 185, 0.2);
}

.advice-box span {
    font-weight: 600;
    color: #2980b9;
    display: inline-block;
    margin-right: 5px;
}

/* Pulse Animation for Important Elements */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.03); }
    100% { transform: scale(1); }
}

.highlight-pulse {
    animation: pulse 2s infinite;
    background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(155, 89, 182, 0.1));
    padding: 15px;
    border-radius: 12px;
}

/* Floating Elements */
.floating-icon {
    position: absolute;
    opacity: 0.1;
    z-index: 0;
}

/* Gradient Text */
.gradient-text {
    background: linear-gradient(90deg, #3498db, #9b59b6);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    font-weight: 700;
}

/* Interactive Elements */
.interactive-button {
    background: linear-gradient(90deg, #3498db, #9b59b6);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 50px;
    font-family: 'Poppins', sans-serif;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
}

.interactive-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(52, 152, 219, 0.6);
}

/* Responsive Grid */
.ai-grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 30px;
    margin: 40px 0;
}

/* Error Styling */
.error-text {
    color: #e74c3c;
    font-weight: 600;
    background-color: rgba(231, 76, 60, 0.1);
    padding: 10px 15px;
    border-radius: 8px;
    display: inline-block;
    margin: 10px 0;
}

/* Loading Animation */
.loading-spinner {
    display: inline-block;
    width: 30px;
    height: 30px;
    border: 4px solid rgba(52, 152, 219, 0.3);
    border-radius: 50%;
    border-top-color: #3498db;
    animation: spin 1s ease-in-out infinite;
    margin-right: 10px;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Responsive Adjustments */
@media (max-width: 768px) {
    #ai-advisor-page {
        padding: 20px;
    }
    
    .ai-grid-container {
        grid-template-columns: 1fr;
    }
}

#transactions-page table {
    width: 100%;
    border-collapse: collapse;
    font-family: 'Poppins', sans-serif;
}

#transactions-page th, #transactions-page td {
    padding: 12px 16px;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

#transactions-page tr:hover {
    background-color: #f1f1f1;
}

.action-btn {
    border: none;
    background: none;
    cursor: pointer;
    padding: 6px;
    border-radius: 6px;
    transition: background 0.3s;
}

.action-btn.edit {
    color: #4CAF50;
}

.action-btn.delete {
    color: #F44336;
}

.action-btn:hover {
    background-color: rgba(0, 0, 0, 0.1);
}

.expense {
    color: #F44336;
}

.income {
    color: #4CAF50;
}
/* Reset and base styles */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Poppins', sans-serif;
  background-color: #f5f7fa;
  color: #333;
  line-height: 1.6;
}

.main-content {
  padding: 20px;
}

.header h2 {
  font-size: 2rem;
  margin-bottom: 10px;
  color: #2c3e50;
}

/* Container layout */
.emergency-container {
  display: flex;
  flex-wrap: wrap;
  gap: 25px;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #f5f7fa 0%, #e4e8eb 100%);
  padding: 25px;
  border-radius: 15px;
}

/* Left and right columns */
.emergency-left,
.emergency-right {
  flex: 1;
  min-width: 300px;
}

/* Card styles - Glassmorphism effect */
.emergency-card {
  background: rgba(255, 255, 255, 0.85);
  border-radius: 12px;
  padding: 25px;
  box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
  margin-bottom: 25px;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.18);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.emergency-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 40px rgba(31, 38, 135, 0.15);
}

.emergency-card-header h3 {
  font-size: 1.5rem;
  margin-bottom: 15px;
  color: #2c3e50;
  position: relative;
  padding-bottom: 10px;
}

.emergency-card-header h3::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 50px;
  height: 3px;
  background: linear-gradient(90deg, #3498db, #9b59b6);
  border-radius: 3px;
}

/* Enhanced progress bar */
.progress-container {
  margin-top: 25px;
}

.progress-labels {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
  font-weight: 600;
  color: #34495e;
}

.progress-bar-bg {
  background-color: #e0e0e0;
  border-radius: 10px;
  height: 14px;
  overflow: hidden;
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
}

.progress-bar-fill {
  background: linear-gradient(90deg, #2ecc71, #3498db);
  height: 100%;
  width: 0%;
  transition: width 0.5s ease-in-out;
  border-radius: 10px;
  position: relative;
  overflow: hidden;
}

.progress-bar-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0.1) 0%,
    rgba(255, 255, 255, 0.4) 50%,
    rgba(255, 255, 255, 0.1) 100%
  );
  animation: shimmer 2s infinite;
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

.progress-scale {
  display: flex;
  justify-content: space-between;
  font-size: 0.85rem;
  margin-top: 8px;
  color: #7f8c8d;
}

/* Modern stats grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 15px;
  margin-top: 20px;
}

.stat-card {
  background: linear-gradient(135deg, rgba(240,244,248,0.9) 0%, rgba(225,230,236,0.9) 100%);
  border-radius: 10px;
  padding: 18px 12px;
  text-align: center;
  box-shadow: 0 4px 6px rgba(0,0,0,0.05);
  transition: transform 0.3s ease;
  border: 1px solid rgba(255,255,255,0.5);
}

.stat-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.1);
}

.stat-card p:first-child {
  font-size: 0.85rem;
  color: #7f8c8d;
  margin-bottom: 8px;
}

.stat-card p:last-child {
  font-size: 1.4rem;
  font-weight: 700;
  color: #2c3e50;
  margin: 0;
}

/* Form styles with floating labels */
.form-group {
  margin-bottom: 15px;
}

.form-group label {
  display: block;
  font-weight: 500;
  margin-bottom: 5px;
}

.form-group input {
  width: 100%;
  padding: 8px 10px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

.hint {
  font-size: 0.8rem;
  color: #888;
  margin-top: 5px;
}
/* Buttons with modern effects */
.submit-btn,
.btn-income,
.btn-expense,
.icon-btn {
  border: none;
  padding: 12px 20px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  font-size: 0.95rem;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.submit-btn {
  background-color: #3498db;
  color: #fff;
}

.btn-income {
  background-color: #2ecc71;
  color: #fff;
}

.btn-expense {
  background-color: #e74c3c;
  color: #fff;
}

.icon-btn {
  background-color: #9b59b6;
  color: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.icon-btn i {
  margin-right: 8px;
}

/* Hover effects for buttons */
.submit-btn:hover,
.btn-income:hover,
.btn-expense:hover,
.icon-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.15);
}

.submit-btn:active,
.btn-income:active,
.btn-expense:active,
.icon-btn:active {
  transform: translateY(0);
}

/* Ripple effect */
.submit-btn::after,
.btn-income::after,
.btn-expense::after,
.icon-btn::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 5px;
  height: 5px;
  background: rgba(255, 255, 255, 0.5);
  opacity: 0;
  border-radius: 100%;
  transform: scale(1, 1) translate(-50%);
  transform-origin: 50% 50%;
}

.submit-btn:focus:not(:active)::after,
.btn-income:focus:not(:active)::after,
.btn-expense:focus:not(:active)::after,
.icon-btn:focus:not(:active)::after {
  animation: ripple 1s ease-out;
}

@keyframes ripple {
  0% {
    transform: scale(0, 0);
    opacity: 0.5;
  }
  100% {
    transform: scale(20, 20);
    opacity: 0;
  }
}

.action-buttons {
  display: flex;
  gap: 12px;
  margin-top: 15px;
}

/* Modern table styles */
.table-container {
  overflow-x: auto;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  margin-top: 20px;
  background: white;
  border-radius: 10px;
  overflow: hidden;
}

table th,
table td {
  padding: 15px;
  text-align: left;
  border-bottom: 1px solid #ecf0f1;
}

table th {
  background-color: #3498db;
  color: white;
  font-weight: 600;
  text-transform: uppercase;
  font-size: 0.8rem;
  letter-spacing: 0.5px;
}

table tr:last-child td {
  border-bottom: none;
}

table tr:hover td {
  background-color: #f8f9fa;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .emergency-container {
    padding: 15px;
  }
  
  .stat-card {
    margin-bottom: 10px;
  }
  
  .action-buttons {
    flex-direction: column;
  }
  
  table th,
  table td {
    padding: 10px;
  }
}
#reports-page {
    padding: 2rem;
    background-color: #f8fafc;
    min-height: 100vh;
}

/* Header Section */
.report-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #e2e8f0;
}

.report-header h2 {
    font-family: 'Inter', sans-serif;
    font-size: 1.8rem;
    font-weight: 600;
    color: #1e293b;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin: 0;
}

.report-header h2 svg {
    color: #6366f1;
    width: 1.5rem;
    height: 1.5rem;
}

/* Filters Section */
.report-filters {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    margin-bottom: 2rem;
    padding: 1.25rem;
    background-color: white;
    border-radius: 0.75rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    flex-wrap: wrap;
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.filter-group label {
    font-size: 0.875rem;
    font-weight: 500;
    color: #64748b;
}

.filter-group select,
.filter-group input {
    padding: 0.5rem 0.75rem;
    border: 1px solid #e2e8f0;
    border-radius: 0.5rem;
    font-size: 0.875rem;
    background-color: #f8fafc;
    transition: all 0.2s;
    min-width: 180px;
}

.filter-group select:focus,
.filter-group input:focus {
    outline: none;
    border-color: #818cf8;
    box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.2);
}

#apply-report-filter {
    align-self: flex-end;
    padding: 0.5rem 1.25rem;
    background-color: #6366f1;
    color: white;
    border: none;
    border-radius: 0.5rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

#apply-report-filter:hover {
    background-color: #4f46e5;
    transform: translateY(-1px);
}

/* Summary Section */
.report-summary-container {
    background-color: white;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin-bottom: 2rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    border-left: 4px solid #6366f1;
}

#report-summary-text {
    margin: 0;
    font-size: 1rem;
    color: #475569;
    line-height: 1.6;
}

/* Table Section */
.report-table-container {
    background-color: white;
    border-radius: 0.75rem;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    margin-bottom: 2rem;
}

#report-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.875rem;
}

#report-table thead {
    background-color: #f1f5f9;
}

#report-table th {
    padding: 1rem 1.25rem;
    text-align: left;
    color: #334155;
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
}

#report-table td {
    padding: 1rem 1.25rem;
    border-top: 1px solid #f1f5f9;
    color: #475569;
}

#report-table tbody tr:hover {
    background-color: #f8fafc;
}

/* Download Button */
.download-section {
    display: flex;
    justify-content: flex-end;
}

#download-report-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    background-color: #10b981;
    color: white;
    border: none;
    border-radius: 0.5rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

#download-report-btn:hover {
    background-color: #059669;
    transform: translateY(-1px);
}

#download-report-btn svg {
    width: 1rem;
    height: 1rem;
}

/* Responsive Adjustments */
@media (max-width: 768px) {
    .report-filters {
        gap: 1rem;
    }
    
    .filter-group {
        min-width: 100%;
    }
    
    #report-table {
        display: block;
        overflow-x: auto;
    }
}

/* Animation */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.report-table-container,
.report-summary-container {
    animation: fadeIn 0.3s ease-out forwards;
}
/* Base Styles */
:root {
  --primary: #4f46e5;
  --primary-light: #6366f1;
  --primary-dark: #4338ca;
  --secondary: #10b981;
  --secondary-dark: #059669;
  --text-primary: #1f2937;
  --text-secondary: #6b7280;
  --border: #e5e7eb;
  --bg-primary: #f9fafb;
  --bg-secondary: #ffffff;
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  background-color: var(--bg-primary);
  min-height: 100vh;
  color: var(--text-primary);
  line-height: 1.5;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

/* Header Styles */
header {
  margin-bottom: 3rem;
  text-align: center;
  position: relative;
}

header h1 {
  font-size: 2.25rem;
  font-weight: 800;
  color: var(--text-primary);
  margin-bottom: 0.5rem;
  background: linear-gradient(90deg, var(--primary), #8b5cf6);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  display: inline-block;
}

header p {
  color: var(--text-secondary);
  font-size: 1.125rem;
  max-width: 600px;
  margin: 0 auto;
}

/* Card Styles */
.card {
  background-color: var(--bg-secondary);
  border-radius: 1rem;
  box-shadow: var(--shadow-md);
  padding: 2rem;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  margin-bottom: 2rem;
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

/* Form Input Styles */
.form-group {
  margin-bottom: 1.5rem;
  position: relative;
}

.form-group label {
  display: block;
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 0.5rem;
}

.form-control {
  width: 100%;
  padding: 0.75rem 1rem;
  border: 1px solid var(--border);
  border-radius: 0.75rem;
  font-size: 1rem;
  transition: all 0.3s ease;
  background-color: var(--bg-secondary);
}

.form-control:focus {
  outline: none;
  border-color: var(--primary-light);
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
}

/* Toggle Switch */
.toggle-container {
  display: flex;
  align-items: center;
  margin-bottom: 1.5rem;
}

.toggle-label {
  margin-right: 1rem;
  font-weight: 500;
  color: var(--text-primary);
}

.toggle-switch {
  position: relative;
  display: inline-block;
  width: 3.5rem;
  height: 2rem;
}

.toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #e2e8f0;
  transition: .4s;
  border-radius: 2rem;
}

.toggle-slider:before {
  position: absolute;
  content: "";
  height: 1.5rem;
  width: 1.5rem;
  left: 0.25rem;
  bottom: 0.25rem;
  background-color: white;
  transition: .4s;
  border-radius: 50%;
}

input:checked + .toggle-slider {
  background-color: var(--primary);
}

input:checked + .toggle-slider:before {
  transform: translateX(1.5rem);
}

/* Tooltip Styles */
.tooltip {
  position: relative;
  display: inline-flex;
  margin-left: 0.5rem;
}

.tooltip-icon {
  width: 1rem;
  height: 1rem;
  color: var(--text-secondary);
}

.tooltip-text {
  visibility: hidden;
  width: 200px;
  background-color: var(--text-primary);
  color: white;
  text-align: center;
  border-radius: 0.5rem;
  padding: 0.75rem;
  position: absolute;
  z-index: 10;
  bottom: 125%;
  left: 50%;
  transform: translateX(-50%);
  opacity: 0;
  transition: opacity 0.3s;
  font-size: 0.875rem;
  font-weight: normal;
  box-shadow: var(--shadow-md);
}

.tooltip:hover .tooltip-text {
  visibility: visible;
  opacity: 1;
}

/* Tax Summary Styles */
#tax-summary {
  background-color: var(--bg-primary);
  border-radius: 0.75rem;
  padding: 1.5rem;
  margin-top: 2rem;
}

#tax-summary div {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem 0;
  border-bottom: 1px solid var(--border);
}

#tax-summary div:last-child {
  border-bottom: none;
}

#tax-liability {
  font-weight: 700;
  font-size: 1.25rem;
  color: var(--primary);
}

/* Button Styles */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.75rem 1.5rem;
  border-radius: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  border: none;
  font-size: 1rem;
}

.btn-primary {
  background-color: var(--primary);
  color: white;
}

.btn-primary:hover {
  background-color: var(--primary-dark);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.btn-icon {
  margin-right: 0.5rem;
}

/* Modal Styles */
#comparison-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

#comparison-modal.show {
  opacity: 1;
  visibility: visible;
}

.modal-content {
  background-color: var(--bg-secondary);
  border-radius: 1rem;
  padding: 2rem;
  width: 90%;
  max-width: 800px;
  max-height: 90vh;
  overflow-y: auto;
  transform: translateY(20px);
  transition: transform 0.3s ease;
  box-shadow: var(--shadow-lg);
}

#comparison-modal.show .modal-content {
  transform: translateY(0);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
}

.modal-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-primary);
}

.modal-close {
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: var(--text-secondary);
}

/* Grid Layout */
.grid {
  display: grid;
  gap: 1.5rem;
}

.grid-cols-1 {
  grid-template-columns: repeat(1, 1fr);
}

@media (min-width: 768px) {
  .md\:grid-cols-2 {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1024px) {
  .lg\:grid-cols-3 {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .lg\:col-span-2 {
    grid-column: span 2;
  }
}

/* Animations */
@keyframes slideIn {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.slide-in {
  animation: slideIn 0.4s ease-out forwards;
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  .container {
    padding: 1.5rem 1rem;
  }
  
  header h1 {
    font-size: 1.75rem;
  }
  
  header p {
    font-size: 1rem;
  }
  
  .card {
    padding: 1.5rem;
  }
}

/* Micro-interactions */
input[type="number"]:hover {
  border-color: var(--primary-light);
}

button:active {
  transform: translateY(1px);
}

/* Highlight important values */
.highlight {
  color: var(--primary);
  font-weight: 600;
}


.loan-manager-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.loan-form-section {
    grid-column: 1;
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.loan-stats-section {
    grid-column: 2;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
}

.stats-card {
    background: #fff;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    text-align: center;
}

.stats-card h3 {
    margin-top: 0;
    font-size: 16px;
    color: #7f8c8d;
}

.stats-card p {
    margin-bottom: 0;
    font-size: 24px;
    font-weight: 600;
    color: #2c3e50;
}

.chart-card {
    grid-column: span 3;
    height: 250px;
}

.loans-list-section {
    grid-column: 1;
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    margin-top: 20px;
}

.payment-overview-section {
    grid-column: 2;
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    margin-top: 20px;
}

.amortization-section {
    grid-column: 1 / -1;
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    margin-top: 20px;
}

.time-period-toggle {
    display: flex;
    margin-bottom: 20px;
}

.time-period-toggle button {
    flex: 1;
    padding: 10px;
    border: 1px solid #ddd;
    background: none;
    cursor: pointer;
    font-weight: 600;
}

.time-period-toggle button:first-child {
    border-radius: 4px 0 0 4px;
}

.time-period-toggle button:last-child {
    border-radius: 0 4px 4px 0;
}

.time-period-toggle button.active {
    background-color: #3498db;
    color: white;
    border-color: #3498db;
}

.outstanding-balance h3 {
    margin-top: 0;
    color: #2c3e50;
}

.balance-details div {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid #eee;
}

.balance-details div:last-child {
    border-bottom: none;
}

.amortization-table-container {
    overflow-x: auto;
}

#amortization-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
}

#amortization-table th {
    background-color: #f8f9fa;
    padding: 12px;
    text-align: left;
    font-weight: 600;
    color: #2c3e50;
}

#amortization-table td {
    padding: 12px;
    border-bottom: 1px solid #eee;
}

#amortization-table tr:last-child td {
    border-bottom: none;
}

.no-loan-selected {
    text-align: center;
    color: #7f8c8d;
    font-style: italic;
}

.loan-item {
    padding: 15px;
    border: 1px solid #eee;
    border-radius: 4px;
    margin-bottom: 10px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.loan-item:hover {
    background-color: #f8f9fa;
}

.loan-item.active {
    background-color: #e3f2fd;
    border-left: 4px solid #3498db;
}

.loan-item-header {
    display: flex;
    justify-content: space-between;
    font-weight: 600;
    margin-bottom: 5px;
}

.loan-item-details {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
    color: #7f8c8d;
}

.loan-item-details span {
    margin-right: 15px;
}

.loan-comparison {
    margin-top: 30px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
}

.comparison-inputs {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-bottom: 15px;
}

#comparison-results {
    margin-top: 20px;
    padding: 15px;
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.comparison-result {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
}

.comparison-result:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}

.btn-add-loan {
    background-color: #3498db;
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    font-weight: 600;
    width: 100%;
    transition: background-color 0.3s;
}

.btn-add-loan:hover {
    background-color: #2980b9;
}

@media (max-width: 768px) {
    .loan-manager-container {
        grid-template-columns: 1fr;
    }
    
    .loan-stats-section {
        grid-column: 1;
        grid-template-columns: 1fr;
    }
    
    .payment-overview-section {
        grid-column: 1;
    }
} /* Main Content Area */
/* Subscription Tracker Page Styles */
/* Subscription Tracker Page Styles - Enhanced */
:root {
    --primary-color: #4361ee;
    --secondary-color: #3a0ca3;
    --accent-color: #f72585;
    --success-color: #4cc9f0;
    --entertainment-color: #7209b7;
    --health-color: #2ec4b6;
    --housing-color: #ff9e00;
    --dark-color: #14213d;
    --gray-color: #6c757d;
    --light-gray: #f8f9fa;
}

#subscriptiontracker-page {
    padding: 2rem;
    max-width: 1400px;
    margin: 0 auto;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.subscription-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2.5rem;
    position: relative;
}

.subscription-header h1 {
    font-size: 2.5rem;
    color: var(--dark-color);
    font-weight: 700;
    position: relative;
    display: inline-block;
}

.subscription-header h1::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 0;
    width: 60px;
    height: 4px;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    border-radius: 2px;
}

#add-subscription-btn {
    background-color: var(--primary-color);
    color: white;
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.3s;
}

#add-subscription-btn:hover {
    background-color: var(--secondary-color);
}
/* Summary Cards - Enhanced */
.summary-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2.5rem;
}

.summary-card {
    border-radius: 20px;
    padding: 1.75rem;
    color: #333;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
    min-height: 140px;
}

.summary-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(255,255,255,0.3), rgba(255,255,255,0.1));
    z-index: 0;
}

.summary-card h3 {
    font-size: 1.1rem;
    margin-bottom: 0.75rem;
    font-weight: 600;
    opacity: 0.9;
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.summary-card h3 i {
    font-size: 1.2rem;
}

.summary-card p {
    font-size: 2rem;
    font-weight: 700;
    position: relative;
    z-index: 1;
    margin: 0.5rem 0;
}

.summary-card .trend {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.9rem;
    font-weight: 500;
    position: relative;
    z-index: 1;
}

.summary-card .trend.up {
    color: #2ecc71;
}

.summary-card .trend.down {
    color: #e74c3c;
}

/* Hover effect */
.summary-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
}

/* Individual Card Colors with Icons */
.summary-card:nth-child(1) {
    background: linear-gradient(135deg, #4361ee, #3a0ca3);
    color: white;
}

.summary-card:nth-child(2) {
    background: linear-gradient(135deg, #4cc9f0, #4895ef);
    color: white;
}

.summary-card:nth-child(3) {
    background: linear-gradient(135deg, #f72585, #b5179e);
    color: white;
}

.summary-card:nth-child(4) {
    background: linear-gradient(135deg, #ff9e00, #ff9100);
    color: white;
}

/* Calendar Section - Enhanced */
.calendar-section {
    background: white;
    border-radius: 16px;
    padding: 1.75rem;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    margin-bottom: 2.5rem;
    border: 1px solid rgba(0, 0, 0, 0.05);
}

.calendar-section h2 {
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    color: var(--dark-color);
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.calendar-section h2 i {
    color: var(--primary-color);
}

#subscription-calendar {
    height: 350px;
    width: 100%;
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid rgba(0, 0, 0, 0.1);
}

/* Subscription Content Layout */
.subscription-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
}

@media (max-width: 1024px) {
    .subscription-content {
        grid-template-columns: 1fr;
    }
}

/* Subscription List - Enhanced */
.subscription-list-section {
    background: white;
    border-radius: 16px;
    padding: 1.75rem;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(0, 0, 0, 0.05);
}

.list-header {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.75rem;
    gap: 1rem;
}

.list-header h2 {
    font-size: 1.5rem;
    color: var(--dark-color);
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.list-header h2 i {
    color: var(--primary-color);
}

.list-controls {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
}

#subscription-search {
    padding: 0.6rem 1.2rem;
    border: 1px solid var(--light-gray);
    border-radius: 10px;
    min-width: 220px;
    transition: all 0.3s;
    font-size: 0.95rem;
    background-color: #f8f9fa;
}

#subscription-search:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    background-color: white;
}

#category-filter, #sort-by {
    padding: 0.6rem;
    border: 1px solid var(--light-gray);
    border-radius: 10px;
    background: #f8f9fa;
    font-size: 0.95rem;
    transition: all 0.3s;
}

#category-filter:focus, #sort-by:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    background-color: white;
}

.subscription-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.subscription-item {
    background: white;
    border-radius: 12px;
    padding: 1.25rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s;
    border: 1px solid rgba(0, 0, 0, 0.05);
    position: relative;
    overflow: hidden;
}

.subscription-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
    border-color: rgba(67, 97, 238, 0.2);
}

.subscription-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.subscription-icon {
    width: 44px;
    height: 44px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.2rem;
    flex-shrink: 0;
}

.subscription-details h3 {
    font-size: 1.05rem;
    margin-bottom: 0.3rem;
    color: var(--dark-color);
    font-weight: 600;
}

.subscription-details p {
    font-size: 0.85rem;
    color: var(--gray-color);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.subscription-details p i {
    font-size: 0.8rem;
}

.subscription-amount {
    font-weight: 700;
    font-size: 1.15rem;
    margin-left: 1rem;
}

.subscription-actions {
    display: flex;
    gap: 0.75rem;
}

.subscription-actions button {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.1rem;
    color: var(--gray-color);
    transition: all 0.2s;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.subscription-actions button:hover {
    color: var(--primary-color);
    background-color: rgba(67, 97, 238, 0.1);
}

.subscription-actions button.delete:hover {
    color: var(--accent-color);
    background-color: rgba(247, 37, 133, 0.1);
}

/* Analytics Section - Enhanced */
.analytics-section {
    background: white;
    border-radius: 16px;
    padding: 1.75rem;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(0, 0, 0, 0.05);
}

.analytics-section h2 {
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    color: var(--dark-color);
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.analytics-section h2 i {
    color: var(--primary-color);
}

#analytics-chart {
    height: 300px;
    width: 100%;
    border-radius: 12px;
    overflow: hidden;
}

.optimization-tips h3 {
    font-size: 1.25rem;
    margin: 1.5rem 0 1rem;
    color: var(--dark-color);
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.optimization-tips h3 i {
    color: var(--accent-color);
}

.tip-item {
    background: #f8f9fa;
    border-radius: 12px;
    padding: 1.25rem;
    margin-bottom: 1rem;
    transition: all 0.3s;
    border-left: 4px solid var(--primary-color);
    display: flex;
    gap: 1rem;
}

.tip-item:hover {
    transform: translateX(5px);
    background: white;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.tip-icon {
    color: var(--primary-color);
    font-size: 1.2rem;
    margin-top: 0.2rem;
}

.tip-content h4 {
    font-size: 1rem;
    margin-bottom: 0.5rem;
    color: var(--dark-color);
}

.tip-content p {
    margin-bottom: 0;
    font-size: 0.9rem;
    color: var(--gray-color);
    line-height: 1.5;
}

/* Modal Styles - Enhanced */
#subscription-modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(5px);
    animation: fadeIn 0.3s ease-out;
    pointer-events: auto; /* Prevent click-through */
}


#subscription-modal .modal-content {
    background-color: #fff;
    margin: 10% auto;
    padding: 2rem;
    border-radius: 16px;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.2);
    animation: slideIn 30.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    z-index: 1001;
    border: none;
    pointer-events: auto; /* Allow interactions inside */
}

.modal-content h2 {
    font-size: 1.75rem;
    margin-bottom: 1.75rem;
    color: var(--dark-color);
    text-align: center;
    position: relative;
    padding-bottom: 0.75rem;
}

.modal-content h2::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    border-radius: 3px;
}

#subscription-modal .close {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--gray-color);
    transition: all 0.3s;
    background: rgba(0,0,0,0.05);
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.close:hover {
    color: var(--accent-color);
    transform: rotate(90deg);
    background: rgba(247, 37, 133, 0.1);
}

#subscription-form .form-group {
    margin-bottom: 1.5rem;
    position: relative;
}

#subscription-form label {
    display: block;
    margin-bottom: 0.75rem;
    font-weight: 600;
    color: var(--dark-color);
    font-size: 0.95rem;
}

#subscription-form input,
#subscription-form select {
    width: 100%;
    padding: 0.85rem 1rem;
    border: 1px solid var(--light-gray);
    border-radius: 10px;
    font-family: inherit;
    font-size: 0.95rem;
    transition: all 0.3s;
    background-color: #f8f9fa;
}

#subscription-form input:focus,
#subscription-form select:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    background-color: white;
}

#subscription-form button[type="submit"] {
    width: 100%;
    padding: 1rem;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: white;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    margin-top: 1rem;
    font-size: 1rem;
    box-shadow: 0 4px 12px rgba(67, 97, 238, 0.3);
}

#subscription-form button[type="submit"]:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(67, 97, 238, 0.4);
}

#subscription-form button[type="submit"]:active {
    transform: translateY(0);
}

.form-icon {
    position: absolute;
    right: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--gray-color);
    font-size: 1rem;
}

/* Category Colors - Enhanced */
.streaming { 
    border-left: 4px solid var(--entertainment-color);
    background-color: rgba(114, 9, 183, 0.05) !important;
}
.streaming .subscription-icon {
    background: linear-gradient(135deg, var(--entertainment-color), #9d4edd);
}

.fitness { 
    border-left: 4px solid var(--health-color);
    background-color: rgba(46, 196, 182, 0.05) !important;
}
.fitness .subscription-icon {
    background: linear-gradient(135deg, var(--health-color), #56cfe1);
}

.utility { 
    border-left: 4px solid var(--housing-color);
    background-color: rgba(255, 158, 0, 0.05) !important;
}
.utility .subscription-icon {
    background: linear-gradient(135deg, var(--housing-color), #ffaa00);
}

.membership { 
    border-left: 4px solid var(--primary-color);
    background-color: rgba(67, 97, 238, 0.05) !important;
}
.membership .subscription-icon {
    background: linear-gradient(135deg, var(--primary-color), #4895ef);
}

.software { 
    border-left: 4px solid var(--success-color);
    background-color: rgba(76, 201, 240, 0.05) !important;
}
.software .subscription-icon {
    background: linear-gradient(135deg, var(--success-color), #56cfe1);
}

.other { 
    border-left: 4px solid var(--gray-color);
    background-color: rgba(108, 117, 125, 0.05) !important;
}
.other .subscription-icon {
    background: linear-gradient(135deg, var(--gray-color), #adb5bd);
}

/* Responsive Adjustments */
@media (max-width: 768px) {
    .subscription-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .subscription-header h1 {
        font-size: 2rem;
    }
    
    #add-subscription-btn {
        width: 100%;
        justify-content: center;
    }
    
    .summary-cards {
        grid-template-columns: 1fr 1fr;
    }
    
    .list-header {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .list-controls {
        width: 100%;
    }
    
    #subscription-search {
        min-width: 100%;
    }
    
    .subscription-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .subscription-amount {
        margin-left: 0;
        margin-top: 0.5rem;
    }
    
    .subscription-actions {
        align-self: flex-end;
    }
    
    #subscription-modal .modal-content {
        margin: 20% auto;
        padding: 1.5rem;
    }
}

@media (max-width: 480px) {
    .summary-cards {
        grid-template-columns: 1fr;
    }
    
    .subscription-content {
        gap: 1.5rem;
    }
    
    .calendar-section,
    .subscription-list-section,
    .analytics-section {
        padding: 1.25rem;
    }
    
    #subscription-modal .modal-content {
        margin: 25% auto;
        width: 95%;
    }
}

/* Animations */
@keyframes slideIn {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes pulse {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
    100% {
        transform: scale(1);
    }
}

/* Floating action button for mobile */
.floating-add-btn {
    display: none;
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: white;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    box-shadow: 0 6px 20px rgba(67, 97, 238, 0.4);
    z-index: 999;
    transition: all 0.3s;
    justify-content: center;
    align-items: center;
}

.floating-add-btn:hover {
    transform: translateY(-3px) scale(1.1);
    box-shadow: 0 8px 25px rgba(67, 97, 238, 0.5);
}

@media (max-width: 768px) {
    .floating-add-btn {
        display: flex;
    }
    
    #add-subscription-btn {
        display: none;
    }
}
      
        :root {
            --primary-color: #2962ff;
            --secondary-color: #00c853;
            --danger-color: #ff1744;
            --dark-color: #263238;
            --light-color: #eceff1;
            --gray-color: #b0bec5;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f5f7fa;
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 20px 0;
            margin-bottom: 30px;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .search-container {
            display: flex;
            gap: 10px;
        }
        
        .search-input {
            padding: 10px 15px;
            border: 1px solid var(--gray-color);
            border-radius: 4px;
            width: 300px;
            font-size: 16px;
        }
        
        .search-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s;
        }
        
        .search-button:hover {
            background-color: #0039cb;
        }
        
        .interval-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .interval-btn {
            padding: 8px 15px;
            background-color: white;
            border: 1px solid var(--gray-color);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .interval-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
      .dashboard {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-bottom: 30px;
}

        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            padding: 20px;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 500;
        }
        
        .stock-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stock-symbol {
            font-size: 28px;
            font-weight: 700;
        }
        
        .stock-price {
            font-size: 28px;
            font-weight: 700;
        }
        
        .price-up {
            color: var(--secondary-color);
        }
        
        .price-down {
            color: var(--danger-color);
        }
        
        .stock-change {
            display: flex;
            align-items: center;
            font-size: 16px;
            font-weight: 500;
        }
        
      .schart-container {
    width: 100%;
    height: 350px; /* Adjust if needed */
    margin-top: 20px;
}

        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .data-table th, .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .data-table th {
            font-weight: 500;
            color: var(--gray-color);
        }
        
        .data-table tr:hover {
            background-color: #f9f9f9;
        }
        
        .positive {
            color: var(--secondary-color);
        }
        
        .negative {
            color: var(--danger-color);
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: var(--gray-color);
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .search-input {
                width: 200px;
            }
        }
                 #insurancePage {
    padding: 2rem;
    max-width: 1400px;
    margin: 0 auto;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
    min-height: 100vh;
}

.insuranceHeader {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2.5rem;
    position: relative;
}

.insuranceHeader h1 {
    font-size: 2.5rem;
    color: #14213d;
    font-weight: 700;
    position: relative;
    display: inline-block;
}

.insuranceHeader h1::after {
    content: "";
    position: absolute;
    bottom: -8px;
    left: 0;
    width: 60px;
    height: 4px;
    background: linear-gradient(90deg, #4361ee, #3a0ca3);
    border-radius: 2px;
}

#addInsuranceBtn {
    background-color: #4361ee;
    color: white;
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.3s;
}

#addInsuranceBtn:hover {
    background-color: #3a0ca3;
}

.insuranceSummaryCards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2.5rem;
}

.insuranceSummaryCard {
    border-radius: 20px;
    padding: 1.75rem;
    color: #333;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
    min-height: 140px;
}

.insuranceSummaryCard::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(255,255,255,0.3), rgba(255,255,255,0.1));
    z-index: 0;
}

.insuranceSummaryCard h3 {
    font-size: 1.1rem;
    margin-bottom: 0.75rem;
    font-weight: 600;
    opacity: 0.9;
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.insuranceSummaryCard h3 i {
    font-size: 1.2rem;
}

.insuranceSummaryCard p {
    font-size: 2rem;
    font-weight: 700;
    position: relative;
    z-index: 1;
    margin: 0.5rem 0;
}

.insuranceSummaryCard .trend {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.9rem;
    font-weight: 500;
    position: relative;
    z-index: 1;
}

.insuranceSummaryCard.trend.up {
    color: #2ecc71;
}

.insuranceSummaryCard.trend.down {
    color: #e74c3c;
}

.insuranceSummaryCard:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
}

.insuranceSummaryCard:nth-child(1) {
    background: linear-gradient(135deg, #4361ee, #3a0ca3);
    color: white;
}

.insuranceSummaryCard:nth-child(2) {
    background: linear-gradient(135deg, #4cc9f0, #4895ef);
    color: white;
}

.insuranceSummaryCard:nth-child(3) {
    background: linear-gradient(135deg, #f72585, #b5179e);
    color: white;
}

.insuranceSummaryCard:nth-child(4) {
    background: linear-gradient(135deg, #ff9e00, #ff9100);
    color: white;
}

.insuranceListSection {
    background: white;
    border-radius: 16px;
    padding: 1.75rem;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    margin-bottom: 2.5rem;
    border: 1px solid rgba(0, 0, 0, 0.05);
}

.insuranceListHeader {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.75rem;
    gap: 1rem;
}

.insuranceListHeader h2 {
    font-size: 1.5rem;
    color: #14213d;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.insuranceListHeader h2 i {
    color: #4361ee;
}

.insuranceListControls {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
}

#insuranceSearch {
    padding: 0.6rem 1.2rem;
    border: 1px solid #e9ecef;
    border-radius: 10px;
    min-width: 220px;
    transition: all 0.3s;
    font-size: 0.95rem;
    background-color: #f8f9fa;
}

#insuranceSearch:focus {
    outline: none;
    border-color: #4361ee;
    box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    background-color: white;
}

#insuranceTypeFilter, #insuranceSortBy {
    padding: 0.6rem;
    border: 1px solid #e9ecef;
    border-radius: 10px;
    background: #f8f9fa;
    font-size: 0.95rem;
    transition: all 0.3s;
}

#insuranceTypeFilter:focus, #insuranceSortBy:focus {
    outline: none;
    border-color: #4361ee;
    box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    background-color: white;
}

.insuranceList {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.insuranceItem {
    background: white;
    border-radius: 12px;
    padding: 1.25rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s;
    border: 1px solid rgba(0, 0, 0, 0.05);
    position: relative;
    overflow: hidden;
}

.insuranceItem:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
    border-color: rgba(67, 97, 238, 0.2);
}

.insuranceInfo {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.insuranceIcon {
    width: 44px;
    height: 44px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.2rem;
    flex-shrink: 0;
}

.insuranceDetails h3 {
    font-size: 1.05rem;
    margin-bottom: 0.3rem;
    color: #14213d;
    font-weight: 600;
}

.insuranceDetails p {
    font-size: 0.85rem;
    color: #6c757d;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.insuranceDetails p i {
    font-size: 0.8rem;
}

.insurancePremium {
    font-weight: 700;
    font-size: 1.15rem;
    margin-left: 1rem;
}

.insuranceActions {
    display: flex;
    gap: 0.75rem;
}

.insuranceActions button {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.1rem;
    color: #6c757d;
    transition: all 0.2s;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.insuranceActions button:hover {
    color: #4361ee;
    background-color: rgba(67, 97, 238, 0.1);
}

.insuranceActions button.delete:hover {
    color: #f72585;
    background-color: rgba(247, 37, 133, 0.1);
}

.insuranceAnalyticsSection {
    background: white;
    border-radius: 16px;
    padding: 1.75rem;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(0, 0, 0, 0.05);
}

.insuranceAnalyticsSection h2 {
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    color: #14213d;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.insuranceAnalyticsSection h2 i {
    color: #4361ee;
}

#insuranceChartContainer {
    height: 300px;
    width: 100%;
    border-radius: 12px;
    overflow: hidden;
    position: relative;
}

.coverageTips h3 {
    font-size: 1.25rem;
    margin: 1.5rem 0 1rem;
    color: #14213d;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.coverageTips h3 i {
    color: #f72585;
}

.tipItem {
    background: #f8f9fa;
    border-radius: 12px;
    padding: 1.25rem;
    margin-bottom: 1rem;
    transition: all 0.3s;
    border-left: 4px solid #4361ee;
    display: flex;
    gap: 1rem;
}

.tipItem:hover {
    transform: translateX(5px);
    background: white;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.tipIcon {
    color: #4361ee;
    font-size: 1.2rem;
    margin-top: 0.2rem;
}

.tipContent h4 {
    font-size: 1rem;
    margin-bottom: 0.5rem;
    color: #14213d;
}

.tipContent p {
    margin-bottom: 0;
    font-size: 0.9rem;
    color: #6c757d;
    line-height: 1.5;
}

/* Redesigned Modal Form */
#insuranceModal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(6px);
    z-index: 1000;
    animation: fadeIn 0.3s ease-out;
    overflow-y: auto;
}

.modalContent {
    background: white;
    margin: 5% auto;
    padding: 2.5rem;
    border-radius: 16px;
    width: 100%;
    max-width: 500px;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
    position: relative;
    animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border: none;
}

.modalContent h2 {
    font-size: 1.8rem;
    color: #14213d;
    font-weight: 700;
    text-align: center;
    margin-bottom: 2rem;
    position: relative;
    padding-bottom: 1rem;
}

.modalContent h2::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 3px;
    background: linear-gradient(90deg, #4361ee, #3a0ca3);
    border-radius: 3px;
}

.close {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    font-size: 1.5rem;
    color: #6c757d;
    background: transparent;
    border: none;
    cursor: pointer;
    transition: all 0.3s;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
}

.close:hover {
    color: #f72585;
    background-color: rgba(247, 37, 133, 0.1);
    transform: rotate(90deg);
}

/* Form Container */
#insuranceForm {
            max-width: 680px;
            margin: 0 auto;
            padding: 2rem;
            background: white;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
        }
        
        .form-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .form-header h1 {
            font-size: 1.8rem;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }
        
        .form-header p {
            color: #64748b;
            font-size: 0.95rem;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1.25rem;
        }
        
        .form-group.full-width {
            grid-column: span 2;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-light);
            font-size: 0.95rem;
        }
        
        .form-control {
            width: 100%;
            padding: 0.85rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-family: 'Poppins', sans-serif;
            font-size: 0.95rem;
            transition: all 0.3s;
            background-color: var(--bg-light);
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.15);
            background-color: white;
        }
        
        .amount-input {
            position: relative;
        }
        
        .amount-input .currency-symbol {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #6c757d;
            font-weight: 500;
        }
        
        .amount-input .form-control {
            padding-left: 2.5rem;
        }
        
        textarea.form-control {
            min-height: 100px;
            resize: vertical;
        }
        
        select.form-control {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1em;
        }
        
        .form-actions {
            margin-top: 2rem;
            text-align: center;
        }
        
        .btn {
            display: inline-block;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: var(--shadow-md);
            text-decoration: none;
        }
        
        .btn:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .notes-section {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: var(--radius-sm);
            margin-top: 1rem;
        }
        
        .notes-section h4 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text-light);
        }
        
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .form-group.full-width {
                grid-column: span 1;
            }
            
            #insuranceForm {
                padding: 1.5rem;
            }
        }

/* Form icons */
.formIcon {
    position: absolute;
    right: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: #6c757d;
    font-size: 1rem;
}

/* Insurance type specific styles */
.healthInsurance {
    border-left: 4px solid #2ec4b6;
    background-color: rgba(46, 196, 182, 0.05) !important;
}

.healthInsurance .insuranceIcon {
    background: linear-gradient(135deg, #2ec4b6, #56cfe1);
}

.lifeInsurance {
    border-left: 4px solid #4361ee;
    background-color: rgba(67, 97, 238, 0.05) !important;
}

.lifeInsurance .insuranceIcon {
    background: linear-gradient(135deg, #4361ee, #4895ef);
}

.autoInsurance {
    border-left: 4px solid #ff9e00;
    background-color: rgba(255, 158, 0, 0.05) !important;
}

.autoInsurance .insuranceIcon {
    background: linear-gradient(135deg, #ff9e00, #ffaa00);
}

.homeInsurance {
    border-left: 4px solid #f72585;
    background-color: rgba(247, 37, 133, 0.05) !important;
}

.homeInsurance .insuranceIcon {
    background: linear-gradient(135deg, #f72585, #b5179e);
}

.travelInsurance {
    border-left: 4px solid #4cc9f0;
    background-color: rgba(76, 201, 240, 0.05) !important;
}

.travelInsurance .insuranceIcon {
    background: linear-gradient(135deg, #4cc9f0, #56cfe1);
}

.otherInsurance {
    border-left: 4px solid #6c757d;
    background-color: rgba(108, 117, 125, 0.05) !important;
}

.otherInsurance .insuranceIcon {
    background: linear-gradient(135deg, #6c757d, #adb5bd);
}

@media (max-width: 768px) {
    .insuranceHeader {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }

    .insuranceHeader h1 {
        font-size: 2rem;
    }

    #addInsuranceBtn {
        width: 100%;
        justify-content: center;
    }

    .insuranceSummaryCards {
        grid-template-columns: 1fr 1fr;
    }

    .insuranceListHeader {
        flex-direction: column;
        align-items: flex-start;
    }

    .insuranceListControls {
        width: 100%;
    }

    #insuranceSearch {
        min-width: 100%;
    }

    .insuranceItem {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }

    .insurancePremium {
        margin-left: 0;
        margin-top: 0.5rem;
    }

    .insuranceActions {
        align-self: flex-end;
    }

    .modalContent {
        margin: 10% auto;
        padding: 1.75rem;
        width: 90%;
    }
}

@media (max-width: 480px) {
    .insuranceSummaryCards {
        grid-template-columns: 1fr;
    }

    .insuranceAnalyticsSection,
    .insuranceListSection {
        padding: 1.25rem;
    }

    .modalContent {
        margin: 15% auto;
        padding: 1.5rem;
        width: 95%;
    }

    .formGroup input,
    .formGroup select,
    .formGroup textarea {
        padding: 0.8rem 1rem;
    }
}

@keyframes slideIn {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes pulse {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
    100% {
        transform: scale(1);
    }
}

@keyframes popIn {
    0% {
        opacity: 0;
        transform: scale(0.95) translateY(20px);
    }
    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

.floatingAddInsuranceBtn {
    display: none;
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, #4361ee, #3a0ca3);
    color: white;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    box-shadow: 0 6px 20px rgba(67, 97, 238, 0.4);
    z-index: 999;
    transition: all 0.3s;
    justify-content: center;
    align-items: center;
}

.floatingAddInsuranceBtn:hover {
    transform: translateY(-3px) scale(1.1);
    box-shadow: 0 8px 25px rgba(67, 97, 238, 0.5);
}

@media (max-width: 768px) {
    .floatingAddInsuranceBtn {
        display: flex;
    }

    #addInsuranceBtn {
        display: none;
    }
}


:root {
    --nwt-positive: #28a745;
    --nwt-negative: #dc3545;
    --nwt-primary: #4361ee;
    --nwt-secondary: #3f37c9;
    --nwt-light: #f8f9fa;
    --nwt-dark: #212529;
    --nwt-accent: #7209b7;
    --nwt-gradient: linear-gradient(135deg, var(--nwt-primary), var(--nwt-accent));
    --nwt-glass: rgba(255, 255, 255, 0.15);
    --nwt-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    --nwt-border-radius: 16px;
}

.nwt-body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f5f7fa;
    background-image: radial-gradient(circle at 10% 20%, rgba(67, 97, 238, 0.05) 0%, transparent 20%),
                      radial-gradient(circle at 90% 80%, rgba(220, 53, 69, 0.05) 0%, transparent 20%);
}

.nwt-dashboard-header {
    background: var(--nwt-gradient);
    color: white;
    border-radius: var(--nwt-border-radius);
    box-shadow: var(--nwt-shadow);
    padding: 2rem;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
    border: 1px solid var(--nwt-glass);
}

.nwt-dashboard-header::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, var(--nwt-glass) 0%, transparent 70%);
    animation: rotate 20s linear infinite;
    z-index: 0;
}

@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.nwt-net-worth-display {
    font-size: 4rem;
    font-weight: 800;
    margin: 20px 0;
    position: relative;
    text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    background: linear-gradient(to right, white, #f0f0f0);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    letter-spacing: -1px;
}

.nwt-positive {
    color: var(--nwt-positive);
    text-shadow: 0 2px 8px rgba(40, 167, 69, 0.3);
}

.nwt-negative {
    color: var(--nwt-negative);
    text-shadow: 0 2px 8px rgba(220, 53, 69, 0.3);
}

.nwt-card {
    border: none;
    border-radius: var(--nwt-border-radius);
    box-shadow: var(--nwt-shadow);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
    margin-bottom: 25px;
    background: white;
    overflow: hidden;
    position: relative;
    z-index: 1;
}

.nwt-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: var(--nwt-gradient);
}

.nwt-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 12px 28px rgba(0,0,0,0.15);
}

.nwt-card-header {
    background-color: white;
    border-bottom: none;
    font-weight: 700;
    border-radius: var(--nwt-border-radius) var(--nwt-border-radius) 0 0 !important;
    padding: 1.25rem 1.5rem;
    color: var(--nwt-dark);
    letter-spacing: 0.5px;
    position: relative;
}

.nwt-card-header::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 1.5rem;
    width: 50px;
    height: 3px;
    background: var(--nwt-primary);
    border-radius: 3px;
}

.nwt-progress-bar {
    background: var(--nwt-gradient);
    border-radius: 10px;
    height: 8px;
    box-shadow: 0 2px 4px rgba(67, 97, 238, 0.2);
}

.nwt-asset-item, .nwt-liability-item {
    padding: 15px 20px;
    border-left: 4px solid transparent;
    margin-bottom: 8px;
    background-color: white;
    border-radius: 12px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0,0,0,0.03);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.nwt-asset-item:hover, .nwt-liability-item:hover {
    transform: translateX(5px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
}

.nwt-asset-item {
    border-left-color: var(--nwt-positive);
    background: linear-gradient(to right, rgba(40, 167, 69, 0.05), white);
}

.nwt-liability-item {
    border-left-color: var(--nwt-negative);
    background: linear-gradient(to right, rgba(220, 53, 69, 0.05), white);
}

.nwt-time-period-selector .btn {
    border-radius: 20px;
    margin: 0 5px;
    padding: 8px 20px;
    font-weight: 500;
    transition: all 0.3s ease;
    border: 1px solid #dee2e6;
}

.nwt-time-period-selector .btn.active {
    background: var(--nwt-gradient);
    color: white;
    border-color: transparent;
    box-shadow: 0 4px 10px rgba(67, 97, 238, 0.3);
}

.nwt-tab-content {
    padding: 25px 0;
}

.nwt-add-item-btn {
    border-radius: 50%;
    width: 60px;
    height: 60px;
    position: fixed;
    bottom: 30px;
    right: 30px;
    font-size: 1.8rem;
    box-shadow: 0 6px 20px rgba(67, 97, 238, 0.3);
    background: var(--nwt-gradient);
    color: white;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 1000;
}

.nwt-add-item-btn:hover {
    transform: scale(1.1) rotate(90deg);
    box-shadow: 0 8px 25px rgba(67, 97, 238, 0.4);
}

.nwt-comparison-badge {
    background: linear-gradient(to right, #f8f9fa, #e9ecef);
    color: var(--nwt-dark);
    font-weight: 600;
    padding: 6px 15px;
    border-radius: 20px;
    font-size: 0.85rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.nwt-insight-card {
    background: white;
    border-radius: var(--nwt-border-radius);
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: var(--nwt-shadow);
    border-left: 5px solid var(--nwt-primary);
    transition: all 0.3s ease;
}

.nwt-insight-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}

.nwt-insight-icon {
    font-size: 1.8rem;
    margin-right: 15px;
    color: var(--nwt-primary);
    background: rgba(67, 97, 238, 0.1);
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.nwt-input-section {
    background: white;
    border-radius: var(--nwt-border-radius);
    padding: 25px;
    box-shadow: var(--nwt-shadow);
    margin-bottom: 25px;
    border: 1px solid rgba(0,0,0,0.05);
}

.nwt-form-group {
    margin-bottom: 20px;
    position: relative;
}

.nwt-form-group label {
    font-weight: 600;
    margin-bottom: 8px;
    display: block;
    color: var(--nwt-dark);
}

.nwt-form-group input, .nwt-form-group select {
    border-radius: 10px;
    padding: 12px 15px;
    border: 1px solid #dee2e6;
    transition: all 0.3s ease;
    width: 100%;
}

.nwt-form-group input:focus, .nwt-form-group select:focus {
    border-color: var(--nwt-primary);
    box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    outline: none;
}

#nwt-dashboardContainer {
    display: none;
    animation: fadeIn 0.5s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.nwt-age-group-selector {
    border-radius: 20px;
    overflow: hidden;
    border: 1px solid #dee2e6;
    display: inline-flex;
    background: #f8f9fa;
}

.nwt-age-group-selector .btn {
    border-radius: 0;
    border: none;
    padding: 8px 20px;
    font-weight: 500;
    transition: all 0.3s ease;
}

.nwt-age-group-selector .btn.active {
    background: var(--nwt-gradient);
    color: white;
    box-shadow: inset 0 4px 8px rgba(0,0,0,0.1);
}

/* Additional decorative elements */
.nwt-sparkle {
    position: absolute;
    width: 5px;
    height: 5px;
    background: white;
    border-radius: 50%;
    opacity: 0;
    animation: sparkle 2s infinite;
}

@keyframes sparkle {
    0% { transform: scale(0); opacity: 0; }
    50% { opacity: 0.8; }
    100% { transform: scale(1.5); opacity: 0; }
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .nwt-net-worth-display {
        font-size: 2.5rem;
    }
    
    .nwt-dashboard-header {
        padding: 1.5rem;
    }
    
    .nwt-card {
        margin-bottom: 15px;
    }
}
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Side Navigation -->
        <aside class="sidebar">
            <div class="logo">
                <img src="C:\xampp\htdocs\transactions\GiFinTrack.png"  class="app-logo" />
              </div>
              
            <nav class="nav-menu">
                <ul>
                    <li class="active">
                        <a href="#" data-page="dashboard">
                            <i class="fas fa-home"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="transactions">
                            <i class="fas fa-money-bill-wave"></i>
                            <span>Transactions</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="analytics">
                            <i class="fas fa-chart-pie"></i>
                            <span>Analytics</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="goals">
                            <i class="fas fa-bullseye"></i>
                            <span>Goals</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="budget">
                            <i class="fas fa-wallet"></i>
                            <span>Budget Planner</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="ai-advisor">
                            <i class="fas fa-brain"></i>
                            <span>AI Advisor</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="emergency">
                            <i class="fas fa-shield-alt"></i>
                            <span>Emergency Fund</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="taxestimator">
                            <i class="fas fa-calculator"></i>
                            <span>Tax Estimator</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-page="reports">
                            <i class="fas fa-file-alt"></i>
                            <span>Reports</span>
                        </a>
                    </li>
                       <li>
                        <a href="#" data-page="loanmanager">
                            <i class="fas fa-university"></i>
                            <span>Loan Manager</span>
                        </a>
                    </li>
                     <li>
                        <a href="#" data-page="subscriptiontracker">
                            <i class="fas fa-sync-alt"></i>
                            <span>Subscription Tracker</span>
                        </a>
                    </li>
                    <li>
                            <a href="#" data-page="insurancemanager">
                                <i class="fas fa-file-contract"></i>
                                <span>Insurance Manager</span>
                            </a>
                    </li>
                    <li>
                            <a href="#" data-page="networthcalculator">
                                <i class="fas fa-calculator"></i>
                                <span>Net Worth Calculator</span>
                            </a>
                    </li>
                    <li>
                       <a href="#" data-page="stocksandinvestments">
                            <i class="fas fa-chart-line"></i>
                            <span>Stocks & Investments</span>
                        </a>
                    </li>


                    <li>
                        <a href="#" data-page="settings">
                            <i class="fas fa-cog"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                    
                </ul>
            </nav>
            <div class="user-profile">
                <div class="avatar">
                    <img src="placeholder-user.jpg" alt="User">
                </div>
                <div class="user-info">
                    <span class="name">Sudharsan S</span>
                    <span class="email">sudharsan.saravanank@gmail.com</span>
                </div>
                <button class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </aside>

        <!-- Pages -->
        <!-- Dashboard Page -->
        <main class="main-content active" id="dashboard-page">
            <header class="header">
                <h2>Dashboard</h2>
                <div class="header-actions">
                   
                    <button class="add-transaction-btn">
                        <i class="fas fa-plus"></i> Add Transaction
                    </button>
                </div>
            </header>
            <div class="modal-overlay" id="transactionModal">
                <div class="modal">
                    <div class="modal-header">
                        <h3>Add New Transaction</h3>
                        <button class="close-modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form id="transactionForm" action="sumbit_transaction.php" method="POST">
                            <div class="form-group">
                                <label>Transaction Type</label>
                                <div class="transaction-type-tabs">
                                    <button type="button" class="type-tab active" data-type="income">Income</button>
                                    <button type="button" class="type-tab" data-type="expense">Expense</button>
                                </div>
                            </div>
        
                            <div class="form-group">
                                <label for="description">Description</label>
                                <input type="text" id="description" placeholder="Enter description" required>
                            </div>
        
                            <div class="form-group">
                                <label for="amount">Amount</label>
                                <div class="amount-input">
                                    <span>$</span>
                                    <input type="number" id="amount" step="0.01" placeholder="0.00" required>
                                </div>
                            </div>
        
                            <div class="form-group">
                                <label>Category</label>
                                <div class="category-options">
                                    <!-- Income Categories -->
                                    <div class="category-option" data-category="salary" data-type="income">
                                        <i class="fas fa-money-check"></i>
                                        Salary
                                    </div>
                                    <div class="category-option" data-category="freelance" data-type="income">
                                        <i class="fas fa-laptop-house"></i>
                                        Freelance
                                    </div>
                                    <div class="category-option" data-category="investment" data-type="income">
                                        <i class="fas fa-chart-line"></i>
                                        Investment
                                    </div>
        
                                    <!-- Expense Categories -->
                                    <div class="category-option" data-category="shopping" data-type="expense">
                                        <i class="fas fa-shopping-cart"></i>
                                        Shopping
                                    </div>
                                    <div class="category-option" data-category="food" data-type="expense">
                                        <i class="fas fa-utensils"></i>
                                        Food
                                    </div>
                                    <div class="category-option" data-category="transportation" data-type="expense">
                                        <i class="fas fa-bus"></i>
                                        Transportation
                                    </div>
                                    <div class="category-option" data-category="entertainment" data-type="expense">
                                        <i class="fas fa-gamepad"></i>
                                        Entertainment
                                    </div>
                                    <div class="category-option" data-category="housing" data-type="expense">
                                        <i class="fas fa-home"></i>
                                        Housing
                                    </div>
                                    <div class="category-option" data-category="health" data-type="expense">
                                        <i class="fas fa-heartbeat"></i>
                                        Health
                                    </div>
                                </div>
                                <input type="hidden" id="category" required>
                            </div>
        
                            <div class="form-group">
                                <label for="date">Date</label>
                                <input type="date" id="date" required>
                            </div>
        
                            <button type="submit" class="submit-btn">Add Transaction</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Summary Cards -->
            <section class="summary-cards">
                <div class="card balance-card">
                    <div class="card-icon">
                        <i class="fas fa-piggy-bank"></i>
                    </div>
                    <div class="card-info">
                        <h3>Total Balance</h3>
                        <p>$5,430.50</p>
                    </div>
                </div>
                <div class="card income-card">
                    <div class="card-icon">
                        <i class="fas fa-arrow-down"></i>
                    </div>
                    <div class="card-info">
                        <h3>Income</h3>
                        <p>$3,200.00</p>
                    </div>
                </div>
                <div class="card expense-card">
                    <div class="card-icon">
                        <i class="fas fa-arrow-up"></i>
                    </div>
                    <div class="card-info">
                        <h3>Expenses</h3>
                        <p>$1,769.50</p>
                    </div>
                </div>
                <div class="card savings-card">
                    <div class="card-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <div class="card-info">
                        <h3>Savings Goal</h3>
                        <p>65%</p>
                    </div>
                </div>
            </section>

            <!-- Charts Section -->
            <section class="charts-section">
                <div class="spending-chart">
                    <div class="section-header">
                        <h3>Monthly Spending</h3>
                        <select class="month-selector">
                            <option>May 2023</option>
                            <option>April 2023</option>
                            <option>March 2023</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <canvas id="monthlyChart"></canvas>
                    </div>
                </div>
                <div class="category-chart">
                    <div class="section-header">
                        <h3>Spending by Category</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="categoryChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Recent Transactions -->
            <section class="recent-transactions">
                <div class="section-header">
                    <h3>Recent Transactions</h3>
                    <a href="#" class="view-all">View All</a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Description</th>
                            <th>Category</th>
                            <th>Date</th>
                            <th>Amount</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Transaction rows from original code -->
                    </tbody>
                </table>
            </section>
        </main>

        <!-- Transactions Page -->
        <main class="main-content" id="transactions-page">
            <header class="header">
              <h2>Transactions</h2>
              <div class="header-actions">
                <div class="search-bar">
                  <i class="fas fa-search"></i>
                  <input type="text" id="searchInput" placeholder="Search transactions..." />
                </div>
                
              </div>
            </header>
          
            <div class="transactions-list">
              <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                <h3>All Transactions</h3>
                <div class="filters" style="display: flex; gap: 10px; align-items: center;">
                  <select class="category-filter">
                    <option>All Categories</option>
                    <option>salary</option>
                    <option>freelance</option>
                    <option>investment</option>
                    <option>shopping</option>
                    <option>food</option>
                    <option>transportation</option>
                    <option>entertainment</option>
                    <option>housing</option>
                    <option>health</option>
                  </select>
                  <input type="date" class="date-filter" />
                  <button class="apply-filters-btn" style="
                    padding: 0.5rem 1rem;
                    background-color: var(--primary-color);
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-family: 'Poppins', sans-serif;
                    cursor: pointer;
                  ">Proceed</button>
                </div>
              </div>
          
              <table>
                <thead>
                  <tr>
                    <th>Description</th>
                    <th>Category</th>
                    <th>Date</th>
                    <th>Amount</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody></tbody> <!-- Filled via JS -->
              </table>
            </div>
          </main>
          

        <!-- Analytics Page -->
        <main class="main-content" id="analytics-page">
            <header class="header">
                <h2>Analytics</h2>
                <div class="header-actions">
                    <select class="year-selector">
                        <option>2023</option>
                        <option>2022</option>
                    </select>
                </div>
            </header>
        
            <div class="summary-cards">
                <div class="card">
                    <div class="card-icon" style="background-color: var(--income-color);">
                        <i class="fas fa-arrow-down"></i>
                    </div>
                    <div class="card-info">
                        <h3>Total Income</h3>
                        <p id="total-income">$0.00</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon" style="background-color: var(--expense-color);">
                        <i class="fas fa-arrow-up"></i>
                    </div>
                    <div class="card-info">
                        <h3>Total Expense</h3>
                        <p id="total-expense">$0.00</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon" style="background-color: var(--primary-color);">
                        <i class="fas fa-piggy-bank"></i>
                    </div>
                    <div class="card-info">
                        <h3>Net Savings</h3>
                        <p id="net-savings">$0.00</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon" style="background-color: var(--success-color);">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="card-info">
                        <h3>Best Saving Month</h3>
                        <p id="best-saving-month">-</p>
                    </div>
                </div>
            </div>
        
            <div class="charts-section">
                <div class="spending-chart">
                    <div class="section-header">
                        <h3>Income vs Expense</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="incomeExpenseChart"></canvas>
                    </div>
                </div>
                <div class="category-chart">
                    <div class="section-header">
                        <h3>Top 5 Spending Categories</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="topCategoriesChart"></canvas>
                    </div>
                </div>
            </div>
        
            <div class="charts-section">
                <div class="spending-chart">
                    <div class="section-header">
                        <h3>Monthly Income & Expense Trend</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="monthlyTrendChart"></canvas>
                    </div>
                </div>
                <div class="category-chart">
                    <div class="section-header">
                        <h3>Worst Spending Month</h3>
                    </div>
                    <div class="card" style="box-shadow: none; border: 1px solid var(--light-gray);">
                        <div class="card-info">
                            <h3 id="worst-month-name">-</h3>
                            <p id="worst-month-amount">$0.00</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
          

        <!-- Goals Page -->
        <main class="main-content" id="goals-page">
            <!-- All goal content wrapped in layout -->
            <div class="goal-layout">
              <!-- Title and Add Button -->
              <div class="goal-header-row">
                <h2>Financial Goals</h2>
                <button class="add-goal-btn" onclick="openModal()">+ Add Goal</button>
              </div>
          
              <!-- Goal Cards -->
              <div class="goals-container" id="goals-container">
                <!-- JS will inject goal cards here -->
              </div>
          
              <!-- Completed Goals Section -->
              <div class="completed-goals" id="completed-goals-section">
                <h3>Completed Goals</h3>
                <ul id="goal-history-list"></ul>
              </div>
          
              <!-- Summary Section -->
              <div class="goal-summary" id="goal-summary">
                <h3>Summary Section</h3>
                <div>Total Saved: â‚¹<span id="summary-total">0</span></div>
                <div>Top Goal: <span id="summary-top">None</span></div>
                <div>Completed: <span id="summary-complete">0</span></div>
              </div>
            </div>
          </main>
          
          <!-- âœ… Completion Popup (outside <main>) -->
          <div id="completion-popup" class="completion-popup">
            <div class="popup-content">
              ðŸŽ‰ <strong>Goal Completed!</strong><br>Your hard work paid off.
            </div>
          </div>
          
          <!-- âœ… Modal for Adding Goal -->
          <div id="goal-modal" class="goal-modal">
            <div class="goal-modal-content">
              <span class="close" onclick="closeModal()">&times;</span>
              <h3>Add New Goal</h3>
              <form id="goal-form">
                <label>Goal Title</label>
                <input type="text" id="goal-title" required />
          
                <label>Target Amount</label>
                <input type="number" id="goal-target" required />
          
                <label>Saved Amount</label>
                <input type="number" id="goal-saved" required />
          
                <label>Target Date</label>
                <input type="date" id="goal-date" required />
          
                <label for="goal-priority">Priority</label>
                <select id="goal-priority" required>
                  <option value="High">High</option>
                  <option value="Medium" selected>Medium</option>
                  <option value="Low">Low</option>
                </select>
          
                <label for="goal-tag">Category</label>
                <select id="goal-tag">
                  <option value="None">None</option>
                  <option value="Travel">âœˆï¸ Travel</option>
                  <option value="Work">ðŸ’¼ Work</option>
                  <option value="Home">ðŸ  Home</option>
                  <option value="Emergency">ðŸš¨ Emergency</option>
                </select>
          
                <label for="goal-note">Note</label>
                <textarea
                  id="goal-note"
                  placeholder="e.g., Saving for family trip, plan to add â‚¹5,000 every month"
                ></textarea>
          
                <button type="submit" class="submit-goal-btn">Save Goal</button>
              </form>
            </div>
          </div>
        </main>

          <!-- budget planner Page -->

<!-- âœ… Main Budget Planner Section -->
<main class="main-content" id="budget-page">
    <section id="budget-planner-page" class="page-section">
      <div class="budget-wrapper">
        <div class="budget-header">
          <h2>ðŸ’° Budget Planner</h2>
          <button class="add-budget-btn" onclick="openBudgetModal()">+ Add Entry</button>
        </div>
        <div class="budget-summary">
          <span><strong>Total Income:</strong> â‚¹<span id="total-income">0</span></span>
          <span><strong>Total Expenses:</strong> â‚¹<span id="total-expenses">0</span></span>
          <span><strong>Balance:</strong> â‚¹<span id="net-balance">0</span></span>
        </div>
        <div class="budget-entries" id="budget-entries">
          <!-- Budget entries will appear here -->
        </div>
      </div>
    </section>
  </main>
  
  <!-- âœ… Modal: Keep OUTSIDE <main>, near bottom of body -->
  <div class="budget-modal" id="budget-modal" style="display:none;">
    <div class="budget-modal-content">
      <span class="close" onclick="closeBudgetModal()">&times;</span>
      <h3>Add Budget Entry</h3>
      <form id="budget-form">
        <label>Type</label>
        <select id="entry-type" required>
          <option value="income">Income</option>
          <option value="expense">Expense</option>
        </select>
  
        <label>Category</label>
        <select id="entry-category" required>
          <option value="Salary">Salary</option>
          <option value="Freelance">Freelance</option>
          <option value="Investment">Investment</option>
          <option value="Shopping">Shopping</option>
          <option value="Food">Food</option>
          <option value="Transportation">Transportation</option>
          <option value="Entertainment">Entertainment</option>
          <option value="Housing">Housing</option>
          <option value="Health">Health</option>
          <option value="Others">Others</option>
        </select>
  
        <label>Amount</label>
        <input type="number" id="entry-amount" required />
  
        <label>Note</label>
        <textarea id="entry-note" placeholder="Optional note..."></textarea>
  
        <button type="submit">Add Entry</button>
      </form>
    </div>
  </div>
  
  <!-- âœ… Entry Confirmation Popup -->
  <div id="budget-popup" class="completion-popup" style="display:none;">
    ðŸŽ‰ Budget entry added successfully!
  </div>
  
  <!-- AI page -->

  <main class="main-content" id="ai-advisor-page" style="display: none;">
    <header class="header">
        <h2>ðŸ¤– AI Advisor Dashboard</h2>
    </header>

    <section class="ai-analytics">
        <div class="ai-card">
            <h3>Summary</h3>
            <p id="ai-summary">Loading summary...</p>
        </div>

        <div class="ai-card">
            <h3>Top Insights</h3>
            <p id="ai-insights">Analyzing insights...</p>
        </div>

        <div class="ai-card">
            <h3>Personalized AI Advice</h3>
            <p id="ai-advice-text">Thinking...</p>
        </div>
    </section>
</main>



 <!-- Emergency fund Page -->
 <main class="main-content" id="emergency-page">
    <div id="emergency" class="page-section">
      <div class="header">
        <h2>Emergency Fund Planner</h2>
      </div>
      
      <div class="emergency-container">
        <!-- Left Column -->
        <div class="emergency-left">
          <!-- Emergency Fund Overview -->
          <div class="emergency-card">
            <div class="emergency-card-header">
              <h3>Emergency Fund Planner</h3>
            </div>
            
            <p>Build your financial safety net to cover unexpected expenses or income loss.</p>
            
            <div class="progress-container">
              <div class="progress-labels">
                <span>Progress</span>
                <span id="progress-percentage">0%</span>
              </div>
              
              <div class="progress-bar-bg">
                <div id="progress-bar" class="progress-bar-fill" style="width: 0%"></div>
              </div>
              
              <div class="progress-scale">
                <span>0</span>
                <span id="goal-amount-display">â‚¹100,000</span>
              </div>
            </div>
            
            <div class="stats-grid">
              <div class="stat-card">
                <p>Current Balance</p>
                <p id="current-balance">â‚¹0</p>
              </div>
              <div class="stat-card">
                <p>Months Covered</p>
                <p id="months-covered">0</p>
              </div>
              <div class="stat-card">
                <p>Goal</p>
                <p id="goal-display">â‚¹100,000</p>
              </div>
            </div>
          </div>
          
          <!-- Set Goal & Monthly Expenses -->
          <div class="emergency-card">
            <h3>Configure Your Fund</h3>
            
            <div class="form-group">
              <label for="fund-goal">Emergency Fund Goal</label>
              <input type="number" id="fund-goal" placeholder="100000" value="100000">
              <p class="hint">Recommended: 3-6 months of expenses</p>
            </div>
            
            <div class="form-group">
              <label for="monthly-expenses">Average Monthly Expenses</label>
              <input type="number" id="monthly-expenses" placeholder="20000" value="20000">
            </div>
            
            <div class="form-group">
              <label for="current-savings">Current Savings</label>
              <input type="number" id="current-savings" placeholder="0" value="0">
            </div>
            
            <button id="update-goals" class="submit-btn">Update Goals</button>
          </div>
        </div>
        
        <!-- Right Column -->
        <div class="emergency-right">
          <!-- Add/Withdraw Funds -->
          <div class="emergency-card">
            <h3>Manage Your Fund</h3>
            
            <div class="form-row">
              <div class="form-group">
                <label for="transaction-amount">Amount</label>
                <input type="number" id="transaction-amount" placeholder="5000">
              </div>
              
              <div class="form-group">
                <label for="transaction-date">Date</label>
                <input type="date" id="transaction-date">
              </div>
            </div>
            
            <div class="form-group">
              <label for="transaction-notes">Notes (Optional)</label>
              <input type="text" id="transaction-notes" placeholder="e.g., Bonus from work">
            </div>
            
            <div class="action-buttons">
              <button id="add-funds" class="btn-income">Add Funds</button>
              <button id="withdraw-funds" class="btn-expense">Withdraw</button>
            </div>
          </div>
          
          <!-- Transaction History -->
          <div class="emergency-card">
            <div class="section-header">
              <h3>Transaction History</h3>
              
            </div>
            
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Type</th>
                    <th>Amount</th>
                    <th>Notes</th>
                  </tr>
                </thead>
                <tbody id="transaction-history">
                  <tr>
                    <td colspan="4">No transactions yet</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

    <!--Tax page-->
<main class="main-content" id="taxestimator-page" style="display: none;">


    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="mb-10">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                   
                    <h1 class="text-3xl font-bold text-gray-800"> <span class="text-gray-400">Tax Estimator</span></h1>
                </div>
                
            </div>
            <p class="text-gray-600 mt-2">Estimate your annual income tax liability based on your income sources and deductions</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column - Input Sections -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Income Section -->
                <div class="bg-white rounded-xl shadow-md p-6 slide-in">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-semibold text-gray-800">
                            <i class="fas fa-wallet text-indigo-500 mr-2"></i> Income Details
                        </h2>
                        <span class="text-sm text-gray-500">All amounts in â‚¹</span>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="salary" class="block text-sm font-medium text-gray-700 mb-1">Salary Income</label>
                                <div class="relative">
                                    <input type="number" id="salary" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="0">
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                        <span class="text-gray-500">â‚¹</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="freelance" class="block text-sm font-medium text-gray-700 mb-1">Freelancing Income</label>
                                <div class="relative">
                                    <input type="number" id="freelance" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="0">
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                        <span class="text-gray-500">â‚¹</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="interest" class="block text-sm font-medium text-gray-700 mb-1">Interest Income</label>
                                <div class="relative">
                                    <input type="number" id="interest" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="0">
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                        <span class="text-gray-500">â‚¹</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="capital-gains" class="block text-sm font-medium text-gray-700 mb-1">Capital Gains</label>
                                <div class="relative">
                                    <input type="number" id="capital-gains" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="0">
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                        <span class="text-gray-500">â‚¹</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <label for="other-income" class="block text-sm font-medium text-gray-700 mb-1">Other Income</label>
                            <div class="relative">
                                <input type="number" id="other-income" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="0">
                                <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                    <span class="text-gray-500">â‚¹</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Deductions Section -->
                <div class="bg-white rounded-xl shadow-md p-6 slide-in" style="animation-delay: 0.1s;">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-semibold text-gray-800">
                            <i class="fas fa-percentage text-indigo-500 mr-2"></i> Deductions
                        </h2>
                        <span class="text-sm text-gray-500">Maximize your savings</span>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="80c" class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                                    Section 80C (Max â‚¹1.5L)
                                    <div class="tooltip ml-1 relative">
                                        <i class="fas fa-info-circle text-gray-400 hover:text-gray-600 cursor-pointer"></i>
                                        <div class="tooltip-text absolute z-10 invisible opacity-0 bg-gray-800 text-white text-xs rounded py-1 px-2 -mt-8 -ml-16 w-40 transition-all duration-300">
                                            PPF, ELSS, LIC, NSC, etc.
                                        </div>
                                    </div>
                                </label>
                                <div class="relative">
                                    <input type="number" id="80c" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="0" max="150000">
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                        <span class="text-gray-500">â‚¹</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="80d" class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                                    Section 80D (Health Insurance)
                                    <div class="tooltip ml-1 relative">
                                        <i class="fas fa-info-circle text-gray-400 hover:text-gray-600 cursor-pointer"></i>
                                        <div class="tooltip-text absolute z-10 invisible opacity-0 bg-gray-800 text-white text-xs rounded py-1 px-2 -mt-8 -ml-16 w-40 transition-all duration-300">
                                            â‚¹25k (self), â‚¹50k (senior citizens)
                                        </div>
                                    </div>
                                </label>
                                <div class="relative">
                                    <input type="number" id="80d" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="0">
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                        <span class="text-gray-500">â‚¹</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="80tta" class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                                    Section 80TTA (Savings Interest)
                                    <div class="tooltip ml-1 relative">
                                        <i class="fas fa-info-circle text-gray-400 hover:text-gray-600 cursor-pointer"></i>
                                        <div class="tooltip-text absolute z-10 invisible opacity-0 bg-gray-800 text-white text-xs rounded py-1 px-2 -mt-8 -ml-16 w-40 transition-all duration-300">
                                            Max â‚¹10,000 on savings account interest
                                        </div>
                                    </div>
                                </label>
                                <div class="relative">
                                    <input type="number" id="80tta" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="0" max="10000">
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                        <span class="text-gray-500">â‚¹</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="hra" class="block text-sm font-medium text-gray-700 mb-1 flex items-center">
                                    HRA Exemption
                                    <div class="tooltip ml-1 relative">
                                        <i class="fas fa-info-circle text-gray-400 hover:text-gray-600 cursor-pointer"></i>
                                        <div class="tooltip-text absolute z-10 invisible opacity-0 bg-gray-800 text-white text-xs rounded py-1 px-2 -mt-8 -ml-16 w-40 transition-all duration-300">
                                            Least of actual HRA, rent paid, or 50%/40% of salary
                                        </div>
                                    </div>
                                </label>
                                <div class="relative">
                                    <input type="number" id="hra" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="0">
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                        <span class="text-gray-500">â‚¹</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <label for="other-deductions" class="block text-sm font-medium text-gray-700 mb-1">Other Deductions</label>
                            <div class="relative">
                                <input type="number" id="other-deductions" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="0">
                                <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                    <span class="text-gray-500">â‚¹</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tax Regime Selector -->
                <div class="bg-white rounded-xl shadow-md p-6 slide-in" style="animation-delay: 0.2s;">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">
                        <i class="fas fa-balance-scale text-indigo-500 mr-2"></i> Tax Regime
                    </h2>
                    
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0">
                        <div class="flex-1">
                            <div class="flex items-center">
                                <span class="mr-3 text-sm font-medium text-gray-900">Old Regime</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="regime-toggle" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                                    <span class="ml-3 text-sm font-medium text-gray-900">New Regime</span>
                                </label>
                            </div>
                            <p class="text-sm text-gray-500 mt-2" id="regime-description">
                                Old regime allows all deductions but has higher tax rates. Choose based on your investment profile.
                            </p>
                        </div>
                        
                        <button id="compare-btn" class="px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors">
                            <i class="fas fa-chart-bar mr-2"></i> Compare Regimes
                        </button>
                    </div>
                    
                    <!-- Tax Slabs Table (Hidden by default) -->
                    <div id="slabs-container" class="mt-6 hidden">
                        <h3 class="font-medium text-gray-800 mb-2">Applicable Tax Slabs</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Income Range</th>
                                        <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tax Rate</th>
                                        <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Your Tax</th>
                                    </tr>
                                </thead>
                                <tbody id="slabs-body" class="bg-white divide-y divide-gray-200">
                                    <!-- Will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Results -->
            <div class="lg:col-span-1 space-y-8">
                <!-- Summary Card -->
                <div class="bg-white rounded-xl shadow-md p-6 slide-in" style="animation-delay: 0.3s;">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-semibold text-gray-800">
                            <i class="fas fa-file-invoice-dollar text-indigo-500 mr-2"></i> Tax Summary
                        </h2>
                        <button id="calculate-btn" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                            Calculate <i class="fas fa-calculator ml-1"></i>
                        </button>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex justify-between items-center py-2 border-b border-gray-100">
                            <span class="text-gray-600">Gross Income:</span>
                            <span id="gross-income" class="font-medium">â‚¹0</span>
                        </div>
                        <div class="flex justify-between items-center py-2 border-b border-gray-100">
                            <span class="text-gray-600">Total Deductions:</span>
                            <span id="total-deductions" class="font-medium text-green-600">â‚¹0</span>
                        </div>
                        <div class="flex justify-between items-center py-2 border-b border-gray-100">
                            <span class="text-gray-600">Taxable Income:</span>
                            <span id="taxable-income" class="font-medium">â‚¹0</span>
                        </div>
                        <div class="flex justify-between items-center py-2 border-b border-gray-200">
                            <span class="text-gray-600">Tax Liability:</span>
                            <span id="tax-liability" class="font-bold text-indigo-600 text-lg">â‚¹0</span>
                        </div>
                        <div class="flex justify-between items-center py-2">
                            <span class="text-gray-600">Effective Tax Rate:</span>
                            <span id="effective-rate" class="font-medium">0%</span>
                        </div>
                    </div>
                    
                    <!-- Chart -->
                    <div class="mt-6">
                        <canvas id="taxChart" height="200"></canvas>
                    </div>
                    
                    <!-- Tax Saving Tips -->
                    <div id="tax-tips" class="mt-6 hidden">
                        <h3 class="font-medium text-gray-800 mb-2 flex items-center">
                            <i class="fas fa-lightbulb text-yellow-500 mr-2"></i> Tax Saving Tips
                        </h3>
                        <ul class="space-y-2 text-sm text-gray-700">
                            <li class="flex items-start">
                                <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                                <span>Consider investing more in Section 80C to maximize deductions up to â‚¹1.5 lakh</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                                <span>Health insurance premium of â‚¹25,000 could save you â‚¹7,500 in taxes</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                                <span>Don't forget to claim HRA exemption if you're paying rent</span>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="bg-white rounded-xl shadow-md p-6 slide-in" style="animation-delay: 0.4s;">
                    <div class="space-y-3">
                        <button id="export-pdf" class="w-full flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fas fa-file-pdf mr-2 text-red-500"></i> Export as PDF
                        </button>
                        <button id="export-csv" class="w-full flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fas fa-file-csv mr-2 text-green-500"></i> Export as CSV
                        </button>
                        <button id="save-plan" class="w-full flex items-center justify-center px-4 py-3 bg-indigo-100 text-indigo-800 rounded-lg hover:bg-indigo-200 transition-colors">
                            <i class="fas fa-save mr-2"></i> Save Tax Plan
                        </button>
                    </div>
                </div>
                
                <!-- Quick Links -->
              
            </div>
        </div>
    </div>

    <!-- Comparison Modal -->
    <div id="comparison-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold text-gray-800">Tax Regime Comparison</h3>
                <button id="close-modal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-indigo-50 p-4 rounded-lg">
                    <h4 class="font-medium text-indigo-800 mb-3">Old Regime</h4>
                    <ul class="space-y-2 text-sm text-gray-700">
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                            <span>Allows all deductions (80C, 80D, HRA, etc.)</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                            <span>Standard Deduction of â‚¹50,000</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-times-circle text-red-500 mt-1 mr-2"></i>
                            <span>Higher tax rates (up to 30%)</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-info-circle text-blue-500 mt-1 mr-2"></i>
                            <span>Better for those with significant investments/deductions</span>
                        </li>
                    </ul>
                    <div class="mt-4 pt-3 border-t border-indigo-100">
                        <div class="flex justify-between">
                            <span class="font-medium">Estimated Tax:</span>
                            <span id="old-regime-tax" class="font-bold">â‚¹0</span>
                        </div>
                    </div>
                </div>
                
                <div class="bg-purple-50 p-4 rounded-lg">
                    <h4 class="font-medium text-purple-800 mb-3">New Regime</h4>
                    <ul class="space-y-2 text-sm text-gray-700">
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                            <span>Lower tax rates (up to 25%)</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                            <span>Simplified tax structure</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-times-circle text-red-500 mt-1 mr-2"></i>
                            <span>No deductions except Standard Deduction</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-info-circle text-blue-500 mt-1 mr-2"></i>
                            <span>Better for those with minimal investments/deductions</span>
                        </li>
                    </ul>
                    <div class="mt-4 pt-3 border-t border-purple-100">
                        <div class="flex justify-between">
                            <span class="font-medium">Estimated Tax:</span>
                            <span id="new-regime-tax" class="font-bold">â‚¹0</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mt-6">
                <h4 class="font-medium text-gray-800 mb-2">Recommendation</h4>
                <p id="regime-recommendation" class="text-sm text-gray-700 bg-yellow-50 p-3 rounded-lg">
                    Based on your inputs, the <span class="font-medium">Old Regime</span> would save you approximately <span class="font-medium">â‚¹12,500</span> more than the New Regime.
                </p>
            </div>
            
            <div class="mt-6 flex justify-end">
                <button id="apply-recommendation" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                    Apply Recommendation
                </button>
            </div>
        </div>
    </div>
    </main>

            <!-- Reports Page -->
         
            <main class="main-content" id="reports-page" style="display: none;"> 
                <div id="reports-page" class="page-section">
                <h2>ðŸ“Š Reports</h2>
                
                <div class="filter-section">
                    <label>Category:</label>
                    <select id="report-category-filter">
                        <option value="all">All</option>
                        <option value="income">Income</option>
                        <option value="expense">Expense</option>
                        <option value="salary">Salary</option>
                        <option value="freelance">Freelance</option>
                        <option value="investment">Investment</option>
                        <option value="food">Food</option>
                        <option value="shopping">Shopping</option>
                        <option value="health">Health</option>
                        <option value="housing">Housing</option>
                        <option value="entertainment">Entertainment</option>
                        <option value="transportation">Transportation</option>
                    </select>
            
                    <label>Date:</label>
                    <input type="month" id="report-date-filter">
            
                    <button id="apply-report-filter">Apply Filter</button>
                </div>
            
                <div class="report-summary">
                    <p id="report-summary-text">Showing all transactions...</p>
                </div>
            
                <div class="report-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Category</th>
                                <th>Description</th>
                                <th>Type</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody id="report-table-body">
                            <!-- Report rows go here -->
                        </tbody>
                    </table>
                </div>
            
                <button id="download-report-btn">Download Report</button>
            </div>
</main>

<main class="main-content" id="loanmanager-page">
    <div class="loan-manager-container">
        <!-- Loan Form Section -->
        <section class="loan-form-section">
            <h2>Add New Loan</h2>
            <form id="loan-form">
                <div class="form-group">
                    <label for="loan-name">Loan Name</label>
                    <input type="text" id="loan-name" placeholder="e.g., Car Loan, Mortgage" required>
                </div>
                <div class="form-group">
                    <label for="loan-type">Loan Type</label>
                    <select id="loan-type" required>
                        <option value="">Select loan type</option>
                        <option value="mortgage">Mortgage</option>
                        <option value="auto">Auto Loan</option>
                        <option value="personal">Personal Loan</option>
                        <option value="student">Student Loan</option>
                        <option value="credit-card">Credit Card</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="loan-amount">Loan Amount</label>
                    <input type="number" id="loan-amount" placeholder="e.g., 25000" required>
                </div>
                
                <div class="form-group">
                    <label for="interest-rate">Interest Rate (%)</label>
                    <input type="number" id="interest-rate" step="0.01" placeholder="e.g., 5.5" required>
                </div>
                
                <div class="form-group">
                    <label for="loan-term">Loan Term (months)</label>
                    <input type="number" id="loan-term" placeholder="e.g., 60 (5 years)" required>
                </div>
                
                <div class="form-group">
                    <label for="start-date">Start Date</label>
                    <input type="date" id="start-date" required>
                </div>
                
                <div class="form-group">
                    <label for="payment-frequency">Payment Frequency</label>
                    <select id="payment-frequency" required>
                        <option value="monthly">Monthly</option>
                        <option value="bi-weekly">Bi-weekly</option>
                        <option value="weekly">Weekly</option>
                    </select>
                </div>
                
                <button type="submit" class="btn-add-loan">Add Loan</button>
            </form>
            
            <!-- Loan Comparison Calculator -->
            <div class="loan-comparison">
                <h3>Compare Loan Options</h3>
                <div class="comparison-inputs">
                    <div>
                        <label>Option 1 Amount</label>
                        <input type="number" id="compare-amount1" placeholder="25000">
                    </div>
                    <div>
                        <label>Rate (%)</label>
                        <input type="number" id="compare-rate1" step="0.01" placeholder="5.5">
                    </div>
                    <div>
                        <label>Term (months)</label>
                        <input type="number" id="compare-term1" placeholder="60">
                    </div>
                </div>
                
                <div class="comparison-inputs">
                    <div>
                        <label>Option 2 Amount</label>
                        <input type="number" id="compare-amount2" placeholder="25000">
                    </div>
                    <div>
                        <label>Rate (%)</label>
                        <input type="number" id="compare-rate2" step="0.01" placeholder="4.5">
                    </div>
                    <div>
                        <label>Term (months)</label>
                        <input type="number" id="compare-term2" placeholder="48">
                    </div>
                </div>
                
                <button id="compare-loans-btn" class="btn-add-loan">Compare Loans</button>
                <div id="comparison-results"></div>
            </div>
        </section>
        
        <!-- Loan Stats Section -->
        <section class="loan-stats-section">
            <div class="stats-card">
                <h3>Total Loans</h3>
                <p id="total-loans">0</p>
            </div>
            <div class="stats-card">
                <h3>Total Owed</h3>
                <p id="total-owed">â‚¹0</p>
            </div>
            <div class="stats-card">
                <h3>Total Interest</h3>
                <p id="total-interest">â‚¹0</p>
            </div>
            
            <!-- Loan Progress Chart -->
            <div class="stats-card chart-card">
                <h3>Loan Distribution</h3>
                <canvas id="loan-distribution-chart"></canvas>
            </div>
            
            <!-- Interest vs Principal Chart -->
            <div class="stats-card chart-card">
                <h3>Interest vs Principal</h3>
                <canvas id="interest-principal-chart"></canvas>
            </div>
        </section>
        
        <!-- Loans List Section -->
        <section class="loans-list-section">
            <h2>Your Loans</h2>
            <div id="loans-list">
                <div class="empty-message">No loans added yet. Add your first loan above.</div>
            </div>
        </section>
        
        <!-- Payment Overview Section -->
        <section class="payment-overview-section">
            <h2>Payment Overview</h2>
            
            <div class="time-period-toggle">
                <button class="active" data-period="monthly">Monthly</button>
                <button data-period="yearly">Yearly</button>
                <button data-period="total">Total</button>
            </div>
            
            <div class="outstanding-balance">
                <h3>Outstanding Balance</h3>
                <div class="balance-details">
                    <div>
                        <span>Principal Remaining:</span>
                        <span id="principal-remaining">â‚¹0</span>
                    </div>
                    <div>
                        <span>Interest Remaining:</span>
                        <span id="interest-remaining">â‚¹0</span>
                    </div>
                    <div>
                        <span>Total Remaining:</span>
                        <span id="total-remaining">â‚¹0</span>
                    </div>
                </div>
            </div>
            
            <div class="payment-history">
                <h3>Recent Payments</h3>
                <table id="payment-history-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Amount</th>
                            <th>Loan</th>
                            <th>Type</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="4">No payments recorded yet</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
        
        <!-- Amortization Section -->
        <section class="amortization-section">
            <h2>Amortization Schedule</h2>
            <p>Select a loan to view its payment schedule</p>
            <div class="amortization-table-container">
                <table id="amortization-table">
                    <thead>
                        <tr>
                            <th>Payment #</th>
                            <th>Date</th>
                            <th>Payment</th>
                            <th>Principal</th>
                            <th>Interest</th>
                            <th>Balance</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="6" class="no-loan-selected">No loan selected</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </div>
    
    <!-- Payment Modal -->
    <div id="payment-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Record Payment</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="payment-form">
                    <div class="form-group">
                        <label for="payment-loan">Loan</label>
                        <select id="payment-loan" required>
                            <option value="">Select loan</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="payment-amount">Amount</label>
                        <input type="number" id="payment-amount" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="payment-date">Date</label>
                        <input type="date" id="payment-date" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="payment-type">Payment Type</label>
                        <select id="payment-type" required>
                            <option value="regular">Regular Payment</option>
                            <option value="extra">Extra Payment</option>
                            <option value="late">Late Payment</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="payment-notes">Notes</label>
                        <textarea id="payment-notes" placeholder="Optional notes"></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn">Record Payment</button>
                </form>
            </div>
        </div>
    </div>
</main>
</main>
       
<!-- Subscription Tracker Page -->
     <main class="main-content" id="subscriptiontracker-page">
        <div class="subscription-header">
            <h1>Subscription Tracker</h1>
            <button id="add-subscription-btn" class="btn-primary">+ Add Subscription</button>
        </div>

        <div class="subscription-container">
            <!-- Summary Cards -->
            <div class="summary-cards">
                <div class="summary-card">
                    <h3>Active Subscriptions</h3>
                    <p id="active-count">0</p>
                </div>
                <div class="summary-card">
                    <h3>Monthly Cost</h3>
                    <p id="monthly-cost">â‚¹0</p>
                </div>
                <div class="summary-card">
                    <h3>Yearly Cost</h3>
                    <p id="yearly-cost">â‚¹0</p>
                </div>
                <div class="summary-card">
                    <h3>Health Score</h3>
                    <p id="health-score">0/100</p>
                </div>
            </div>

            <!-- Calendar View -->
            <div class="calendar-section">
                <h2>Upcoming Payments</h2>
                <div id="subscription-calendar"></div>
            </div>

            <!-- Subscription List and Analytics -->
            <div class="subscription-content">
                <!-- Subscription List -->
                <div class="subscription-list-section">
                    <div class="list-header">
                        <h2>Your Subscriptions</h2>
                        <div class="list-controls">
                            <input type="text" id="subscription-search" placeholder="Search subscriptions...">
                            <select id="category-filter">
                                <option value="all">All Categories</option>
                                <option value="streaming">Streaming</option>
                                <option value="fitness">Fitness</option>
                                <option value="utility">Utility</option>
                                <option value="membership">Membership</option>
                                <option value="software">Software</option>
                                <option value="other">Other</option>
                            </select>
                            <select id="sort-by">
                                <option value="name">Sort by Name</option>
                                <option value="cost">Sort by Cost</option>
                                <option value="date">Sort by Next Billing</option>
                            </select>
                        </div>
                    </div>
                    <div class="subscription-list" id="subscription-list">
                        <!-- Subscriptions will be loaded here -->
                    </div>
                </div>

                <!-- Analytics -->
                <div class="analytics-section">
                    <h2>Subscription Analytics</h2>
                    <div class="analytics-charts">
                        <div class="chart-container">
                            <h3>Spending by Category</h3>
                            <canvas id="category-chart"></canvas>
                        </div>
                        <div class="chart-container">
                            <h3>Monthly Trend</h3>
                            <canvas id="trend-chart"></canvas>
                        </div>
                    </div>
                  
                </div>
            </div>
        </div>

        <!-- Add/Edit Subscription Modal -->
         
        <div id="subscription-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2 id="modal-title">Add Subscription</h2>
                <form id="subscription-form">
                    <input type="hidden" id="subscription-id">
                    <div class="form-group">
                        <label for="subscription-name">Subscription Name</label>
                        <input type="text" id="subscription-name" required>
                    </div>
                    <div class="form-group">
                        <label for="subscription-category">Category</label>
                        <select id="subscription-category" required>
                            <option value="streaming">Streaming</option>
                            <option value="fitness">Fitness</option>
                            <option value="utility">Utility</option>
                            <option value="membership">Membership</option>
                            <option value="software">Software</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="subscription-cost">Cost (â‚¹)</label>
                        <input type="number" id="subscription-cost" min="0" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="billing-cycle">Billing Cycle</label>
                        <select id="billing-cycle" required>
                            <option value="monthly">Monthly</option>
                            <option value="yearly">Yearly</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="start-date">Start Date</label>
                        <input type="date" id="start-date" required>
                    </div>
                    <div class="form-group">
                        <label for="next-billing">Next Billing Date</label>
                        <input type="date" id="next-billing" required>
                    </div>
                    <div class="form-group">
                        <label for="auto-renew">Auto Renew</label>
                        <input type="checkbox" id="auto-renew" checked>
                    </div>
                    <div class="form-group">
                        <label for="payment-method">Payment Method</label>
                        <select id="payment-method">
                            <option value="credit-card">Credit Card</option>
                            <option value="debit-card">Debit Card</option>
                            <option value="upi">UPI</option>
                            <option value="net-banking">Net Banking</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="reminder-days">Reminder Before Due (days)</label>
                        <select id="reminder-days">
                            <option value="1">1 day</option>
                            <option value="3" selected>3 days</option>
                            <option value="7">7 days</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-primary">Save Subscription</button>
                </form>
            </div>
        </div>
    </main>



    <!-- Stocks and investments Page -->
<main class="main-content" id="stocksandinvestments-page">
     <header>
        <div class="container header-content">
            <div class="logo">MarketWatch</div>
            <div class="search-container">
                <input type="text" class="search-input" id="symbolInput" placeholder="Search symbol (e.g., IBM, AAPL)" value="IBM">
                <button class="search-button" id="searchBtn">
                    <i class="fas fa-search"></i> Search
                </button>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="interval-selector">
            <button class="interval-btn active" data-interval="5min">5 Min</button>
            <button class="interval-btn" data-interval="15min">15 Min</button>
            <button class="interval-btn" data-interval="30min">30 Min</button>
            <button class="interval-btn" data-interval="60min">60 Min</button>
        </div>
        
        <div class="dashboard">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Stock Overview</div>
                </div>
                <div class="stock-info">
                    <div class="stock-symbol" id="stockSymbol">IBM</div>
                    <div class="stock-price" id="currentPrice">-</div>
                    <div class="stock-change" id="priceChange">
                        <span id="changeAmount">-</span>
                        <span id="changePercent">(-%)</span>
                    </div>
                </div>
                <div class="schart-container">
                    <canvas id="priceChart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Latest Data Points</div>
                </div>
                <div class="chart-container">
                    <canvas id="volumeChart"></canvas>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <div class="card-title">Intraday Data</div>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Open</th>
                        <th>High</th>
                        <th>Low</th>
                        <th>Close</th>
                        <th>Volume</th>
                    </tr>
                </thead>
                <tbody id="dataTableBody">
                    <!-- Data will be inserted here by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>
    </main>
        

    <!-- Insurance Manager Page -->
<main class="main-content" id="insurancemanager-page">
    
   <div class="insuranceHeader">
        <h1>Insurance Manager</h1>
        <button id="addInsuranceBtn">+ Add Policy</button>
    </div>

    <!-- Summary Cards -->
    <div class="insuranceSummaryCards">
        <div class="insuranceSummaryCard">
            <h3><i class="fas fa-shield-alt"></i> Active Policies</h3>
            <p id="activePoliciesCount">0</p>
            <div class="trend up">
                <i class="fas fa-arrow-up"></i> 2 new this month
            </div>
        </div>
        <div class="insuranceSummaryCard">
            <h3><i class="fas fa-calendar-alt"></i> Monthly Premium</h3>
            <p id="monthlyPremium">â‚¹0</p>
            <div class="trend down">
                <i class="fas fa-arrow-down"></i> 5% from last month
            </div>
        </div>
        <div class="insuranceSummaryCard">
            <h3><i class="fas fa-rupee-sign"></i> Annual Cost</h3>
            <p id="annualPremium">â‚¹0</p>
            <div class="trend up">
                <i class="fas fa-arrow-up"></i> 10% from last year
            </div>
        </div>
        <div class="insuranceSummaryCard">
            <h3><i class="fas fa-heartbeat"></i> Coverage Score</h3>
            <p id="coverageScore">0/100</p>
            <div class="trend up">
                <i class="fas fa-arrow-up"></i> Improving
            </div>
        </div>
    </div>

    <!-- Insurance Policies List -->
    <div class="insuranceListSection">
        <div class="insuranceListHeader">
            <h2><i class="fas fa-list"></i> Your Insurance Policies</h2>
            <div class="insuranceListControls">
                <input type="text" id="insuranceSearch" placeholder="Search policies..." />
                <select id="insuranceTypeFilter">
                    <option value="all">All Types</option>
                    <option value="health">Health</option>
                    <option value="life">Life</option>
                    <option value="auto">Auto</option>
                    <option value="home">Home</option>
                    <option value="travel">Travel</option>
                    <option value="other">Other</option>
                </select>
                <select id="insuranceSortBy">
                    <option value="premium-asc">Premium: Low to High</option>
                    <option value="premium-desc">Premium: High to Low</option>
                    <option value="date-asc">Date: Oldest First</option>
                    <option value="date-desc">Date: Newest First</option>
                </select>
            </div>
        </div>

        <div class="insuranceList" id="insurancePoliciesList">
            <!-- Policies will be added here dynamically -->
            <div class="empty-message">No insurance policies added yet. Add your first policy above.</div>
        </div>
    </div>

    <!-- Insurance Analytics -->
    <div class="insuranceAnalyticsSection">
        <h2><i class="fas fa-chart-pie"></i> Insurance Analytics</h2>
        <div id="insuranceChartContainer">
            <canvas id="insuranceChart"></canvas>
        </div>
        
        <div class="coverageTips">
            <h3><i class="fas fa-lightbulb"></i> Coverage Optimization Tips</h3>
            <div class="tipItem">
                <div class="tipIcon">
                    <i class="fas fa-heartbeat"></i>
                </div>
                <div class="tipContent">
                    <h4>Health Insurance Gap</h4>
                    <p>Your health coverage is below the recommended amount for your income level. Consider increasing your sum insured.</p>
                </div>
            </div>
            <div class="tipItem">
                <div class="tipIcon">
                    <i class="fas fa-home"></i>
                </div>
                <div class="tipContent">
                    <h4>Home Insurance Review</h4>
                    <p>Your home insurance hasn't been updated in 2 years. Review your coverage to account for inflation and any home improvements.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating action button for mobile -->
    <button class="floatingAddInsuranceBtn" id="floatingAddInsuranceBtn">
        <i class="fas fa-plus"></i>
    </button>

    <!-- Insurance Policy Modal -->
    <div id="insuranceModal" class="modalOverlay">
        <div class="imodalContent">
            <span class="close">&times;</span>
            <h2>Add Insurance Policy</h2>
            <form id="insuranceForm">
                <div class="iFormGroup">
                    <label for="insurancePolicyName">Policy Name</label>
                    <input type="text" id="insurancePolicyName" placeholder="e.g., Health Shield, Auto Protect" required>
                </div>
                
                <div class="iFormGroup">
                    <label for="insuranceType">Insurance Type</label>
                    <select id="insuranceType" required>
                        <option value="">Select type</option>
                        <option value="health">Health Insurance</option>
                        <option value="life">Life Insurance</option>
                        <option value="auto">Auto Insurance</option>
                        <option value="home">Home Insurance</option>
                        <option value="travel">Travel Insurance</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="iFormGroup">
                    <label for="insuranceProvider">Provider</label>
                    <input type="text" id="insuranceProvider" placeholder="e.g., LIC, HDFC Ergo" required>
                </div>
                
                <div class="iFormGroup">
                    <label for="insurancePolicyNumber">Policy Number</label>
                    <input type="text" id="insurancePolicyNumber" placeholder="Enter policy number" required>
                </div>
                
                <div class="iFormGroup">
                    <label for="insuranceStartDate">Start Date</label>
                    <input type="date" id="insuranceStartDate" required>
                </div>
                
                <div class="iFormGroup">
                    <label for="insuranceEndDate">End Date</label>
                    <input type="date" id="insuranceEndDate">
                </div>
                
                <div class="iFormGroup amountInput">
                    <label for="insurancePremium">Premium Amount</label>
                    <span>â‚¹</span>
                    <input type="number" id="insurancePremium" step="0.01" placeholder="0.00" required>
                </div>
                
                <div class="iFormGroup">
                    <label for="insurancePremiumFrequency">Premium Frequency</label>
                    <select id="insurancePremiumFrequency" required>
                        <option value="monthly">Monthly</option>
                        <option value="quarterly">Quarterly</option>
                        <option value="half-yearly">Half-Yearly</option>
                        <option value="yearly">Yearly</option>
                        <option value="one-time">One-Time</option>
                    </select>
                </div>
                
                <div class="iFormGroup amountInput">
                    <label for="insuranceCoverageAmount">Coverage Amount</label>
                    <span>â‚¹</span>
                    <input type="number" id="insuranceCoverageAmount" step="0.01" placeholder="0.00" required>
                </div>
                
                <div class="iFormGroup">
                    <label for="insuranceBeneficiaries">Beneficiaries</label>
                    <input type="text" id="insuranceBeneficiaries" placeholder="Names separated by commas">
                </div>
                
                <div class="iFormGroup">
                    <label for="insuranceNotes">Notes</label>
                    <textarea id="insuranceNotes" placeholder="Any additional details about the policy"></textarea>
                </div>
                
                <button type="submit" class="submit-btn">Save Policy</button>
            </form>
        </div>
    </div>
</main>


<!-- networth cakculator Page -->
<main class="main-content" id="networthcalculator-page">
    <body class="nwt-body">
    <div class="container-fluid py-4" id="nwt-inputContainer">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="nwt-dashboard-header p-4 mb-4 text-center">
                    <h1 class="mb-3">Welcome to Your Net Worth Tracker</h1>
                    <p class="mb-0">Let's get started by entering your financial details</p>
                </div>
                
                <div class="nwt-input-section">
                    <h4 class="mb-4"><i class="fas fa-user-circle me-2"></i> Personal Information</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="nwt-form-group">
                                <label for="nwt-userName" class="form-label">Your Name</label>
                                <input type="text" class="form-control" id="nwt-userName" placeholder="John Doe">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="nwt-form-group">
                                <label class="form-label">Age Group</label>
                                <div class="nwt-age-group-selector btn-group d-flex">
                                    <button class="btn btn-outline-secondary active" data-age="under30">Under 30</button>
                                    <button class="btn btn-outline-secondary" data-age="30-40">30-40</button>
                                    <button class="btn btn-outline-secondary" data-age="40-50">40-50</button>
                                    <button class="btn btn-outline-secondary" data-age="50plus">50+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="nwt-input-section">
                    <h4 class="mb-4"><i class="fas fa-wallet me-2"></i> Your Assets</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="nwt-form-group">
                                <label for="nwt-cashAmount" class="form-label">Cash & Savings</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="number" class="form-control" id="nwt-cashAmount" placeholder="10,000">
                                </div>
                            </div>
                            <div class="nwt-form-group">
                                <label for="nwt-investmentAmount" class="form-label">Investments (Stocks, ETFs, Crypto)</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="number" class="form-control" id="nwt-investmentAmount" placeholder="50,000">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="nwt-form-group">
                                <label for="nwt-realEstateAmount" class="form-label">Real Estate Value</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="number" class="form-control" id="nwt-realEstateAmount" placeholder="300,000">
                                </div>
                            </div>
                            <div class="nwt-form-group">
                                <label for="nwt-otherAssetsAmount" class="form-label">Other Assets (Cars, Collectibles, etc.)</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="number" class="form-control" id="nwt-otherAssetsAmount" placeholder="20,000">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="nwt-input-section">
                    <h4 class="mb-4"><i class="fas fa-credit-card me-2"></i> Your Liabilities</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="nwt-form-group">
                                <label for="nwt-creditCardDebt" class="form-label">Credit Card Debt</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="number" class="form-control" id="nwt-creditCardDebt" value="20000">
                                </div>
                            </div>
                            <div class="nwt-form-group">
                                <label for="nwt-studentLoans" class="form-label">Student Loans</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="number" class="form-control" id="nwt-studentLoans" value="10000">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="nwt-form-group">
                                <label for="nwt-mortgageAmount" class="form-label">Mortgage</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="number" class="form-control" id="nwt-mortgageAmount" value="200000">
                                </div>
                            </div>
                            <div class="nwt-form-group">
                                <label for="nwt-otherDebts" class="form-label">Other Debts</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="number" class="form-control" id="nwt-otherDebts" value="9000">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="nwt-input-section">
                    <h4 class="mb-4"><i class="fas fa-bullseye me-2"></i> Financial Goals</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="nwt-form-group">
                                <label for="nwt-netWorthGoal" class="form-label">Net Worth Goal</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="number" class="form-control" id="nwt-netWorthGoal" value="10000000">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="nwt-form-group">
                                <label for="nwt-timeframe" class="form-label">Goal Timeframe (Years)</label>
                                <input type="number" class="form-control" id="nwt-timeframe" value="2">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-4">
                    <button id="nwt-generateDashboard" class="btn btn-primary btn-lg px-5">
                        <i class="fas fa-chart-line me-2"></i> Generate My Net Worth Dashboard
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container-fluid py-4" id="nwt-dashboardContainer">
        <!-- Dashboard Header -->
        <div class="nwt-dashboard-header p-4 mb-4">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h1 class="mb-0" id="nwt-dashboardTitle">Net Worth Tracker</h1>
                    <p class="mb-0">Tracking your financial health</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <button class="btn btn-light me-2" id="nwt-editDetailsBtn">
                        <i class="fas fa-edit me-1"></i> Edit Details
                    </button>
                    <button class="btn btn-light">
                        <i class="fas fa-file-export me-1"></i> Export
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Net Worth Summary -->
        <div class="row mb-4">
            <div class="col-md-8">
                <div class="nwt-card">
                    <div class="nwt-card-header d-flex justify-content-between align-items-center">
                        <span>Net Worth History</span>
                        <div class="nwt-time-period-selector">
                            <button class="btn btn-sm btn-outline-secondary active" data-period="3M">3M</button>
                            <button class="btn btn-sm btn-outline-secondary" data-period="6M">6M</button>
                            <button class="btn btn-sm btn-outline-secondary" data-period="1Y">1Y</button>
                            <button class="btn btn-sm btn-outline-secondary" data-period="5Y">5Y</button>
                            <button class="btn btn-sm btn-outline-secondary" data-period="All">All</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <canvas id="nwt-netWorthTrendChart" height="250"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="nwt-card h-100">
                    <div class="nwt-card-header">Current Net Worth</div>
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="nwt-net-worth-display nwt-positive" id="nwt-netWorthDisplay">$0</div>
                        <div class="d-flex mb-3">
                            <div class="text-center me-4">
                                <div class="text-muted small">Assets</div>
                                <div class="fw-bold text-success" id="nwt-totalAssets">$0</div>
                            </div>
                            <div class="text-center">
                                <div class="text-muted small">Liabilities</div>
                                <div class="fw-bold text-danger" id="nwt-totalLiabilities">$0</div>
                            </div>
                        </div>
                        <div class="w-100 mb-3" id="nwt-goalProgressContainer">
                            <div class="d-flex justify-content-between mb-1">
                                <small id="nwt-goalText">Net Worth Goal: $0</small>
                                <small id="nwt-goalPercentage">0%</small>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="nwt-progress-bar" id="nwt-goalProgressBar" role="progressbar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="nwt-comparison-badge" id="nwt-ageComparisonBadge">
                            <i class="fas fa-user-friends me-1"></i> Comparison data loading...
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Asset & Liability Breakdown -->
        <div class="row mb-4">
            <div class="col-md-6">
                <div class="nwt-card">
                    <div class="nwt-card-header d-flex justify-content-between align-items-center">
                        <span>Assets Breakdown</span>
                        <span class="badge bg-success" id="nwt-totalAssetsBadge">$0</span>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <canvas id="nwt-assetsPieChart" height="200"></canvas>
                            </div>
                            <div class="col-md-6">
                                <div class="nwt-asset-item d-flex justify-content-between">
                                    <span><i class="fas fa-money-bill-wave me-2"></i> Liquid Assets</span>
                                    <span class="fw-bold" id="nwt-liquidAssets">$0</span>
                                </div>
                                <div class="nwt-asset-item d-flex justify-content-between">
                                    <span><i class="fas fa-chart-line me-2"></i> Investments</span>
                                    <span class="fw-bold" id="nwt-investmentAssets">$0</span>
                                </div>
                                <div class="nwt-asset-item d-flex justify-content-between">
                                    <span><i class="fas fa-home me-2"></i> Real Estate</span>
                                    <span class="fw-bold" id="nwt-realEstateAssets">$0</span>
                                </div>
                                <div class="nwt-asset-item d-flex justify-content-between">
                                    <span><i class="fas fa-car me-2"></i> Personal Property</span>
                                    <span class="fw-bold" id="nwt-propertyAssets">$0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="nwt-card">
                    <div class="nwt-card-header d-flex justify-content-between align-items-center">
                        <span>Liabilities Breakdown</span>
                        <span class="badge bg-danger" id="nwt-totalLiabilitiesBadge">$0</span>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <canvas id="nwt-liabilitiesPieChart" height="200"></canvas>
                            </div>
                            <div class="col-md-6">
                                <div class="nwt-liability-item d-flex justify-content-between">
                                    <span><i class="fas fa-credit-card me-2"></i> Credit Cards</span>
                                    <span class="fw-bold" id="nwt-creditCardLiabilities">$0</span>
                                </div>
                                <div class="nwt-liability-item d-flex justify-content-between">
                                    <span><i class="fas fa-graduation-cap me-2"></i> Student Loans</span>
                                    <span class="fw-bold" id="nwt-studentLoanLiabilities">$0</span>
                                </div>
                                <div class="nwt-liability-item d-flex justify-content-between">
                                    <span><i class="fas fa-home me-2"></i> Mortgage</span>
                                    <span class="fw-bold" id="nwt-mortgageLiabilities">$0</span>
                                </div>
                                <div class="nwt-liability-item d-flex justify-content-between">
                                    <span><i class="fas fa-file-invoice me-2"></i> Other Debts</span>
                                    <span class="fw-bold" id="nwt-otherLiabilities">$0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Financial Metrics -->
        <div class="row mb-4">
            <div class="col-md-4">
                <div class="nwt-card">
                    <div class="nwt-card-header">Debt-to-Asset Ratio</div>
                    <div class="card-body text-center">
                        <div class="display-4 fw-bold mb-2" id="nwt-debtRatio">0.00</div>
                        <div class="text-muted" id="nwt-debtRatioText">Loading assessment...</div>
                        <canvas id="nwt-ratioGaugeChart" height="100" class="mt-3"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="nwt-card">
                    <div class="nwt-card-header">Net Worth Change</div>
                    <div class="card-body">
                        <div class="d-flex justify-content-between mb-3">
                            <div class="text-center">
                                <div class="text-muted small">Monthly Change</div>
                                <div class="fw-bold text-success" id="nwt-monthlyChange">+$0</div>
                            </div>
                            <div class="text-center">
                                <div class="text-muted small">Annual Change</div>
                                <div class="fw-bold text-success" id="nwt-annualChange">+$0</div>
                            </div>
                        </div>
                        <canvas id="nwt-monthlyChangeChart" height="150"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="nwt-card">
                    <div class="nwt-card-header">Top Insights</div>
                    <div class="card-body" id="nwt-insightsContainer">
                        <!-- Insights will be generated here -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Projections -->
        <div class="row">
            <div class="col-md-12">
                <div class="nwt-card">
                    <div class="nwt-card-header">Future Projections</div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-8">
                                <canvas id="nwt-projectionChart" height="200"></canvas>
                            </div>
                            <div class="col-md-4">
                                <div class="alert alert-info">
                                    <h5><i class="fas fa-lightbulb me-2"></i> Projection Details</h5>
                                    <p id="nwt-projectionText">Based on your current assets, liabilities, and goal timeframe, we'll project your future net worth.</p>
                                    <div class="mt-3">
                                        <div class="d-flex justify-content-between mb-1">
                                            <span>Projected Net Worth in <span id="nwt-timeframeText">0</span> years:</span>
                                            <span class="fw-bold" id="nwt-projectedNetWorth">$0</span>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <span>Monthly growth needed:</span>
                                            <span class="fw-bold" id="nwt-neededGrowth">$0</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Floating Add Button -->
        <button class="btn btn-primary nwt-add-item-btn" id="nwt-addNewItemBtn">
            <i class="fas fa-plus"></i>
        </button>
    </div>
</main>
        <!-- Settings Page -->
        <main class="main-content" id="settings-page">
            <header class="header">
                <h2>Settings</h2>
            </header>

            <div class="settings-form">
                <div class="form-group">
                    <label>Profile Information</label>
                    <input type="text" placeholder="Name">
                    <input type="email" placeholder="Email">
                </div>
                <div class="form-group">
                    <label>Security</label>
                    <input type="password" placeholder="Change Password">
                </div>
                <button class="submit-btn">Save Changes</button>
            </div>
        
    </div>
</main>

    <!-- Add Transaction Modal -->


    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@xenova/transformers"></script>
    <script src="https://cdn.jsdelivr.net/npm/@xenova/transformers/dist/transformers.min.js"></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js'></script>
    <script>
   document.addEventListener('DOMContentLoaded', function () {
            // === Page Navigation ===
            const pages = {
                dashboard: document.getElementById('dashboard-page'),
                transactions: document.getElementById('transactions-page'),
                analytics: document.getElementById('analytics-page'),
                goals: document.getElementById('goals-page'),
                budget: document.getElementById('budget-page'),
                settings: document.getElementById('settings-page'),
                aiAdvisor: document.getElementById('ai-advisor-page'),
                emergency: document.getElementById('emergency-page') ,
                reports: document.getElementById('reports-page'),
                taxestimator:document.getElementById('taxestimator-page'),
                loanmanager: document.getElementById('loanmanager-page'),
                subscriptiontracker: document.getElementById('subscriptiontracker-page'),
                
                stocksandinvestments: document.getElementById('stocksandinvestments-page'),
                insurancemanager: document.getElementById('insurancemanager-page'),
                networthcalculator: document.getElementById('networthcalculator-page')
            };
            if (pages.budget.classList.contains('active')) {
        initBudgetPage();
    }
        
 // Inside DOMContentLoaded block
 document.querySelectorAll('.nav-menu a').forEach(link => {
    link.addEventListener('click', function (e) {
        e.preventDefault();

        // Hide all pages
        document.querySelectorAll('main.main-content').forEach(page => {
            page.style.display = 'none';
            page.classList.remove('active');
        });

        // Show target page
        const targetPage = document.getElementById(`${this.dataset.page}-page`);
        if (targetPage) {
            targetPage.style.display = 'block';
            targetPage.classList.add('active');
        }

        // Mark active nav
        document.querySelectorAll('.nav-menu li').forEach(li => li.classList.remove('active'));
        this.parentElement.classList.add('active');

        // Hide Budget Modal regardless of where it was
        document.getElementById('budget-modal').style.display = 'none';
        document.querySelector('.add-budget-btn')?.addEventListener('click', openBudgetModal);

        // Update Analytics
        if (this.dataset.page === 'analytics') {
            updateAnalyticsPage();
        }

        // âœ… NEW: Update AI Advisor Page
        if (this.dataset.page === 'ai-advisor') {
            updateAIAdvisorPage();
        }
        if (this.dataset.page === 'reports') {
            updateReportTable();
        }
          if (this.dataset.page === 'loanmanager') {
                initLoanManagerPage();
            }

    });
});


        
            // === Modal ===
            const addTransactionBtns = document.querySelectorAll('.add-transaction-btn');
            const modalOverlay = document.getElementById('transactionModal');
            const closeModalBtn = document.querySelector('.close-modal');
        
            addTransactionBtns.forEach(btn => btn.addEventListener('click', () => modalOverlay.classList.add('active')));
            closeModalBtn.addEventListener('click', () => modalOverlay.classList.remove('active'));
            modalOverlay.addEventListener('click', (e) => {
                if (e.target === modalOverlay) modalOverlay.classList.remove('active');
            });
        
            // === Transaction State ===
            let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
            let currentType = 'income';
            let selectedCategory = null;
            let monthlyChartInstance = null;
            let categoryChartInstance = null;
            let incomeExpenseChartInstance = null;
            let topCategoriesChartInstance = null;
            let monthlyTrendChartInstance = null;



        
            // Initialize year selector
            const currentYear = new Date().getFullYear();
            const yearSelector = document.querySelector('#analytics-page .year-selector');
            if (yearSelector) {
                yearSelector.innerHTML = '';
                for (let year = currentYear; year >= currentYear - 5; year--) {
                    const option = document.createElement('option');
                    option.value = year;
                    option.textContent = year;
                    yearSelector.appendChild(option);
                }
            }
        
            // === Type & Category Tabs ===
            document.querySelectorAll('.type-tab').forEach(tab => {
                tab.addEventListener('click', function () {
                    document.querySelectorAll('.type-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    currentType = this.dataset.type;
        
                    document.querySelectorAll('.category-option').forEach(opt => {
                        opt.style.display = opt.dataset.type === currentType ? 'block' : 'none';
                        opt.classList.remove('selected');
                    });
        
                    selectedCategory = null;
                    document.getElementById('category').value = '';
                });
            });
        
            document.querySelectorAll('.category-option').forEach(option => {
                option.addEventListener('click', function () {
                    document.querySelectorAll('.category-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedCategory = this.dataset.category;
                    document.getElementById('category').value = selectedCategory;
                });
            });
        
            // === Submit Transaction ===
            document.getElementById('transactionForm').addEventListener('submit', function (e) {
                e.preventDefault();
        
                const newTransaction = {
                    id: Date.now(),
                    description: document.getElementById('description').value,
                    amount: parseFloat(document.getElementById('amount').value),
                    type: currentType,
                    category: selectedCategory,
                    date: document.getElementById('date').value
                };
        
                transactions.unshift(newTransaction);
                saveTransactions();
                updateTransactions();
                updateSummaryCards();
                modalOverlay.classList.remove('active');
                this.reset();
                document.querySelectorAll('.category-option').forEach(opt => opt.classList.remove('selected'));
                updateTransactionsPage();
                updateAnalyticsPage(); // Add this to update analytics when new transaction is added
            });
            

            document.getElementById('transactionForm').addEventListener('submit', function (e) {
    e.preventDefault();

    const data = {
        description: document.getElementById('description').value,
        amount: parseFloat(document.getElementById('amount').value),
        type: currentType,
        category: selectedCategory,
        date: document.getElementById('date').value
    };

    fetch('submit_transaction.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
    })
    .then(res => res.text())
    .then(response => {
        console.log(response); // show success or error
        alert(response);
        modalOverlay.classList.remove('active');
        this.reset();
        document.querySelectorAll('.category-option').forEach(opt => opt.classList.remove('selected'));
    })
    .catch(err => console.error('âŒ Error:', err));
});

     
fetch('submit_transaction.php', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
})
.then(response => response.text())
.then(result => {
    console.log(result);
    alert(result);
})
.catch(error => {
    console.error('âŒ Error:', error);
});




        
            // === Update Dashboard Table ===
            function updateTransactions() {
                const tbody = document.querySelector('#dashboard-page table tbody');
                tbody.innerHTML = '';
        
                const icons = {
                    salary: ['money-check', '--income-color'],
                    freelance: ['laptop-house', '--income-color'],
                    investment: ['chart-line', '--income-color'],
                    shopping: ['shopping-cart', '--shopping-color'],
                    food: ['utensils', '--food-color'],
                    transportation: ['bus', '--transportation-color'],
                    entertainment: ['gamepad', '--entertainment-color'],
                    housing: ['home', '--housing-color'],
                    health: ['heartbeat', '--health-color']
                };
        
                const sorted = transactions.slice().sort((a, b) => new Date(b.date) - new Date(a.date));
                sorted.forEach(tx => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${tx.description}</td>
                        <td><i class="fas fa-${icons[tx.category][0]}" style="color: var(${icons[tx.category][1]})"></i> ${tx.category}</td>
                        <td>${new Date(tx.date).toLocaleDateString()}</td>
                        <td class="${tx.type}">${tx.type === 'expense' ? '-' : '+'}$${tx.amount.toFixed(2)}</td>
                        <td>
                            <button class="action-btn edit"><i class="fas fa-edit"></i></button>
                            <button class="action-btn delete" onclick="deleteTransaction(${tx.id})"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
        
                populateMonthDropdown();
            }
        
            // === Update Summary Cards ===
            function updateSummaryCards() {
                const income = transactions.filter(t => t.type === 'income').reduce((sum, t) => sum + t.amount, 0);
                const expense = transactions.filter(t => t.type === 'expense').reduce((sum, t) => sum + t.amount, 0);
                const balance = income - expense;
        
                document.querySelector('.balance-card p').textContent = `$${balance.toFixed(2)}`;
                document.querySelector('.income-card p').textContent = `$${income.toFixed(2)}`;
                document.querySelector('.expense-card p').textContent = `$${expense.toFixed(2)}`;
        
                updateMonthlyChart();
                updateCategoryChart();
            }
        
            // === Monthly Chart ===
            function updateMonthlyChart() {
                const monthlySelector = document.querySelector('.month-selector');
                const selectedMonthYear = monthlySelector.value;
                if (!selectedMonthYear) return;
        
                const [monthName, yearStr] = selectedMonthYear.split(" ");
                const selectedYear = parseInt(yearStr);
                const selectedMonth = new Date(`${monthName} 1, ${selectedYear}`).getMonth();
        
                let total = 0;
        
                transactions.forEach(tx => {
                    const txDate = new Date(tx.date);
                    if (txDate.getMonth() === selectedMonth && txDate.getFullYear() === selectedYear) {
                        total += tx.type === 'expense' ? -tx.amount : tx.amount;
                    }
                });
        
                const ctx = document.getElementById('monthlyChart').getContext('2d');
                if (monthlyChartInstance) monthlyChartInstance.destroy();
        
                monthlyChartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: [selectedMonthYear],
                        datasets: [{
                            label: 'Net Flow',
                            data: [total],
                            backgroundColor: total >= 0 ? '#51cf66' : '#ff6b6b'
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: { legend: { display: false } },
                        scales: { y: { beginAtZero: true } }
                    }
                });
            }
        
            // === Category Chart ===
            function updateCategoryChart() {
                const categoryTotals = {};
                transactions.forEach(tx => {
                    if (tx.type === 'expense') {
                        categoryTotals[tx.category] = (categoryTotals[tx.category] || 0) + tx.amount;
                    }
                });
        
                const labels = Object.keys(categoryTotals);
                const data = Object.values(categoryTotals);
                const backgroundColors = labels.map(cat => {
                    const colorMap = {
                        shopping: '#ff922b',
                        food: '#94d82d',
                        transportation: '#339af0',
                        entertainment: '#cc5de8',
                        housing: '#f76707',
                        health: '#20c997',
                        education: '#748ffc'
                    };
                    return colorMap[cat] || '#ff6b6b';
                });
        
                const ctx = document.getElementById('categoryChart').getContext('2d');
                if (categoryChartInstance) categoryChartInstance.destroy();
        
                categoryChartInstance = new Chart(ctx, {
                    type: 'pie',
                    data: { labels, datasets: [{ data, backgroundColor: backgroundColors }] },
                    options: {
                        responsive: true,
                        plugins: { legend: { position: 'bottom' } }
                    }
                });
            }
        
            // === Analytics Functions ===
            function updateAnalyticsPage() {
                if (!document.getElementById('analytics-page').classList.contains('active')) return;
                
                const yearSelector = document.querySelector('#analytics-page .year-selector');
                const selectedYear = yearSelector ? parseInt(yearSelector.value) : new Date().getFullYear();
                
                // Filter transactions for selected year
                const yearTransactions = transactions.filter(tx => {
                    const txDate = new Date(tx.date);
                    return txDate.getFullYear() === selectedYear;
                });
                
                // Calculate total income and expense
                const totalIncome = yearTransactions
                    .filter(tx => tx.type === 'income')
                    .reduce((sum, tx) => sum + tx.amount, 0);
                    
                const totalExpense = yearTransactions
                    .filter(tx => tx.type === 'expense')
                    .reduce((sum, tx) => sum + tx.amount, 0);
                    
                const netSavings = totalIncome - totalExpense;
                
                // Update summary cards
                document.getElementById('total-income').textContent = `$${totalIncome.toFixed(2)}`;
                document.getElementById('total-expense').textContent = `$${totalExpense.toFixed(2)}`;
                document.getElementById('net-savings').textContent = `$${netSavings.toFixed(2)}`;
                
                // Update charts
                updateIncomeExpenseChart(yearTransactions);
                updateTopCategoriesChart(yearTransactions);
                updateMonthlyTrendChart(yearTransactions);
                updateBestAndWorstMonths(yearTransactions);

                const categoryTotals = {};
    yearTransactions.filter(tx => tx.type === 'expense').forEach(tx => {
        categoryTotals[tx.category] = (categoryTotals[tx.category] || 0) + tx.amount;
    });
    const topCategory = Object.entries(categoryTotals).sort((a, b) => b[1] - a[1])[0]?.[0] || 'None';

    // âœ… Fetch AI advice
    const userSummary = `
Total Income: $${totalIncome.toFixed(2)}
Total Expenses: $${totalExpense.toFixed(2)}
Net Savings: $${netSavings.toFixed(2)}
Top Expense Category: ${topCategory}
`;

    fetchAIAdviceFromBackend(userSummary);
            }
        
            function updateIncomeExpenseChart(transactions) {
                const income = transactions.filter(tx => tx.type === 'income')
                    .reduce((sum, tx) => sum + tx.amount, 0);
                const expense = transactions.filter(tx => tx.type === 'expense')
                    .reduce((sum, tx) => sum + tx.amount, 0);
                    
                const ctx = document.getElementById('incomeExpenseChart').getContext('2d');
                
                if (incomeExpenseChartInstance) incomeExpenseChartInstance.destroy();
                
                incomeExpenseChartInstance = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Income', 'Expense'],
                        datasets: [{
                            data: [income, expense],
                            backgroundColor: [
                                'rgba(81, 207, 102, 0.8)',
                                'rgba(255, 107, 107, 0.8)'
                            ],
                            borderColor: [
                                'rgba(81, 207, 102, 1)',
                                'rgba(255, 107, 107, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const label = context.label || '';
                                        const value = context.raw || 0;
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = Math.round((value / total) * 100);
                                        return `${label}: $${value.toFixed(2)} (${percentage}%)`;
                                    }
                                }
                            }
                        }
                    }
                });
            }
        
            function updateTopCategoriesChart(transactions) {
                const categoryTotals = {};
                
                transactions.filter(tx => tx.type === 'expense').forEach(tx => {
                    categoryTotals[tx.category] = (categoryTotals[tx.category] || 0) + tx.amount;
                });
                
                // Sort categories by amount and take top 5
                const sortedCategories = Object.entries(categoryTotals)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 5);
                    
                const labels = sortedCategories.map(item => item[0]);
                const data = sortedCategories.map(item => item[1]);
                
                const ctx = document.getElementById('topCategoriesChart').getContext('2d');
                
                if (topCategoriesChartInstance) topCategoriesChartInstance.destroy();
                
                topCategoriesChartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Amount Spent',
                            data: data,
                            backgroundColor: [
                                'rgba(255, 146, 43, 0.8)',
                                'rgba(148, 216, 45, 0.8)',
                                'rgba(51, 154, 240, 0.8)',
                                'rgba(204, 93, 232, 0.8)',
                                'rgba(247, 103, 7, 0.8)'
                            ],
                            borderColor: [
                                'rgba(255, 146, 43, 1)',
                                'rgba(148, 216, 45, 1)',
                                'rgba(51, 154, 240, 1)',
                                'rgba(204, 93, 232, 1)',
                                'rgba(247, 103, 7, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value;
                                    }
                                }
                            }
                        }
                    }
                });
            }
        
            function updateMonthlyTrendChart(transactions) {
                const monthlyData = {};
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                
                // Initialize monthly data
                months.forEach((month, index) => {
                    monthlyData[index] = {
                        income: 0,
                        expense: 0
                    };
                });
                
                // Populate monthly data
                transactions.forEach(tx => {
                    const txDate = new Date(tx.date);
                    const month = txDate.getMonth();
                    
                    if (tx.type === 'income') {
                        monthlyData[month].income += tx.amount;
                    } else {
                        monthlyData[month].expense += tx.amount;
                    }
                });
                
                const incomeData = months.map((_, index) => monthlyData[index].income);
                const expenseData = months.map((_, index) => monthlyData[index].expense);
                
                const ctx = document.getElementById('monthlyTrendChart').getContext('2d');
                
                if (monthlyTrendChartInstance) monthlyTrendChartInstance.destroy();
                
                monthlyTrendChartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: months,
                        datasets: [
                            {
                                label: 'Income',
                                data: incomeData,
                                borderColor: 'rgba(81, 207, 102, 1)',
                                backgroundColor: 'rgba(81, 207, 102, 0.1)',
                                tension: 0.3,
                                fill: true
                            },
                            {
                                label: 'Expense',
                                data: expenseData,
                                borderColor: 'rgba(255, 107, 107, 1)',
                                backgroundColor: 'rgba(255, 107, 107, 0.1)',
                                tension: 0.3,
                                fill: true
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value;
                                    }
                                }
                            }
                        }
                    }
                });
            }
        
            function updateBestAndWorstMonths(transactions) {
                const monthlyNet = {};
                const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                               'July', 'August', 'September', 'October', 'November', 'December'];
                
                // Initialize monthly data
                months.forEach((_, index) => {
                    monthlyNet[index] = 0;
                });
                
                // Calculate net for each month
                transactions.forEach(tx => {
                    const txDate = new Date(tx.date);
                    const month = txDate.getMonth();
                    
                    if (tx.type === 'income') {
                        monthlyNet[month] += tx.amount;
                    } else {
                        monthlyNet[month] -= tx.amount;
                    }
                });
                
                // Find best and worst months
                let bestMonth = { index: -1, value: -Infinity };
                let worstMonth = { index: -1, value: Infinity };
                
                Object.entries(monthlyNet).forEach(([month, value]) => {
                    if (value > bestMonth.value) {
                        bestMonth = { index: parseInt(month), value };
                    }
                    if (value < worstMonth.value) {
                        worstMonth = { index: parseInt(month), value };
                    }
                });
                
                // Update UI
                if (bestMonth.index !== -1) {
                    document.getElementById('best-saving-month').textContent = 
                        `${months[bestMonth.index]}: $${bestMonth.value.toFixed(2)}`;
                }
                
                if (worstMonth.index !== -1) {
                    document.getElementById('worst-month-name').textContent = months[worstMonth.index];
                    document.getElementById('worst-month-amount').textContent = 
                        `Net: $${worstMonth.value.toFixed(2)}`;
                }
            }
        
            // === Month Dropdown ===
            function populateMonthDropdown() {
                const monthSelector = document.querySelector('.month-selector');
                const uniqueMonths = new Set();
        
                transactions.forEach(tx => {
                    const dateObj = new Date(tx.date);
                    const label = dateObj.toLocaleString('default', { month: 'long' }) + ' ' + dateObj.getFullYear();
                    uniqueMonths.add(label);
                });
        
                monthSelector.innerHTML = '';
        
                [...uniqueMonths]
                    .sort((a, b) => new Date('1 ' + b) - new Date('1 ' + a))
                    .forEach(month => {
                        const option = document.createElement('option');
                        option.textContent = month;
                        option.value = month;
                        monthSelector.appendChild(option);
                    });
        
                // Set latest month selected by default
                if (monthSelector.options.length > 0) {
                    monthSelector.value = monthSelector.options[0].value;
                }
            }
        
            // === New Transactions Filter Page Functionality ===
            function updateTransactionsPage() {
    const tbody = document.querySelector('#transactions-page table tbody');
    if (!tbody) return;

    tbody.innerHTML = '';
    const categoryFilter = document.querySelector('#transactions-page .category-filter')?.value || 'all';
    const dateFilter = document.querySelector('#transactions-page .date-filter')?.value;
    const searchTerm = document.querySelector('#transactions-page .search-bar input')?.value.toLowerCase() || '';

    const filteredTransactions = transactions.filter(transaction => {
        const matchesCategory = categoryFilter === 'all' || categoryFilter === 'All Categories' || transaction.category === categoryFilter;
        const matchesDate = !dateFilter || transaction.date === dateFilter;
        const matchesSearch = transaction.description.toLowerCase().includes(searchTerm);
        return matchesCategory && matchesDate && matchesSearch;
    });

    // Sort by date (latest first)
    const sortedTransactions = filteredTransactions.sort((a, b) => new Date(b.date) - new Date(a.date));

    sortedTransactions.forEach(tx => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${tx.description}</td>
            <td><i class="fas fa-${getCategoryIcon(tx.category)} category-icon ${tx.category}"></i> ${tx.category.charAt(0).toUpperCase() + tx.category.slice(1)}</td>
            <td>${new Date(tx.date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}</td>
            <td class="${tx.type}">${tx.type === 'expense' ? '-' : '+'}$${tx.amount.toFixed(2)}</td>
            <td>
                <button class="action-btn edit" onclick="editTransaction(${tx.id})"><i class="fas fa-edit"></i></button>
                <button class="action-btn delete" onclick="deleteTransaction(${tx.id})"><i class="fas fa-trash"></i></button>
            </td>
        `;
        tbody.appendChild(row);
    });
}

// Delete function
function deleteTransaction(id) {
    transactions = transactions.filter(tx => tx.id !== id);
    saveTransactions();
    updateTransactionsPage();
    updateSummaryCards();
    updateAnalyticsPage();
}

// Edit function (opens modal with data)
function editTransaction(id) {
    const tx = transactions.find(t => t.id === id);
    if (!tx) return;

    document.getElementById('description').value = tx.description;
    document.getElementById('amount').value = tx.amount;
    document.getElementById('date').value = tx.date;
    document.getElementById('category').value = tx.category;
    document.getElementById('type').value = tx.type;

    document.getElementById('save-btn').onclick = function () {
        tx.description = document.getElementById('description').value;
        tx.amount = parseFloat(document.getElementById('amount').value);
        tx.date = document.getElementById('date').value;
        tx.category = document.getElementById('category').value;
        tx.type = document.getElementById('type').value;

        saveTransactions();
        updateTransactionsPage();
        updateSummaryCards();
        updateAnalyticsPage();

        document.getElementById('transaction-form').reset();
    };
}

// Save to localStorage
function saveTransactions() {
    localStorage.setItem('transactions', JSON.stringify(transactions));
}

        
            function getCategoryIcon(category) {
                const icons = {
                    salary: 'money-check',
                    freelance: 'laptop-house',
                    investment: 'chart-line',
                    shopping: 'shopping-cart',
                    food: 'utensils',
                    transportation: 'bus',
                    entertainment: 'gamepad',
                    housing: 'home',
                    health: 'heartbeat'
                };
                return icons[category] || 'tag';
            }
        
            function deleteTransaction(id) {
                transactions = transactions.filter(tx => tx.id !== id);
                saveTransactions();
                updateTransactions();
                updateSummaryCards();
                updateTransactionsPage();
                updateAnalyticsPage();
            }
        
            // === Event Listeners ===
            document.querySelector('#transactions-page .category-filter')?.addEventListener('change', updateTransactionsPage);
            document.querySelector('#transactions-page .date-filter')?.addEventListener('change', updateTransactionsPage);
            document.querySelector('#transactions-page .search-bar input')?.addEventListener('input', updateTransactionsPage);
            document.querySelector('.apply-filters-btn')?.addEventListener('click', updateTransactionsPage);
            document.querySelector('.month-selector')?.addEventListener('change', updateMonthlyChart);
            document.querySelector('#analytics-page .year-selector')?.addEventListener('change', updateAnalyticsPage);
        
            // === Initial Load ===
            populateMonthDropdown();
            updateTransactions();
            updateSummaryCards();
            updateTransactionsPage();
            
            // Initialize analytics page if it's active on load
            if (document.getElementById('analytics-page').classList.contains('active')) {
                updateAnalyticsPage();
            }
        });
        
        
let editingCard = null;

function openModal(isEdit = false, card = null) {
  document.getElementById('goal-modal').style.display = 'flex';
  if (isEdit && card) {
    editingCard = card;
    document.getElementById('goal-title').value = card.querySelector('h3').innerText;
    document.getElementById('goal-target').value = card.dataset.target;
    document.getElementById('goal-saved').value = card.dataset.saved;
    document.getElementById('goal-date').value = card.dataset.date;
  } else {
    editingCard = null;
    document.getElementById('goal-form').reset();
  }
}

function closeModal() {
  document.getElementById('goal-modal').style.display = 'none';
}

function showCompletionMessage(title) {
  const popup = document.getElementById("completion-popup");
  popup.querySelector(".popup-content").innerHTML = `ðŸŽ‰ <strong>${title}</strong> has been completed!`;
  popup.style.display = "block";
  setTimeout(() => { popup.style.display = "none"; }, 3000);
}

document.getElementById('goal-form').addEventListener('submit', function (event) {
  event.preventDefault();

  const title = document.getElementById('goal-title').value;
  const target = parseFloat(document.getElementById('goal-target').value);
  const saved = parseFloat(document.getElementById('goal-saved').value);
  const date = document.getElementById('goal-date').value;
  const note = document.getElementById('goal-note').value;
  const priority = document.getElementById('goal-priority').value;
  const tag = document.getElementById('goal-tag').value;

  const percentage = Math.min(100, (saved / target) * 100).toFixed(0);
  const today = new Date();
  const targetDate = new Date(date);
  const daysLeft = Math.ceil((targetDate - today) / (1000 * 60 * 60 * 24));
  const overdue = daysLeft < 0;
  const status = percentage >= 100 ? "Completed" : percentage >= 70 ? "On Track" : "Behind";
  const statusClass = status === "Completed" ? "completed" : status === "On Track" ? "on-track" : "behind";

  const cardHTML = `
    <div class="goal-header-row">
      <h3>${title}</h3>
      <button class="pin-btn" onclick="togglePin(this)">ðŸ“Œ</button>
    </div>
    <p><strong>â‚¹${saved.toLocaleString()}</strong> saved of â‚¹${target.toLocaleString()}</p>
    <div class="progress-bar">
      <div class="progress" style="width: ${percentage}%;"></div>
    </div>
    <div class="goal-stats">
      <span>${percentage}% complete</span>
      <span>${overdue ? 'âš ï¸ Overdue' : `${daysLeft} days left`}</span>
    </div>
    <div class="goal-meta">
      <span>ðŸŽ¯ Target: ${date}</span>
      <span class="status ${statusClass}">${status}</span>
    </div>
    <p><strong>Priority:</strong> ${priority}</p>
    <p><strong>Category:</strong> ${tag}</p>
    <p><strong>Note:</strong> ${note || "No notes"}</p>
    <div class="goal-actions">
      <button onclick="editGoal(this)">Edit</button>
      <button onclick="deleteGoal(this)">Delete</button>
    </div>
  `;

  if (editingCard) {
    editingCard.innerHTML = cardHTML;
    editingCard.dataset.title = title;
    editingCard.dataset.target = target;
    editingCard.dataset.saved = saved;
    editingCard.dataset.date = date;

    const historyList = document.getElementById("goal-history-list");
    const existingHistory = Array.from(historyList.children);
    const existingItem = existingHistory.find(li => li.textContent.includes(title));

    if (status === "Completed") {
      if (!existingItem) {
        const historyItem = document.createElement("li");
        historyItem.textContent = `${title} - â‚¹${saved.toLocaleString()} saved by ${date}`;
        historyList.appendChild(historyItem);
        showCompletionMessage(title);
      }
    } else {
      if (existingItem) {
        historyList.removeChild(existingItem);
      }
    }
  } else {
    const card = document.createElement("div");
    card.className = "goal-card";
    card.innerHTML = cardHTML;
    card.dataset.title = title;
    card.dataset.target = target;
    card.dataset.saved = saved;
    card.dataset.date = date;

    document.getElementById('goals-container').appendChild(card);
    document.getElementById('goals-container').scrollLeft = document.getElementById('goals-container').scrollWidth;

    if (status === "Completed") {
      const historyItem = document.createElement("li");
      historyItem.textContent = `${title} - â‚¹${saved.toLocaleString()} saved by ${date}`;
      document.getElementById("goal-history-list").appendChild(historyItem);
      showCompletionMessage(title);
    }
  }

  closeModal();
  updateSummary();
});

function editGoal(button) {
  const card = button.closest('.goal-card');
  openModal(true, card);
}

function deleteGoal(button) {
  const card = button.closest('.goal-card');
  card.remove();
  updateSummary();
}

function togglePin(btn) {
  const card = btn.closest(".goal-card");
  const container = document.getElementById("goals-container");
  const isPinned = card.classList.contains("pinned");

  if (isPinned) {
    card.classList.remove("pinned");
    container.appendChild(card);
  } else {
    card.classList.add("pinned");
    container.prepend(card);
  }
  updateSummary();
}

function updateSummary() {
  const goalCards = document.querySelectorAll(".goal-card");
  let totalSaved = 0;
  let completedCount = 0;
  let topGoalTitle = null;
  let maxSaved = -1;

  goalCards.forEach(card => {
    const saved = Number(card.dataset.saved || 0);
    const target = Number(card.dataset.target || 0);
    const title = card.dataset.title || "";

    totalSaved += saved;

    if (saved >= target) {
      completedCount++;
    }

    if (saved > maxSaved) {
      maxSaved = saved;
      topGoalTitle = title;
    }
  });

  document.getElementById("summary-total").textContent = `â‚¹${totalSaved.toLocaleString()}`;
  document.getElementById("summary-complete").textContent = completedCount;
  document.getElementById("summary-top").textContent = topGoalTitle || "None";
}
function switchPage(pageId) {
    // Show the selected section, hide others
    document.querySelectorAll(".page-section").forEach(section => {
        section.style.display = section.id === pageId ? "block" : "none";
    });

    // Hide the budget modal if you're not on the Budget Planner page
    if (pageId !== "budget-planner-page") {
        document.getElementById("budget-modal").style.display = "none";
    }
}

// Budget Data Storage
let budgetData = JSON.parse(localStorage.getItem('budgetData')) || [];
let editingBudgetId = null;

// Initialize Budget Page
function initBudgetPage() {
    renderBudgetEntries();
    updateBudgetSummary();

    // Set up event listeners only if on budget page
    if (document.getElementById('budget-page').classList.contains('active')) {
        document.getElementById('add-budget-button')?.addEventListener('click', openBudgetModal);
        document.getElementById('close-budget-modal')?.addEventListener('click', closeBudgetModal);
        document.getElementById('budget-form')?.addEventListener('submit', handleBudgetSubmit);

        // Close modal when clicking outside
        document.getElementById('budget-modal').addEventListener('click', function(e) {
            if (e.target === this) closeBudgetModal();
        });
    }
}

// Open Budget Modal
function openBudgetModal() {
    if (!document.getElementById('budget-page').classList.contains('active')) return;

    editingBudgetId = null;
    document.getElementById('budget-form').reset();
    document.getElementById('budget-modal').style.display = 'flex';
}

// Close Budget Modal
function closeBudgetModal() {
    document.getElementById('budget-modal').style.display = 'none';
}

// Handle Budget Form Submission
function handleBudgetSubmit(e) {
    e.preventDefault();

    const entry = {
        id: editingBudgetId || Date.now(),
        type: document.getElementById('entry-type').value,
        category: document.getElementById('entry-category').value,
        amount: parseFloat(document.getElementById('entry-amount').value),
        note: document.getElementById('entry-note').value,
        date: new Date().toISOString().split('T')[0] // Current date in YYYY-MM-DD format
    };

    if (editingBudgetId) {
        // Update existing entry
        const index = budgetData.findIndex(item => item.id === editingBudgetId);
        if (index !== -1) {
            budgetData[index] = entry;
        }
    } else {
        // Add new entry
        budgetData.push(entry);
    }

    // Save to localStorage
    localStorage.setItem('budgetData', JSON.stringify(budgetData));

    // Update UI
    renderBudgetEntries();
    updateBudgetSummary();
    closeBudgetModal();
    showBudgetPopup();

    // âœ… Make sure we stay on budget page, no redirects
    document.querySelectorAll('main.main-content').forEach(page => {
        page.classList.remove('active');
        page.style.display = 'none';
    });

    const budgetPage = document.getElementById('budget-page');
    budgetPage.classList.add('active');
    budgetPage.style.display = 'block';

    // Re-run page init to refresh listeners if needed
    initBudgetPage();
}

// Show Budget Popup
function showBudgetPopup() {
    const popup = document.getElementById('budget-popup');
    popup.style.display = 'block';
    setTimeout(() => {
        popup.style.display = 'none';
    }, 3000);
}

// Render Budget Entries
function renderBudgetEntries() {
    const container = document.getElementById('budget-entries');
    container.innerHTML = '';

    budgetData.forEach(entry => {
        const entryElement = document.createElement('div');
        entryElement.className = `budget-entry ${entry.type}`;
        entryElement.innerHTML = `
            <div class="budget-entry-info">
                <h4>${entry.category}</h4>
                <p>${entry.note || ''}</p>
                <small>${entry.date}</small>
            </div>
            <div class="budget-entry-amount">
                â‚¹${entry.amount.toFixed(2)}
                <div class="entry-actions">
                    <button class="action-btn edit" onclick="editBudgetEntry(${entry.id})">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="action-btn delete" onclick="deleteBudgetEntry(${entry.id})">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
        `;
        container.appendChild(entryElement);
    });
}

// Edit Budget Entry
function editBudgetEntry(id) {
    const entry = budgetData.find(item => item.id === id);
    if (!entry) return;

    editingBudgetId = id;
    document.getElementById('entry-type').value = entry.type;
    document.getElementById('entry-category').value = entry.category;
    document.getElementById('entry-amount').value = entry.amount;
    document.getElementById('entry-note').value = entry.note || '';

    openBudgetModal();
}

// Delete Budget Entry
function deleteBudgetEntry(id) {
    budgetData = budgetData.filter(item => item.id !== id);
    localStorage.setItem('budgetData', JSON.stringify(budgetData));
    renderBudgetEntries();
    updateBudgetSummary();
}

// Update Budget Summary
function updateBudgetSummary() {
    const totalIncome = budgetData
        .filter(entry => entry.type === 'income')
        .reduce((sum, entry) => sum + entry.amount, 0);

    const totalExpenses = budgetData
        .filter(entry => entry.type === 'expense')
        .reduce((sum, entry) => sum + entry.amount, 0);

    const balance = totalIncome - totalExpenses;

    document.getElementById('total-income').textContent = totalIncome.toFixed(2);
    document.getElementById('total-expenses').textContent = totalExpenses.toFixed(2);
    document.getElementById('net-balance').textContent = balance.toFixed(2);
}

// Call initBudgetPage when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    initBudgetPage();

    // Also call it when navigating to budget page
    document.querySelectorAll('.nav-menu a').forEach(link => {
        link.addEventListener('click', function() {
            const targetPage = this.dataset.page;

            document.querySelectorAll('main.main-content').forEach(page => {
                page.classList.remove('active');
                page.style.display = 'none';
            });

            const targetMain = document.getElementById(`${targetPage}-page`);
            if (targetMain) {
                targetMain.classList.add('active');
                targetMain.style.display = 'block';
            }

            if (targetPage === 'budget') {
                initBudgetPage();
            }
        });
    });
});
async function loadSentimentModel() {
    const { pipeline } = window.transformers;
    const sentiment = await pipeline('sentiment-analysis');
    return sentiment;
}

async function updateAIAdvisorPage() {
    const year = new Date().getFullYear();

    // Load transactions from localStorage
    let transactions = JSON.parse(localStorage.getItem('transactions')) || [];

    if (!transactions || transactions.length === 0) {
        document.getElementById('ai-summary').textContent = 'âš  No transaction data available.';
        document.getElementById('ai-insights').textContent = '';
        document.getElementById('ai-advice-text').textContent = '';
        return;
    }

    const yearTransactions = transactions.filter(tx => {
        const txDate = new Date(tx.date);
        return txDate.getFullYear() === year;
    });

    const incomeTotal = yearTransactions.filter(tx => tx.type === 'income')
        .reduce((sum, tx) => sum + tx.amount, 0);
    const expenseTotal = yearTransactions.filter(tx => tx.type === 'expense')
        .reduce((sum, tx) => sum + tx.amount, 0);
    const balance = incomeTotal - expenseTotal;

    const categoryTotals = {};
    yearTransactions.filter(tx => tx.type === 'expense').forEach(tx => {
        categoryTotals[tx.category] = (categoryTotals[tx.category] || 0) + tx.amount;
    });
    const topCategory = Object.entries(categoryTotals).sort((a, b) => b[1] - a[1])[0]?.[0] || 'None';

    document.getElementById('ai-summary').textContent =
        `Total Income: â‚¹${incomeTotal.toFixed(2)}, Total Expenses: â‚¹${expenseTotal.toFixed(2)}, Balance: â‚¹${balance.toFixed(2)}`;

    document.getElementById('ai-insights').textContent =
        `Your top expense category this year is: ${topCategory}`;

    const userSummary = `My total income is â‚¹${incomeTotal}, total expenses are â‚¹${expenseTotal}, net savings â‚¹${balance}, and top expense category is ${topCategory}.`;

    document.getElementById('ai-advice-text').textContent = 'ðŸ” Running local sentiment analysis...';

    try {
        const sentimentModel = await loadSentimentModel();
        const result = await sentimentModel(userSummary);
        document.getElementById('ai-advice-text').textContent =
            `Sentiment: ${result[0].label} (confidence: ${(result[0].score * 100).toFixed(2)}%)`;
    } catch (error) {
        console.error('Error running sentiment model:', error);
        document.getElementById('ai-advice-text').textContent = 'âŒ Failed to analyze sentiment.';
    }
}
function generatePersonalizedAdvice(balance, incomeTotal, topCategory, expenseTotal, avgExpense, numTransactions, categoryTotals) {
    let advice = '';

    const savingsRate = balance / incomeTotal;
    const expenseRate = expenseTotal / incomeTotal;

    // ðŸŒŸ Savings advice
    if (savingsRate < 0.1) {
        advice += 'ðŸ’¡ <strong>Your savings rate is below 10%</strong>. Try to set aside a fixed amount each month to build an emergency fund.<br><br>';
    } else if (savingsRate < 0.3) {
        advice += 'âœ… <strong>You are saving moderately</strong>. Great! Consider increasing savings slightly for long-term goals.<br><br>';
    } else {
        advice += 'ðŸ† <strong>Excellent! Your savings rate is strong</strong>. Keep up the disciplined financial habits!<br><br>';
    }

    // ðŸ’¸ Spending advice
    if (expenseRate > 0.7) {
        advice += 'âš  <strong>You are spending over 70% of your income</strong>. Review subscriptions, utility bills, or luxury expenses.<br><br>';
    } else {
        advice += 'ðŸ‘Œ <strong>Your spending level is under control</strong> relative to your income.<br><br>';
    }

    // ðŸ“Š Top category advice
    const categoryLower = topCategory.toLowerCase();
    if (categoryLower === 'food') {
        advice += 'ðŸ½ <strong>Food is your largest expense</strong>. Plan meals at home, shop smart, and reduce takeouts.<br><br>';
    } else if (categoryLower === 'health') {
        advice += 'ðŸ’Š <strong>Health is your top expense</strong>. Check preventive care, wellness habits, or insurance coverage.<br><br>';
    } else if (categoryLower === 'shopping') {
        advice += 'ðŸ› <strong>Shopping tops your expenses</strong>. Set limits or use a wishlist delay system.<br><br>';
    } else if (categoryLower === 'transportation') {
        advice += 'ðŸš— <strong>Transportation is a big cost</strong>. Look into carpooling or fuel-efficient options.<br><br>';
    } else {
        advice += `ðŸ“Š <strong>Your top category is "${topCategory}"</strong>. Check if you can optimize costs.<br><br>`;
    }

    // ðŸŒŸ Extra points
    if (avgExpense > 5000) {
        advice += 'ðŸ’¸ <strong>Your average expense per transaction is high</strong>. Break big purchases into smaller steps.<br><br>';
    }
    if (numTransactions > 50) {
        advice += 'ðŸ“… <strong>Many transactions</strong>. Automate recurring bills or simplify payments.<br><br>';
    }
    if (incomeTotal < 20000) {
        advice += 'âš  <strong>Low income</strong>. Focus on essentials and explore income-boosting options.<br><br>';
    }
    if (categoryTotals['entertainment'] && categoryTotals['entertainment'] > expenseTotal * 0.2) {
        advice += 'ðŸŽ® <strong>High entertainment spending</strong>. Reduce non-essential fun spends.<br><br>';
    }
    if (balance <= 0) {
        advice += 'ðŸ”´ <strong>You are overspending!</strong> Set urgent savings goals.<br><br>';
    }
    if (balance > incomeTotal * 0.3) {
        advice += 'ðŸŒŸ <strong>Great job!</strong> You saved over 30%. Consider investing or growing savings.<br><br>';
    }

    return advice;
}

function updateAIAdvisorPage() {
    const year = new Date().getFullYear();
    const transactions = JSON.parse(localStorage.getItem('transactions')) || [];

    if (!transactions || transactions.length === 0) {
        document.getElementById('ai-summary').textContent = 'âš  No transaction data available.';
        document.getElementById('ai-insights').textContent = '';
        document.getElementById('ai-advice-text').innerHTML = '<span class="error-text">âŒ No advice available due to missing data.</span>';
        return;
    }

    const yearTransactions = transactions.filter(tx => new Date(tx.date).getFullYear() === year);

    const incomeTotal = yearTransactions.filter(tx => tx.type === 'income').reduce((sum, tx) => sum + tx.amount, 0);
    const expenseTotal = yearTransactions.filter(tx => tx.type === 'expense').reduce((sum, tx) => sum + tx.amount, 0);
    const balance = incomeTotal - expenseTotal;
    const numTransactions = yearTransactions.length;
    const avgExpense = expenseTotal / (yearTransactions.filter(tx => tx.type === 'expense').length || 1);

    const categoryTotals = {};
    yearTransactions.filter(tx => tx.type === 'expense').forEach(tx => {
        categoryTotals[tx.category] = (categoryTotals[tx.category] || 0) + tx.amount;
    });
    const topCategory = Object.entries(categoryTotals).sort((a, b) => b[1] - a[1])[0]?.[0] || 'None';

    document.getElementById('ai-summary').textContent =
        `Total Income: â‚¹${incomeTotal.toFixed(2)}, Total Expenses: â‚¹${expenseTotal.toFixed(2)}, Balance: â‚¹${balance.toFixed(2)}`;

    document.getElementById('ai-insights').textContent =
        `Your top expense category this year is: ${topCategory}`;

    const personalizedAdvice = generatePersonalizedAdvice(balance, incomeTotal, topCategory, expenseTotal, avgExpense, numTransactions, categoryTotals);

    document.getElementById('ai-advice-text').innerHTML =
        `<div class="advice-box">${personalizedAdvice}</div>`;
}

// Variables
let goalAmount = 100000;
let currentBalance = 0;
let monthlyExpenses = 20000;
let transactions = [];

// DOM Elements
const progressBar = document.getElementById('progress-bar');
const progressPercentage = document.getElementById('progress-percentage');
const currentBalanceDisplay = document.getElementById('current-balance');
const monthsCoveredDisplay = document.getElementById('months-covered');
const goalDisplay = document.getElementById('goal-display');
const goalAmountDisplay = document.getElementById('goal-amount-display');
const transactionHistory = document.getElementById('transaction-history');

// Inputs
const fundGoalInput = document.getElementById('fund-goal');
const monthlyExpensesInput = document.getElementById('monthly-expenses');
const currentSavingsInput = document.getElementById('current-savings');
const transactionAmountInput = document.getElementById('transaction-amount');
const transactionDateInput = document.getElementById('transaction-date');
const transactionNotesInput = document.getElementById('transaction-notes');

// Functions
function updateUI() {
  // Progress
  const percentage = Math.min(100, Math.round((currentBalance / goalAmount) * 100));
  progressBar.style.width = `${percentage}%`;
  progressPercentage.textContent = `${percentage}%`;

  // Balances
  currentBalanceDisplay.textContent = `â‚¹${currentBalance.toLocaleString()}`;
  monthsCoveredDisplay.textContent = monthlyExpenses > 0 ? (currentBalance / monthlyExpenses).toFixed(1) : '0';
  goalDisplay.textContent = `â‚¹${goalAmount.toLocaleString()}`;
  goalAmountDisplay.textContent = `â‚¹${goalAmount.toLocaleString()}`;

  // Transaction History
  transactionHistory.innerHTML = '';
  if (transactions.length === 0) {
    const row = document.createElement('tr');
    const cell = document.createElement('td');
    cell.colSpan = 4;
    cell.textContent = 'No transactions yet';
    row.appendChild(cell);
    transactionHistory.appendChild(row);
  } else {
    transactions.forEach(tx => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${tx.date}</td>
        <td>${tx.type}</td>
        <td>â‚¹${tx.amount.toLocaleString()}</td>
        <td>${tx.notes}</td>
      `;
      transactionHistory.appendChild(row);
    });
  }
}

function addTransaction(type) {
  const amount = parseFloat(transactionAmountInput.value);
  const date = transactionDateInput.value;
  const notes = transactionNotesInput.value.trim();

  if (!amount || amount <= 0) {
    alert('Please enter a valid amount.');
    return;
  }
  if (!date) {
    alert('Please select a date.');
    return;
  }

  if (type === 'Add') {
    currentBalance += amount;
  } else if (type === 'Withdraw') {
    if (amount > currentBalance) {
      alert('Insufficient funds.');
      return;
    }
    currentBalance -= amount;
  }

  transactions.unshift({
    date,
    type,
    amount,
    notes
  });

  // Clear inputs
  transactionAmountInput.value = '';
  transactionDateInput.value = '';
  transactionNotesInput.value = '';

  updateUI();
}

function updateGoals() {
  const newGoal = parseFloat(fundGoalInput.value);
  const newExpenses = parseFloat(monthlyExpensesInput.value);
  const newSavings = parseFloat(currentSavingsInput.value);

  if (!newGoal || newGoal <= 0 || !newExpenses || newExpenses <= 0 || newSavings < 0) {
    alert('Please enter valid values.');
    return;
  }

  goalAmount = newGoal;
  monthlyExpenses = newExpenses;
  currentBalance = newSavings;
  transactions = []; // Reset history

  updateUI();
}

// Event Listeners
document.getElementById('add-funds').addEventListener('click', () => addTransaction('Add'));
document.getElementById('withdraw-funds').addEventListener('click', () => addTransaction('Withdraw'));
document.getElementById('update-goals').addEventListener('click', updateGoals);

// Initialize
updateUI();

const yearTransactions = transactions.filter(tx => new Date(tx.date).getFullYear() === year);

const incomeTotal = yearTransactions.filter(tx => tx.type === 'income').reduce((sum, tx) => sum + tx.amount, 0);
const expenseTotal = yearTransactions.filter(tx => tx.type === 'expense').reduce((sum, tx) => sum + tx.amount, 0);
const balance = incomeTotal - expenseTotal;
const numTransactions = yearTransactions.length;
const avgExpense = expenseTotal / (yearTransactions.filter(tx => tx.type === 'expense').length || 1);

const categoryTotals = {};
yearTransactions.filter(tx => tx.type === 'expense').forEach(tx => {
    categoryTotals[tx.category] = (categoryTotals[tx.category] || 0) + tx.amount;
});
const topCategory = Object.entries(categoryTotals).sort((a, b) => b[1] - a[1])[0]?.[0] || 'None';

document.getElementById('ai-summary').textContent =
    `Total Income: â‚¹${incomeTotal.toFixed(2)}, Total Expenses: â‚¹${expenseTotal.toFixed(2)}, Balance: â‚¹${balance.toFixed(2)}`;

document.getElementById('ai-insights').textContent =
    `Your top expense category this year is: ${topCategory}`;

const personalizedAdvice = generatePersonalizedAdvice(balance, incomeTotal, topCategory, expenseTotal, avgExpense, numTransactions, categoryTotals);

document.getElementById('ai-advice-text').innerHTML =
    `<div class="advice-box">${personalizedAdvice}</div>`;


 // Tax calculation function
 function calculateTax() {
                // Get all income values
                const salary = parseFloat(document.getElementById('salary').value) || 0;
                const freelance = parseFloat(document.getElementById('freelance').value) || 0;
                const interest = parseFloat(document.getElementById('interest').value) || 0;
                const capitalGains = parseFloat(document.getElementById('capital-gains').value) || 0;
                const otherIncome = parseFloat(document.getElementById('other-income').value) || 0;
                
                // Get all deduction values
                const sec80c = Math.min(parseFloat(document.getElementById('80c').value) || 0, 150000);
                const sec80d = parseFloat(document.getElementById('80d').value) || 0;
                const sec80tta = Math.min(parseFloat(document.getElementById('80tta').value) || 0, 10000);
                const hra = parseFloat(document.getElementById('hra').value) || 0;
                const otherDeductions = parseFloat(document.getElementById('other-deductions').value) || 0;
                
                // Calculate totals
                const grossIncome = salary + freelance + interest + capitalGains + otherIncome;
                const totalDeductions = sec80c + sec80d + sec80tta + hra + otherDeductions + 50000; // Adding standard deduction
                
                // Check which regime is selected
                const isNewRegime = document.getElementById('regime-toggle').checked;
                
                // Calculate taxable income differently based on regime
                let taxableIncome;
                if (isNewRegime) {
                    taxableIncome = grossIncome - 50000; // Only standard deduction in new regime
                } else {
                    taxableIncome = grossIncome - totalDeductions;
                }
                
                // Calculate tax based on slabs
                let tax = 0;
                let slabs = [];
                
                if (isNewRegime) {
                    // New regime slabs (2023-24)
                    if (taxableIncome > 1500000) {
                        tax += (taxableIncome - 1500000) * 0.30;
                        taxableIncome = 1500000;
                        slabs.push({ range: 'Above â‚¹15L', rate: '30%', tax: (taxableIncome - 1500000) * 0.30 });
                    }
                    if (taxableIncome > 1200000) {
                        tax += (taxableIncome - 1200000) * 0.20;
                        taxableIncome = 1200000;
                        slabs.push({ range: 'â‚¹12Lâ€“â‚¹15L', rate: '20%', tax: (taxableIncome - 1200000) * 0.20 });
                    }
                    if (taxableIncome > 900000) {
                        tax += (taxableIncome - 900000) * 0.15;
                        taxableIncome = 900000;
                        slabs.push({ range: 'â‚¹9Lâ€“â‚¹12L', rate: '15%', tax: (taxableIncome - 900000) * 0.15 });
                    }
                    if (taxableIncome > 600000) {
                        tax += (taxableIncome - 600000) * 0.10;
                        taxableIncome = 600000;
                        slabs.push({ range: 'â‚¹6Lâ€“â‚¹9L', rate: '10%', tax: (taxableIncome - 600000) * 0.10 });
                    }
                    if (taxableIncome > 300000) {
                        tax += (taxableIncome - 300000) * 0.05;
                        slabs.push({ range: 'â‚¹3Lâ€“â‚¹6L', rate: '5%', tax: (taxableIncome - 300000) * 0.05 });
                    }
                } else {
                    // Old regime slabs (2023-24)
                    if (taxableIncome > 1000000) {
                        tax += (taxableIncome - 1000000) * 0.30;
                        taxableIncome = 1000000;
                        slabs.push({ range: 'Above â‚¹10L', rate: '30%', tax: (taxableIncome - 1000000) * 0.30 });
                    }
                    if (taxableIncome > 500000) {
                        tax += (taxableIncome - 500000) * 0.20;
                        taxableIncome = 500000;
                        slabs.push({ range: 'â‚¹5Lâ€“â‚¹10L', rate: '20%', tax: (taxableIncome - 500000) * 0.20 });
                    }
                    if (taxableIncome > 250000) {
                        tax += (taxableIncome - 250000) * 0.05;
                        slabs.push({ range: 'â‚¹2.5Lâ€“â‚¹5L', rate: '5%', tax: (taxableIncome - 250000) * 0.05 });
                    }
                }
                
                // Add cess (4%)
                tax += tax * 0.04;
                
                // Update UI
                document.getElementById('gross-income').textContent = 'â‚¹' + grossIncome.toLocaleString('en-IN');
                document.getElementById('total-deductions').textContent = 'â‚¹' + (isNewRegime ? 50000 : totalDeductions).toLocaleString('en-IN');
                document.getElementById('taxable-income').textContent = 'â‚¹' + (isNewRegime ? (grossIncome - 50000) : (grossIncome - totalDeductions)).toLocaleString('en-IN');
                document.getElementById('tax-liability').textContent = 'â‚¹' + Math.round(tax).toLocaleString('en-IN');
                
                const effectiveRate = (tax / grossIncome) * 100;
                document.getElementById('effective-rate').textContent = effectiveRate.toFixed(2) + '%';
                
                // Update tax slabs table
                const slabsBody = document.getElementById('slabs-body');
                slabsBody.innerHTML = '';
                slabs.forEach(slab => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-700">${slab.range}</td>
                        <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-700">${slab.rate}</td>
                        <td class="px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900">â‚¹${Math.round(slab.tax).toLocaleString('en-IN')}</td>
                    `;
                    slabsBody.appendChild(row);
                });
                
                // Show tax slabs
                document.getElementById('slabs-container').classList.remove('hidden');
                
                // Show tax tips if deductions are low
                const taxTips = document.getElementById('tax-tips');
                if (sec80c < 150000 || sec80d === 0) {
                    taxTips.classList.remove('hidden');
                } else {
                    taxTips.classList.add('hidden');
                }
                
                // Update chart
                updateChart(grossIncome, isNewRegime ? 50000 : totalDeductions, tax);
                
                return {
                    grossIncome,
                    totalDeductions,
                    taxableIncome: isNewRegime ? (grossIncome - 50000) : (grossIncome - totalDeductions),
                    tax,
                    isNewRegime
                };
            }
            
            // Chart initialization
            let taxChart;
            function initChart() {
                const ctx = document.getElementById('taxChart').getContext('2d');
                taxChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Gross Income', 'Deductions', 'Taxable Income', 'Tax Liability'],
                        datasets: [{
                            label: 'Amount (â‚¹)',
                            data: [0, 0, 0, 0],
                            backgroundColor: [
                                'rgba(54, 162, 235, 0.6)',
                                'rgba(75, 192, 192, 0.6)',
                                'rgba(255, 206, 86, 0.6)',
                                'rgba(255, 99, 132, 0.6)'
                            ],
                            borderColor: [
                                'rgba(54, 162, 235, 1)',
                                'rgba(75, 192, 192, 1)',
                                'rgba(255, 206, 86, 1)',
                                'rgba(255, 99, 132, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return 'â‚¹' + value.toLocaleString('en-IN');
                                    }
                                }
                            }
                        },
                        plugins: {
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return 'â‚¹' + context.raw.toLocaleString('en-IN');
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            function updateChart(grossIncome, deductions, tax) {
                const taxableIncome = grossIncome - deductions;
                taxChart.data.datasets[0].data = [grossIncome, deductions, taxableIncome, tax];
                taxChart.update();
            }
            
            // Event listeners
            document.getElementById('calculate-btn').addEventListener('click', calculateTax);
            
            document.getElementById('regime-toggle').addEventListener('change', function() {
                const description = document.getElementById('regime-description');
                if (this.checked) {
                    description.textContent = 'New regime has lower tax rates but fewer deductions. Choose if you have minimal investments.';
                } else {
                    description.textContent = 'Old regime allows all deductions but has higher tax rates. Choose based on your investment profile.';
                }
            });
            
            document.getElementById('compare-btn').addEventListener('click', function() {
                // Calculate for both regimes
                const currentRegime = document.getElementById('regime-toggle').checked;
                
                // Calculate with current regime
                document.getElementById('regime-toggle').checked = false;
                const oldRegimeResult = calculateTax();
                
                // Calculate with other regime
                document.getElementById('regime-toggle').checked = true;
                const newRegimeResult = calculateTax();
                
                // Restore original regime
                document.getElementById('regime-toggle').checked = currentRegime;
                
                // Update modal
                document.getElementById('old-regime-tax').textContent = 'â‚¹' + Math.round(oldRegimeResult.tax).toLocaleString('en-IN');
                document.getElementById('new-regime-tax').textContent = 'â‚¹' + Math.round(newRegimeResult.tax).toLocaleString('en-IN');
                
                let recommendation;
                if (oldRegimeResult.tax < newRegimeResult.tax) {
                    const savings = newRegimeResult.tax - oldRegimeResult.tax;
                    recommendation = `Based on your inputs, the <span class="font-medium">Old Regime</span> would save you approximately <span class="font-medium">â‚¹${Math.round(savings).toLocaleString('en-IN')}</span> more than the New Regime.`;
                } else {
                    const savings = oldRegimeResult.tax - newRegimeResult.tax;
                    recommendation = `Based on your inputs, the <span class="font-medium">New Regime</span> would save you approximately <span class="font-medium">â‚¹${Math.round(savings).toLocaleString('en-IN')}</span> more than the Old Regime.`;
                }
                
                document.getElementById('regime-recommendation').innerHTML = recommendation;
                
                // Show modal
                document.getElementById('comparison-modal').classList.remove('hidden');
            });
            
            document.getElementById('close-modal').addEventListener('click', function() {
                document.getElementById('comparison-modal').classList.add('hidden');
            });
            
            document.getElementById('apply-recommendation').addEventListener('click', function() {
                const oldRegimeTax = parseFloat(document.getElementById('old-regime-tax').textContent.replace(/[^0-9.]/g, ''));
                const newRegimeTax = parseFloat(document.getElementById('new-regime-tax').textContent.replace(/[^0-9.]/g, ''));
                
                document.getElementById('regime-toggle').checked = newRegimeTax < oldRegimeTax;
                document.getElementById('regime-toggle').dispatchEvent(new Event('change'));
                calculateTax();
                
                document.getElementById('comparison-modal').classList.add('hidden');
            });
            
            // Export buttons
            document.getElementById('export-pdf').addEventListener('click', function() {
                alert('PDF export functionality would be implemented here');
            });
            
            document.getElementById('export-csv').addEventListener('click', function() {
                alert('CSV export functionality would be implemented here');
            });
            
            document.getElementById('save-plan').addEventListener('click', function() {
                alert('Tax plan would be saved to user account (if logged in)');
            });
            
            // Initialize
            initChart();
            
            // Add animation to all slide-in elements
            const slideIns = document.querySelectorAll('.slide-in');
            slideIns.forEach((el, index) => {
                el.style.animationDelay = `${index * 0.1}s`;
            });
        
            
  document.addEventListener("DOMContentLoaded", function () {
    const modal = document.getElementById("comparison-modal");
    const compareBtn = document.getElementById("compare-regimes-btn");
    const closeBtn = document.getElementById("close-comparison");

    if (compareBtn && modal && closeBtn) {
      compareBtn.addEventListener("click", () => {
        modal.classList.add("show");
      });

      closeBtn.addEventListener("click", () => {
        modal.classList.remove("show");
      });
    }

    // Optionally: also close on outside click
    modal.addEventListener("click", (e) => {
      if (e.target === modal) {
        modal.classList.remove("show");
      }
    });
  });

  document.addEventListener('DOMContentLoaded', function() {
const transactions = JSON.parse(localStorage.getItem('transactions')) || [];

document.getElementById('apply-report-filter').addEventListener('click', () => {
    updateReportTable();
});

document.getElementById('download-report-btn').addEventListener('click', () => {
    const format = prompt('Download as "pdf" or "csv"?').toLowerCase();
    if (format === 'pdf' || format === 'csv') {
        exportReport(format);
    } else {
        alert('Invalid format! Please type "pdf" or "csv".');
    }
});

function updateReportTable() {
    const tbody = document.getElementById('report-table-body');
    tbody.innerHTML = '';

    const categoryFilter = document.getElementById('report-category-filter').value.toLowerCase();
    const dateFilter = document.getElementById('report-date-filter').value;

    const filtered = transactions.filter(tx => {
        const matchesCategory = categoryFilter === 'all' || tx.category.toLowerCase() === categoryFilter;
        const matchesDate = !dateFilter || tx.date.slice(0, 7) === dateFilter;
        return matchesCategory && matchesDate;
    });

    document.getElementById('report-summary-text').textContent =
        `Showing ${filtered.length} transaction(s)${categoryFilter !== 'all' ? ` in category "${categoryFilter}"` : ''}${dateFilter ? ` for ${dateFilter}` : ''}.`;

    if (filtered.length === 0) {
        tbody.innerHTML = '<tr><td colspan="5">No transactions found for selected filters.</td></tr>';
    } else {
        filtered.forEach(tx => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${tx.date}</td>
                <td>${tx.category}</td>
                <td>${tx.description}</td>
                <td>${tx.type}</td>
                <td>â‚¹${tx.amount.toFixed(2)}</td>
            `;
            tbody.appendChild(row);
        });
    }
}


function exportReport(format) {
    const categoryFilter = document.getElementById('report-category-filter').value.toLowerCase();
    const dateFilter = document.getElementById('report-date-filter').value;

    const filtered = transactions.filter(tx => {
        const matchesCategory = categoryFilter === 'all' || tx.category.toLowerCase() === categoryFilter;
        const matchesDate = !dateFilter || tx.date.slice(0, 7) === dateFilter;
        return matchesCategory && matchesDate;
    });

    if (filtered.length === 0) {
        alert('No transactions to export.');
        return;
    }

    if (format === 'csv') {
        const csv = convertToCSV(filtered);
        const blob = new Blob([csv], { type: 'text/csv' });
        const url = URL.createObjectURL(blob);
        downloadFile(url, 'report.csv');
    }

    if (format === 'pdf') {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        doc.text('Financial Report', 14, 15);

        const tableData = filtered.map(tx => [
            tx.date,
            tx.category,
            tx.description,
            tx.type,
            `â‚¹${tx.amount.toFixed(2)}`
        ]);

        doc.autoTable({
            head: [['Date', 'Category', 'Description', 'Type', 'Amount']],
            body: tableData,
            startY: 25,
        });

        doc.save('report.pdf');
    }
}

function convertToCSV(data) {
    const header = ['Date', 'Category', 'Description', 'Type', 'Amount'];
    const rows = data.map(tx => [
        tx.date,
        tx.category,
        tx.description,
        tx.type,
        tx.amount
    ]);
    return [header, ...rows].map(e => e.join(',')).join('\n');
}

function downloadFile(url, filename) {
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}
});
document.addEventListener('DOMContentLoaded', function() {
    // Initialize loan data from localStorage
    let loans = JSON.parse(localStorage.getItem('loans')) || [];
    let payments = JSON.parse(localStorage.getItem('loanPayments')) || [];
    let selectedLoanId = null;
    
    // Initialize charts
    let loanDistributionChart = null;
    let interestPrincipalChart = null;
    
    // DOM Elements
    const loanForm = document.getElementById('loan-form');
    const loansList = document.getElementById('loans-list');
    const paymentForm = document.getElementById('payment-form');
    const paymentModal = document.getElementById('payment-modal');
    const closeModalBtn = document.querySelector('.close-modal');
    const paymentLoanSelect = document.getElementById('payment-loan');
    const amortizationTable = document.getElementById('amortization-table').querySelector('tbody');
    const paymentHistoryTable = document.getElementById('payment-history-table').querySelector('tbody');
    
    // Initialize the page
    updateLoansList();
    updateStats();
    updatePaymentHistory();
    populateLoanSelect();
    
    // Event Listeners
    loanForm.addEventListener('submit', handleLoanSubmit);
    paymentForm.addEventListener('submit', handlePaymentSubmit);
    closeModalBtn.addEventListener('click', () => paymentModal.classList.remove('active'));
    paymentModal.addEventListener('click', (e) => {
        if (e.target === paymentModal) paymentModal.classList.remove('active');
    });
    
    // Time period toggle
    document.querySelectorAll('.time-period-toggle button').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.time-period-toggle button').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            updateStats();
        });
    });
    
    // Compare loans button
    document.getElementById('compare-loans-btn').addEventListener('click', compareLoans);
    
    // Functions
    function handleLoanSubmit(e) {
        e.preventDefault();
        
        const newLoan = {
            id: Date.now(),
            name: document.getElementById('loan-name').value,
            type: document.getElementById('loan-type').value,
            amount: parseFloat(document.getElementById('loan-amount').value),
            interestRate: parseFloat(document.getElementById('interest-rate').value),
            term: parseInt(document.getElementById('loan-term').value),
            startDate: document.getElementById('start-date').value,
            paymentFrequency: document.getElementById('payment-frequency').value,
            remainingBalance: parseFloat(document.getElementById('loan-amount').value),
            payments: []
        };
        
        loans.push(newLoan);
        saveLoans();
        updateLoansList();
        updateStats();
        populateLoanSelect();
        loanForm.reset();
    }
    function initLoanManagerPage() {
    // Initialize loan data from localStorage
    let loans = JSON.parse(localStorage.getItem('loans')) || [];
    let payments = JSON.parse(localStorage.getItem('loanPayments')) || [];
    
    // Update the UI
    updateLoansList();
    updateStats();
    updatePaymentHistory();
    populateLoanSelect();
    
    // Initialize charts
    updateCharts();
    
    // If you have any loan selected, update its amortization schedule
    if (selectedLoanId) {
        const loan = loans.find(l => l.id === selectedLoanId);
        if (loan) {
            updateAmortizationSchedule(loan);
        }
    } else {
        amortizationTable.innerHTML = '<tr><td colspan="6" class="no-loan-selected">No loan selected</td></tr>';
    }
}
    function handlePaymentSubmit(e) {
        e.preventDefault();
        
        const loanId = parseInt(paymentLoanSelect.value);
        const loan = loans.find(l => l.id === loanId);
        
        if (!loan) return;
        
        const payment = {
            id: Date.now(),
            loanId: loanId,
            amount: parseFloat(document.getElementById('payment-amount').value),
            date: document.getElementById('payment-date').value,
            type: document.getElementById('payment-type').value,
            notes: document.getElementById('payment-notes').value
        };
        
        payments.push(payment);
        loan.payments.push(payment);
        
        // Update remaining balance (simplified calculation)
        if (payment.type === 'regular' || payment.type === 'extra') {
            loan.remainingBalance = Math.max(0, loan.remainingBalance - payment.amount);
        }
        
        saveLoans();
        savePayments();
        updateLoansList();
        updateStats();
        updatePaymentHistory();
        
        if (selectedLoanId === loanId) {
            updateAmortizationSchedule(loan);
        }
        
        paymentForm.reset();
        paymentModal.classList.remove('active');
    }
    
    function updateLoansList() {
        loansList.innerHTML = '';
        
        if (loans.length === 0) {
            loansList.innerHTML = '<div class="empty-message">No loans added yet. Add your first loan above.</div>';
            return;
        }
        
        loans.forEach(loan => {
            const paid = loan.amount - loan.remainingBalance;
            const progress = (paid / loan.amount) * 100;
            
            const loanItem = document.createElement('div');
            loanItem.className = `loan-item ${selectedLoanId === loan.id ? 'active' : ''}`;
            loanItem.dataset.id = loan.id;
            loanItem.innerHTML = `
                <div class="loan-item-header">
                    <span>${loan.name}</span>
                    <span>â‚¹${loan.amount.toLocaleString()}</span>
                </div>
                <div class="loan-item-details">
                    <span>${loan.type}</span>
                    <span>${loan.interestRate}%</span>
                    <span>${loan.term} months</span>
                </div>
                <div class="progress-container" style="margin-top: 10px;">
                    <div class="progress-bar-bg">
                        <div class="progress-bar-fill" style="width: ${progress}%"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 12px;">
                        <span>â‚¹${paid.toLocaleString()} paid</span>
                        <span>â‚¹${loan.remainingBalance.toLocaleString()} left</span>
                    </div>
                </div>
                <div class="loan-actions" style="margin-top: 10px; display: flex; gap: 10px;">
                    <button class="action-btn" onclick="event.stopPropagation(); recordPayment(${loan.id})">Add Payment</button>
                    <button class="action-btn" onclick="event.stopPropagation(); deleteLoan(${loan.id})">Delete</button>
                </div>
            `;
            
            loanItem.addEventListener('click', () => selectLoan(loan.id));
            loansList.appendChild(loanItem);
        });
    }
    
    function selectLoan(loanId) {
        selectedLoanId = loanId;
        updateLoansList();
        
        const loan = loans.find(l => l.id === loanId);
        if (loan) {
            updateAmortizationSchedule(loan);
            updatePaymentHistory();
        }
    }
    
    function updateAmortizationSchedule(loan) {
        amortizationTable.innerHTML = '';
        
        if (!loan) {
            amortizationTable.innerHTML = '<tr><td colspan="6" class="no-loan-selected">No loan selected</td></tr>';
            return;
        }
        
        // Calculate amortization schedule
        const monthlyRate = loan.interestRate / 100 / 12;
        const paymentCount = loan.term;
        const monthlyPayment = (loan.amount * monthlyRate) / (1 - Math.pow(1 + monthlyRate, -paymentCount));
        
        let balance = loan.amount;
        let totalInterest = 0;
        let date = new Date(loan.startDate);
        
        for (let i = 1; i <= paymentCount; i++) {
            const interest = balance * monthlyRate;
            const principal = monthlyPayment - interest;
            balance -= principal;
            totalInterest += interest;
            
            // Adjust for final payment
            if (i === paymentCount) {
                balance = 0;
            }
            
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${i}</td>
                <td>${date.toLocaleDateString()}</td>
                <td>â‚¹${monthlyPayment.toFixed(2)}</td>
                <td>â‚¹${principal.toFixed(2)}</td>
                <td>â‚¹${interest.toFixed(2)}</td>
                <td>â‚¹${Math.max(0, balance).toFixed(2)}</td>
            `;
            
            amortizationTable.appendChild(row);
            
            // Increment date by 1 month
            date.setMonth(date.getMonth() + 1);
        }
    }
    
    function updatePaymentHistory() {
        paymentHistoryTable.innerHTML = '';
        
        if (payments.length === 0) {
            paymentHistoryTable.innerHTML = '<tr><td colspan="4">No payments recorded yet</td></tr>';
            return;
        }
        
        // Filter payments if a loan is selected
        const filteredPayments = selectedLoanId 
            ? payments.filter(p => p.loanId === selectedLoanId)
            : payments;
            
        if (filteredPayments.length === 0) {
            paymentHistoryTable.innerHTML = '<tr><td colspan="4">No payments for selected loan</td></tr>';
            return;
        }
        
        // Sort by date (newest first)
        filteredPayments.sort((a, b) => new Date(b.date) - new Date(a.date));
        
        // Show only recent payments
        const recentPayments = filteredPayments.slice(0, 5);
        
        recentPayments.forEach(payment => {
            const loan = loans.find(l => l.id === payment.loanId);
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${new Date(payment.date).toLocaleDateString()}</td>
                <td>â‚¹${payment.amount.toFixed(2)}</td>
                <td>${loan ? loan.name : 'Unknown Loan'}</td>
                <td>${payment.type}</td>
            `;
            paymentHistoryTable.appendChild(row);
        });
    }
    
    function updateStats() {
        // Update basic stats
        document.getElementById('total-loans').textContent = loans.length;
        
        const totalOwed = loans.reduce((sum, loan) => sum + loan.remainingBalance, 0);
        document.getElementById('total-owed').textContent = `â‚¹${totalOwed.toLocaleString()}`;
        
        const totalInterest = loans.reduce((sum, loan) => {
            const monthlyRate = loan.interestRate / 100 / 12;
            const paymentCount = loan.term;
            const monthlyPayment = (loan.amount * monthlyRate) / (1 - Math.pow(1 + monthlyRate, -paymentCount));
            return sum + (monthlyPayment * paymentCount - loan.amount);
        }, 0);
        
        document.getElementById('total-interest').textContent = `â‚¹${totalInterest.toLocaleString('en-IN', {maximumFractionDigits: 0})}`;
        
        // Update outstanding balance based on selected period
        const period = document.querySelector('.time-period-toggle button.active').dataset.period;
        updateOutstandingBalance(period);
        
        // Update charts
        updateCharts();
    }
    
    function updateOutstandingBalance(period) {
        let principalRemaining = 0;
        let interestRemaining = 0;
        
        loans.forEach(loan => {
            const monthlyRate = loan.interestRate / 100 / 12;
            const paymentCount = loan.term;
            const monthlyPayment = (loan.amount * monthlyRate) / (1 - Math.pow(1 + monthlyRate, -paymentCount));
            
            // Calculate remaining payments based on period
            let remainingPayments = 0;
            
            if (period === 'monthly') {
                remainingPayments = 1;
            } else if (period === 'yearly') {
                remainingPayments = 12;
            } else {
                // Total remaining
                const paidAmount = loan.amount - loan.remainingBalance;
                const paidPayments = Math.floor((paidAmount / loan.amount) * loan.term);
                remainingPayments = loan.term - paidPayments;
            }
            
            // Calculate principal and interest for remaining payments
            let balance = loan.remainingBalance;
            let periodInterest = 0;
            let periodPrincipal = 0;
            
            for (let i = 0; i < remainingPayments && balance > 0; i++) {
                const interest = balance * monthlyRate;
                const principal = Math.min(monthlyPayment - interest, balance);
                
                periodInterest += interest;
                periodPrincipal += principal;
                balance -= principal;
            }
            
            principalRemaining += periodPrincipal;
            interestRemaining += periodInterest;
        });
        
        document.getElementById('principal-remaining').textContent = `â‚¹${principalRemaining.toFixed(2)}`;
        document.getElementById('interest-remaining').textContent = `â‚¹${interestRemaining.toFixed(2)}`;
        document.getElementById('total-remaining').textContent = `â‚¹${(principalRemaining + interestRemaining).toFixed(2)}`;
    }
    
    function updateCharts() {
        // Loan Distribution Chart
        const loanTypes = {};
        loans.forEach(loan => {
            loanTypes[loan.type] = (loanTypes[loan.type] || 0) + loan.remainingBalance;
        });
        
        const loanCtx = document.getElementById('loan-distribution-chart').getContext('2d');
        
        if (loanDistributionChart) {
            loanDistributionChart.destroy();
        }
        
        loanDistributionChart = new Chart(loanCtx, {
            type: 'doughnut',
            data: {
                labels: Object.keys(loanTypes),
                datasets: [{
                    data: Object.values(loanTypes),
                    backgroundColor: [
                        '#3498db',
                        '#2ecc71',
                        '#e74c3c',
                        '#f39c12',
                        '#9b59b6',
                        '#1abc9c'
                    ]
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });
        
        // Interest vs Principal Chart
        let totalPrincipal = 0;
        let totalInterest = 0;
        
        loans.forEach(loan => {
            const monthlyRate = loan.interestRate / 100 / 12;
            const paymentCount = loan.term;
            const monthlyPayment = (loan.amount * monthlyRate) / (1 - Math.pow(1 + monthlyRate, -paymentCount));
            
            totalPrincipal += loan.amount;
            totalInterest += (monthlyPayment * paymentCount - loan.amount);
        });
        
        const interestCtx = document.getElementById('interest-principal-chart').getContext('2d');
        
        if (interestPrincipalChart) {
            interestPrincipalChart.destroy();
        }
        
        interestPrincipalChart = new Chart(interestCtx, {
            type: 'bar',
            data: {
                labels: ['Principal', 'Interest'],
                datasets: [{
                    label: 'Amount',
                    data: [totalPrincipal, totalInterest],
                    backgroundColor: [
                        '#3498db',
                        '#e74c3c'
                    ]
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    }
    
    function populateLoanSelect() {
        paymentLoanSelect.innerHTML = '<option value="">Select loan</option>';
        
        loans.forEach(loan => {
            const option = document.createElement('option');
            option.value = loan.id;
            option.textContent = `${loan.name} (â‚¹${loan.remainingBalance.toFixed(2)} remaining)`;
            paymentLoanSelect.appendChild(option);
        });
    }
    
    function compareLoans() {
        const amount1 = parseFloat(document.getElementById('compare-amount1').value) || 0;
        const rate1 = parseFloat(document.getElementById('compare-rate1').value) || 0;
        const term1 = parseInt(document.getElementById('compare-term1').value) || 0;
        
        const amount2 = parseFloat(document.getElementById('compare-amount2').value) || 0;
        const rate2 = parseFloat(document.getElementById('compare-rate2').value) || 0;
        const term2 = parseInt(document.getElementById('compare-term2').value) || 0;
        
        if (!amount1 || !rate1 || !term1 || !amount2 || !rate2 || !term2) {
            alert('Please fill all fields for both loan options');
            return;
        }
        
        // Calculate monthly payments
        const monthlyRate1 = rate1 / 100 / 12;
        const monthlyPayment1 = (amount1 * monthlyRate1) / (1 - Math.pow(1 + monthlyRate1, -term1));
        const totalCost1 = monthlyPayment1 * term1;
        
        const monthlyRate2 = rate2 / 100 / 12;
        const monthlyPayment2 = (amount2 * monthlyRate2) / (1 - Math.pow(1 + monthlyRate2, -term2));
        const totalCost2 = monthlyPayment2 * term2;
        
        // Calculate savings if any
        let savingsMessage = '';
        if (totalCost1 < totalCost2) {
            const savings = totalCost2 - totalCost1;
            savingsMessage = `Option 1 saves you â‚¹${savings.toFixed(2)} over the loan term.`;
        } else if (totalCost2 < totalCost1) {
            const savings = totalCost1 - totalCost2;
            savingsMessage = `Option 2 saves you â‚¹${savings.toFixed(2)} over the loan term.`;
        } else {
            savingsMessage = 'Both options cost the same over the loan term.';
        }
        
        // Display results
        const resultsDiv = document.getElementById('comparison-results');
        resultsDiv.innerHTML = `
            <h4>Comparison Results</h4>
            <div class="comparison-result">
                <span>Monthly Payment:</span>
                <span>Option 1: â‚¹${monthlyPayment1.toFixed(2)} vs Option 2: â‚¹${monthlyPayment2.toFixed(2)}</span>
            </div>
            <div class="comparison-result">
                <span>Total Interest:</span>
                <span>Option 1: â‚¹${(totalCost1 - amount1).toFixed(2)} vs Option 2: â‚¹${(totalCost2 - amount2).toFixed(2)}</span>
            </div>
            <div class="comparison-result">
                <span>Total Cost:</span>
                <span>Option 1: â‚¹${totalCost1.toFixed(2)} vs Option 2: â‚¹${totalCost2.toFixed(2)}</span>
            </div>
            <div class="comparison-result" style="font-weight: bold;">
                <span>Savings:</span>
                <span>${savingsMessage}</span>
            </div>
        `;
    }
    
    function saveLoans() {
        localStorage.setItem('loans', JSON.stringify(loans));
    }
    
    function savePayments() {
        localStorage.setItem('loanPayments', JSON.stringify(payments));
    }
    
    // Global functions for buttons
    window.recordPayment = function(loanId) {
        const loan = loans.find(l => l.id === loanId);
        if (loan) {
            paymentLoanSelect.value = loanId;
            paymentModal.classList.add('active');
        }
    };
    
    window.deleteLoan = function(loanId) {
        if (confirm('Are you sure you want to delete this loan?')) {
            loans = loans.filter(l => l.id !== loanId);
            payments = payments.filter(p => p.loanId !== loanId);
            
            if (selectedLoanId === loanId) {
                selectedLoanId = null;
            }
            
            saveLoans();
            savePayments();
            updateLoansList();
            updateStats();
            updatePaymentHistory();
            populateLoanSelect();
            
            if (!selectedLoanId) {
                amortizationTable.innerHTML = '<tr><td colspan="6" class="no-loan-selected">No loan selected</td></tr>';
            }
        }
    };
});

// Initialize when loan manager page is shown
document.querySelectorAll('.nav-menu a').forEach(link => {
    link.addEventListener('click', function() {
        if (this.dataset.page === 'loanmanager') {
            // Refresh loan data when navigating to loan manager
            const loans = JSON.parse(localStorage.getItem('loans')) || [];
            const payments = JSON.parse(localStorage.getItem('loanPayments')) || [];
            
            // Update UI
            updateLoansList();
            updateStats();
            updatePaymentHistory();
            populateLoanSelect();
        }
    });
});

document.addEventListener('DOMContentLoaded', function () {
    let subscriptions = JSON.parse(localStorage.getItem('subscriptions')) || [];
    let editId = null;
    let categoryChart = null;
    let trendChart = null;

    const addSubscriptionBtn = document.getElementById('add-subscription-btn');
    const subscriptionModal = document.getElementById('subscription-modal');
    const closeModal = subscriptionModal.querySelector('.close');
    const subscriptionForm = document.getElementById('subscription-form');
    const subscriptionList = document.getElementById('subscription-list');
    const searchInput = document.getElementById('subscription-search');
    const categoryFilter = document.getElementById('category-filter');
    const sortBy = document.getElementById('sort-by');

    addSubscriptionBtn.addEventListener('click', () => {
        editId = null;
        document.getElementById('modal-title').textContent = 'Add Subscription';
        subscriptionForm.reset();

        const today = new Date().toISOString().split('T')[0];
        document.getElementById('start-date').value = today;
        document.getElementById('next-billing').value = today;

        subscriptionModal.style.display = 'block';
    });

    closeModal.addEventListener('click', () => {
        subscriptionModal.style.display = 'none';
    });

    window.addEventListener('click', (e) => {
        if (e.target === subscriptionModal) {
            subscriptionModal.style.display = 'none';
        }
    });

   subscriptionForm.addEventListener('submit', (e) => {
    e.preventDefault();

    try {
        const subscription = {
            id: editId || Date.now().toString(),
            name: document.getElementById('subscription-name').value,
            category: document.getElementById('subscription-category').value,
            cost: parseFloat(document.getElementById('subscription-cost').value),
            billingCycle: document.getElementById('billing-cycle').value,
            startDate: document.getElementById('start-date').value,
            nextBilling: document.getElementById('next-billing').value,
            autoRenew: document.getElementById('auto-renew').checked,
            paymentMethod: document.getElementById('payment-method').value,
            reminderDays: document.getElementById('reminder-days').value
        };

        if (editId) {
            const index = subscriptions.findIndex(sub => sub.id === editId);
            if (index !== -1) subscriptions[index] = subscription;
        } else {
            subscriptions.push(subscription);
        }

        saveSubscriptions();
        subscriptionForm.reset();

        // âœ… Force-close modal
        subscriptionModal.style.display = 'none';
        console.log("Modal closed successfully");

    } catch (error) {
        console.error("Submission error:", error);
        // Fallback close
        subscriptionModal.style.display = 'none';
    }
});

    function saveSubscriptions() {
        localStorage.setItem('subscriptions', JSON.stringify(subscriptions));
        updateUI();
        updateCalendar();
        updateCharts();
        updateSummary();
        checkReminders();
        updateOptimizationTips();
    }

    function updateUI() {
        let filteredSubs = [...subscriptions];
        const searchTerm = searchInput.value.toLowerCase();
        const category = categoryFilter.value;
        const sortValue = sortBy.value;

        if (searchTerm) {
            filteredSubs = filteredSubs.filter(sub => sub.name.toLowerCase().includes(searchTerm));
        }

        if (category !== 'all') {
            filteredSubs = filteredSubs.filter(sub => sub.category === category);
        }

        if (sortValue === 'name') {
            filteredSubs.sort((a, b) => a.name.localeCompare(b.name));
        } else if (sortValue === 'cost') {
            filteredSubs.sort((a, b) => b.cost - a.cost);
        } else if (sortValue === 'date') {
            filteredSubs.sort((a, b) => new Date(a.nextBilling) - new Date(b.nextBilling));
        }

        subscriptionList.innerHTML = '';

        if (filteredSubs.length === 0) {
            subscriptionList.innerHTML = '<p class="no-subscriptions">No subscriptions found. Add one to get started!</p>';
            return;
        }

        filteredSubs.forEach(sub => {
            const subItem = document.createElement('div');
            subItem.className = 'subscription-item';
            subItem.innerHTML = `
                <div class="subscription-info">
                    <h3>${sub.name}</h3>
                    <div class="subscription-meta">
                        <span>â‚¹${sub.cost.toFixed(2)}/${sub.billingCycle}</span>
                        <span>${formatCategory(sub.category)}</span>
                        <span>Next billing: ${formatDate(sub.nextBilling)}</span>
                        <span>${sub.autoRenew ? 'Auto-renew ON' : 'Auto-renew OFF'}</span>
                    </div>
                </div>
                <div class="subscription-actions">
                    <button class="btn-edit" data-id="${sub.id}">Edit</button>
                    <button class="btn-delete" data-id="${sub.id}">Delete</button>
                </div>
            `;
            subscriptionList.appendChild(subItem);
        });

        document.querySelectorAll('.btn-edit').forEach(btn => {
            btn.addEventListener('click', e => {
                const id = e.target.dataset.id;
                editSubscription(id);
            });
        });

        document.querySelectorAll('.btn-delete').forEach(btn => {
            btn.addEventListener('click', e => {
                const id = e.target.dataset.id;
                deleteSubscription(id);
            });
        });
    }

    function editSubscription(id) {
        const sub = subscriptions.find(sub => sub.id === id);
        if (!sub) return;

        editId = id;
        document.getElementById('modal-title').textContent = 'Edit Subscription';
        document.getElementById('subscription-id').value = sub.id;
        document.getElementById('subscription-name').value = sub.name;
        document.getElementById('subscription-category').value = sub.category;
        document.getElementById('subscription-cost').value = sub.cost;
        document.getElementById('billing-cycle').value = sub.billingCycle;
        document.getElementById('start-date').value = sub.startDate;
        document.getElementById('next-billing').value = sub.nextBilling;
        document.getElementById('auto-renew').checked = sub.autoRenew;
        document.getElementById('payment-method').value = sub.paymentMethod;
        document.getElementById('reminder-days').value = sub.reminderDays;

        subscriptionModal.style.display = 'block';
    }

    function deleteSubscription(id) {
        if (confirm('Are you sure you want to delete this subscription?')) {
            subscriptions = subscriptions.filter(sub => sub.id !== id);
            saveSubscriptions();
        }
    }

   let calendar = null;

function updateCalendar() {
    const calendarEl = document.getElementById('subscription-calendar');
    if (!calendarEl) return;

    const events = subscriptions.map(sub => ({
        title: sub.name,
        start: sub.nextBilling,
        color: getCategoryColor(sub.category)
    }));

    if (calendar) {
        calendar.destroy(); // reset if re-rendering
    }

    calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        height: 400,
        events: events,
        headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,listMonth'
        }
    });

    calendar.render();
}

    function updateSummary() {
        const activeCount = subscriptions.length;
        const monthlyCost = subscriptions.reduce((sum, sub) => sum + (sub.billingCycle === 'monthly' ? sub.cost : sub.cost / 12), 0);
        const yearlyCost = subscriptions.reduce((sum, sub) => sum + (sub.billingCycle === 'yearly' ? sub.cost : sub.cost * 12), 0);

        let healthScore = 100;
        if (activeCount > 10) healthScore -= 30;
        else if (activeCount > 5) healthScore -= 15;
        if (monthlyCost > 3000) healthScore -= 30;
        else if (monthlyCost > 1500) healthScore -= 15;

        document.getElementById('active-count').textContent = activeCount;
        document.getElementById('monthly-cost').textContent = `â‚¹${monthlyCost.toFixed(2)}`;
        document.getElementById('yearly-cost').textContent = `â‚¹${yearlyCost.toFixed(2)}`;
        document.getElementById('health-score').textContent = `${Math.max(0, Math.min(100, healthScore))}/100`;
    }

    function updateCharts() {
        const categoryData = {};
        const monthlyData = Array(12).fill(0);
        const now = new Date();
        const year = now.getFullYear();

        subscriptions.forEach(sub => {
            categoryData[sub.category] = (categoryData[sub.category] || 0) + sub.cost;
            const billingDate = new Date(sub.nextBilling);
            if (billingDate.getFullYear() === year) {
                const month = billingDate.getMonth();
                monthlyData[month] += sub.billingCycle === 'monthly' ? sub.cost : sub.cost / 12;
            }
        });

        const catCtx = document.getElementById('category-chart')?.getContext('2d');
        const trendCtx = document.getElementById('trend-chart')?.getContext('2d');

        if (categoryChart && catCtx) categoryChart.destroy();
        if (trendChart && trendCtx) trendChart.destroy();

        if (catCtx) {
            categoryChart = new Chart(catCtx, {
                type: 'pie',
                data: {
                    labels: Object.keys(categoryData).map(formatCategory),
                    datasets: [{
                        data: Object.values(categoryData),
                        backgroundColor: Object.keys(categoryData).map(getCategoryColor)
                    }]
                },
                options: { responsive: true }
            });
        }

        if (trendCtx) {
            trendChart = new Chart(trendCtx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Monthly Cost',
                        data: monthlyData,
                        backgroundColor: 'rgba(54, 162, 235, 0.7)'
                    }]
                },
                options: { responsive: true }
            });
        }
    }

    function checkReminders() {
        const today = new Date();
        const reminderDaysList = [1, 3, 7];

        subscriptions.forEach(sub => {
            const next = new Date(sub.nextBilling);
            const daysLeft = Math.floor((next - today) / (1000 * 60 * 60 * 24));
            if (reminderDaysList.includes(daysLeft)) {
                if (Notification.permission === 'granted') {
                    new Notification(`Reminder: ${sub.name} renews in ${daysLeft} day(s)`);
                }
            }
        });
    }

    function updateOptimizationTips() {
        const tipsContainer = document.getElementById('tips-container');
        // tipsContainer.innerHTML = '';

        if (subscriptions.length === 0) {
            tipsContainer.innerHTML = '<p>Add subscriptions to get optimization tips.</p>';
            return;
        }

        const totalMonthly = subscriptions.reduce((sum, sub) =>
            sum + (sub.billingCycle === 'monthly' ? sub.cost : sub.cost / 12), 0);
        if (totalMonthly > 2000) {
            addTip(`You're spending â‚¹${totalMonthly.toFixed(2)} monthly. Review your subs.`);
        }

        const categoryCount = {};
        subscriptions.forEach(sub => {
            categoryCount[sub.category] = (categoryCount[sub.category] || 0) + 1;
        });

        for (const [cat, count] of Object.entries(categoryCount)) {
            if (count > 2) addTip(`You have ${count} ${formatCategory(cat)} subscriptions. Consider consolidating.`);
        }
    }

    function addTip(text) {
        const div = document.createElement('div');
        div.className = 'tip-item';
        div.textContent = text;
        document.getElementById('tips-container').appendChild(div);
    }

    function formatDate(dateString) {
        return new Date(dateString).toLocaleDateString('en-IN');
    }

    function formatCategory(cat) {
        return cat.charAt(0).toUpperCase() + cat.slice(1);
    }

    function getCategoryColor(category) {
        const colors = {
            streaming: '#FF6384', fitness: '#36A2EB', utility: '#FFCE56',
            membership: '#4BC0C0', software: '#9966FF', other: '#C9CBCF'
        };
        return colors[category] || '#C9CBCF';
    }

    searchInput.addEventListener('input', updateUI);
    categoryFilter.addEventListener('change', updateUI);
    sortBy.addEventListener('change', updateUI);

    if (Notification.permission !== 'granted' && Notification.permission !== 'denied') {
        Notification.requestPermission();
    }

    updateUI();
    updateCalendar();
    updateCharts();
    updateSummary();
    checkReminders();
    updateOptimizationTips();
});



                // API configuration
        const apiKey = 'UOGIATB8CPJGXZNU';
        let currentSymbol = 'IBM';
        let currentInterval = '5min';
        let priceChart = null;
        let volumeChart = null;
        
        // DOM elements
        const symbolInput = document.getElementById('symbolInput');
        const searchBtn = document.getElementById('searchBtn');
        const intervalBtns = document.querySelectorAll('.interval-btn');
        const stockSymbolEl = document.getElementById('stockSymbol');
        const currentPriceEl = document.getElementById('currentPrice');
        const changeAmountEl = document.getElementById('changeAmount');
        const changePercentEl = document.getElementById('changePercent');
        const dataTableBody = document.getElementById('dataTableBody');
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            fetchStockData(currentSymbol, currentInterval);
            
            // Event listeners
            searchBtn.addEventListener('click', function() {
                const symbol = symbolInput.value.trim().toUpperCase();
                if (symbol) {
                    currentSymbol = symbol;
                    fetchStockData(currentSymbol, currentInterval);
                }
            });
            
            intervalBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    intervalBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentInterval = this.dataset.interval;
                    fetchStockData(currentSymbol, currentInterval);
                });
            });
        });
        
        // Fetch stock data from Alpha Vantage API
        async function fetchStockData(symbol, interval) {
            try {
                stockSymbolEl.textContent = symbol;
                
                // Show loading state
                currentPriceEl.textContent = 'Loading...';
                changeAmountEl.textContent = '-';
                changePercentEl.textContent = '(-%)';
                
                const response = await fetch(
                    `https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${symbol}&interval=${interval}&apikey=${apiKey}`
                );
                
                const data = await response.json();
                
                if (data['Error Message']) {
                    throw new Error(data['Error Message']);
                }
                
                if (!data[`Time Series (${interval})`]) {
                    throw new Error('No time series data found');
                }
                
                processStockData(data, interval);
            } catch (error) {
                console.error('Error fetching stock data:', error);
                alert('Error fetching data: ' + error.message);
            }
        }
        
        // Process the stock data and update the UI
        function processStockData(data, interval) {
            const timeSeries = data[`Time Series (${interval})`];
            const timeSeriesArray = Object.entries(timeSeries);
            
            // Sort by date (newest first)
            timeSeriesArray.sort((a, b) => new Date(b[0]) - new Date(a[0]));
            
            // Get the latest data point
            const latestData = timeSeriesArray[0][1];
            const prevData = timeSeriesArray[1][1];
            
            const currentPrice = parseFloat(latestData['4. close']);
            const prevPrice = parseFloat(prevData['4. close']);
            const change = currentPrice - prevPrice;
            const changePercent = (change / prevPrice) * 100;
            
            // Update the stock info
            currentPriceEl.textContent = currentPrice.toFixed(2);
            currentPriceEl.className = 'stock-price ' + (change >= 0 ? 'price-up' : 'price-down');
            
            changeAmountEl.textContent = change >= 0 ? `+${change.toFixed(2)}` : change.toFixed(2);
            changePercentEl.textContent = change >= 0 ? `(+${changePercent.toFixed(2)}%)` : `(${changePercent.toFixed(2)}%)`;
            changeAmountEl.className = change >= 0 ? 'positive' : 'negative';
            changePercentEl.className = change >= 0 ? 'positive' : 'negative';
            
            // Prepare data for charts
            const labels = [];
            const prices = [];
            const volumes = [];
            
            // Get the last 20 data points for the chart
            const chartDataPoints = timeSeriesArray.slice(0, 20).reverse();
            
            chartDataPoints.forEach(([time, data]) => {
                labels.push(new Date(time).toLocaleTimeString());
                prices.push(parseFloat(data['4. close']));
                volumes.push(parseInt(data['5. volume']));
            });
            
            // Update charts
            updatePriceChart(labels, prices);
            updateVolumeChart(labels, volumes);
            
            // Update the data table
            updateDataTable(timeSeriesArray);
        }
        
        // Update the price chart
        function updatePriceChart(labels, prices) {
            const ctx = document.getElementById('priceChart').getContext('2d');
            
            if (priceChart) {
                priceChart.destroy();
            }
            
            // Determine line color based on price trend
            const lineColor = prices[prices.length - 1] >= prices[0] ? '#00c853' : '#ff1744';
            
            priceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Price',
                        data: prices,
                        borderColor: lineColor,
                        backgroundColor: 'rgba(0, 200, 83, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            beginAtZero: false
                        }
                    }
                }
            });
        }
        
        // Update the volume chart
        function updateVolumeChart(labels, volumes) {
            const ctx = document.getElementById('volumeChart').getContext('2d');
            
            if (volumeChart) {
                volumeChart.destroy();
            }
            
            volumeChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Volume',
                        data: volumes,
                        backgroundColor: 'rgba(41, 98, 255, 0.7)',
                        borderColor: 'rgba(41, 98, 255, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        // Update the data table
        function updateDataTable(timeSeriesArray) {
            dataTableBody.innerHTML = '';
            
            // Show the first 10 data points
            const displayData = timeSeriesArray.slice(0, 10);
            
            displayData.forEach(([time, data]) => {
                const row = document.createElement('tr');
                
                const open = parseFloat(data['1. open']).toFixed(2);
                const high = parseFloat(data['2. high']).toFixed(2);
                const low = parseFloat(data['3. low']).toFixed(2);
                const close = parseFloat(data['4. close']).toFixed(2);
                const volume = parseInt(data['5. volume']).toLocaleString();
                
                // Determine if price increased or decreased
                const prevClose = parseFloat(timeSeriesArray[timeSeriesArray.indexOf([time, data]) + 1]?.[1]?.['4. close']) || close;
                const priceChange = close - prevClose;
                
                row.innerHTML = `
                    <td>${new Date(time).toLocaleString()}</td>
                    <td>${open}</td>
                    <td>${high}</td>
                    <td>${low}</td>
                    <td class="${priceChange >= 0 ? 'positive' : 'negative'}">${close}</td>
                    <td>${volume}</td>
                `;
                
                dataTableBody.appendChild(row);
            });
        }

  



        document.addEventListener('DOMContentLoaded', function() {
    const sidebar = document.querySelector('.sidebar');
    const toggleBtn = document.querySelector('.hamburger-toggle');
    
    // Create hamburger toggle button if it doesn't exist
    if (!toggleBtn) {
        const newToggleBtn = document.createElement('button');
        newToggleBtn.className = 'hamburger-toggle';
        newToggleBtn.innerHTML = 'â˜°';
        newToggleBtn.onclick = function() {
            sidebar.classList.toggle('collapsed');
        };
        sidebar.appendChild(newToggleBtn);
    } else {
        toggleBtn.onclick = function() {
            sidebar.classList.toggle('collapsed');
        };
    }
    
    // Add data-tooltip attributes to nav items
    const navItems = document.querySelectorAll('.nav-menu li a');
    navItems.forEach(item => {
        const text = item.textContent.trim();
        item.setAttribute('data-tooltip', text);
    });
    
    // Mobile menu toggle
    const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
    if (mobileMenuBtn) {
        mobileMenuBtn.addEventListener('click', function() {
            sidebar.classList.toggle('active');
        });
    }
    
});

document.addEventListener('DOMContentLoaded', function() {
    // DOM Elements
    const addInsuranceBtn = document.getElementById('addInsuranceBtn');
    const floatingAddInsuranceBtn = document.getElementById('floatingAddInsuranceBtn');
    const insuranceModal = document.getElementById('insuranceModal');
    const closeModalBtn = insuranceModal.querySelector('.close');
    const insuranceForm = document.getElementById('insuranceForm');
    const insurancePoliciesList = document.getElementById('insurancePoliciesList');
    const insuranceSearch = document.getElementById('insuranceSearch');
    const insuranceTypeFilter = document.getElementById('insuranceTypeFilter');
    const insuranceSortBy = document.getElementById('insuranceSortBy');
    const activePoliciesCount = document.getElementById('activePoliciesCount');
    const monthlyPremium = document.getElementById('monthlyPremium');
    const annualPremium = document.getElementById('annualPremium');
    const coverageScore = document.getElementById('coverageScore');
    const modalTitle = document.querySelector('#insuranceModal .imodalContent h2');

    // Sample data for initial policies
    let policies = [
        {
            id: '1',
            name: 'Health Shield Plus',
            type: 'health',
            provider: 'Star Health',
            policyNumber: 'STH12345678',
            startDate: '2023-01-15',
            endDate: '2024-01-14',
            premium: 1200,
            frequency: 'monthly',
            coverage: 500000,
            beneficiaries: 'Self, Spouse, Children',
            notes: 'Covers hospitalization and critical illness',
            status: 'active'
        },
        {
            id: '2',
            name: 'Life Secure',
            type: 'life',
            provider: 'LIC',
            policyNumber: 'LIC87654321',
            startDate: '2022-05-20',
            endDate: '2042-05-19',
            premium: 15000,
            frequency: 'yearly',
            coverage: 1000000,
            beneficiaries: 'Spouse',
            notes: 'Term life insurance for 20 years',
            status: 'active'
        },
        {
            id: '3',
            name: 'Auto Protect',
            type: 'auto',
            provider: 'Bajaj Allianz',
            policyNumber: 'BAJ78901234',
            startDate: '2023-03-10',
            endDate: '2024-03-09',
            premium: 4500,
            frequency: 'yearly',
            coverage: 750000,
            beneficiaries: '',
            notes: 'Comprehensive car insurance',
            status: 'active'
        }
    ];

    // Chart instance variable
    let insuranceChart = null;

    // Initialize the page
    function init() {
        renderPolicies();
        updateSummaryCards();
        renderInsuranceChart();
        
        // Set today's date as default for start date
        document.getElementById('insuranceStartDate').valueAsDate = new Date();
    }

    // Modal functions
    function openModal() {
        insuranceModal.style.display = 'block';
        document.body.style.overflow = 'hidden';
    }

    function closeModal() {
        insuranceModal.style.display = 'none';
        document.body.style.overflow = 'auto';
        insuranceForm.reset();
        // Reset form mode to "add" when closing
        insuranceForm.removeAttribute('data-editing-id');
        modalTitle.textContent = 'Add Insurance Policy';
    }

    // Event listeners for modal
    addInsuranceBtn.addEventListener('click', function() {
        // Reset form when opening for new policy
        insuranceForm.reset();
        modalTitle.textContent = 'Add Insurance Policy';
        openModal();
    });
    
    floatingAddInsuranceBtn.addEventListener('click', function() {
        // Reset form when opening for new policy
        insuranceForm.reset();
        modalTitle.textContent = 'Add Insurance Policy';
        openModal();
    });
    
    closeModalBtn.addEventListener('click', closeModal);

    // Close modal when clicking outside
    window.addEventListener('click', function(event) {
        if (event.target === insuranceModal) {
            closeModal();
        }
    });

    // Form submission
    insuranceForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const isEditing = insuranceForm.hasAttribute('data-editing-id');
        const policyId = isEditing ? insuranceForm.getAttribute('data-editing-id') : Date.now().toString();
        
        // Create or update policy object
        const policy = {
            id: policyId,
            name: document.getElementById('insurancePolicyName').value,
            type: document.getElementById('insuranceType').value,
            provider: document.getElementById('insuranceProvider').value,
            policyNumber: document.getElementById('insurancePolicyNumber').value,
            startDate: document.getElementById('insuranceStartDate').value,
            endDate: document.getElementById('insuranceEndDate').value,
            premium: parseFloat(document.getElementById('insurancePremium').value),
            frequency: document.getElementById('insurancePremiumFrequency').value,
            coverage: parseFloat(document.getElementById('insuranceCoverageAmount').value),
            beneficiaries: document.getElementById('insuranceBeneficiaries').value,
            notes: document.getElementById('insuranceNotes').value,
            status: 'active'
        };
        
        if (isEditing) {
            // Update existing policy
            const index = policies.findIndex(p => p.id === policyId);
            if (index !== -1) {
                policies[index] = policy;
            }
        } else {
            // Add new policy
            policies.push(policy);
        }
        
        // Update UI
        renderPolicies();
        updateSummaryCards();
        renderInsuranceChart();
        
        // Close modal
        closeModal();
    });

    // Render policies list
    function renderPolicies(filteredPolicies = policies) {
        if (filteredPolicies.length === 0) {
            insurancePoliciesList.innerHTML = '<div class="empty-message">No policies match your search criteria.</div>';
            return;
        }
        
        // Clear current list
        insurancePoliciesList.innerHTML = '';
        
        // Sort policies based on selected option
        const sortBy = insuranceSortBy.value;
        let sortedPolicies = [...filteredPolicies];
        
        switch(sortBy) {
            case 'premium-asc':
                sortedPolicies.sort((a, b) => a.premium - b.premium);
                break;
            case 'premium-desc':
                sortedPolicies.sort((a, b) => b.premium - a.premium);
                break;
            case 'date-asc':
                sortedPolicies.sort((a, b) => new Date(a.startDate) - new Date(b.startDate));
                break;
            case 'date-desc':
                sortedPolicies.sort((a, b) => new Date(b.startDate) - new Date(a.startDate));
                break;
            default:
                // No sorting
                break;
        }
        
        // Create policy items
        sortedPolicies.forEach(policy => {
            const policyItem = document.createElement('div');
            policyItem.className = `insuranceItem ${policy.type}Insurance`;
            
            // Get icon based on type
            let icon;
            switch(policy.type) {
                case 'health': icon = 'fa-heartbeat'; break;
                case 'life': icon = 'fa-heart'; break;
                case 'auto': icon = 'fa-car'; break;
                case 'home': icon = 'fa-home'; break;
                case 'travel': icon = 'fa-suitcase'; break;
                default: icon = 'fa-shield-alt';
            }
            
            // Format dates
            const startDate = new Date(policy.startDate).toLocaleDateString();
            const endDate = policy.endDate ? new Date(policy.endDate).toLocaleDateString() : 'N/A';
            
            // Format premium frequency
            let frequencyDisplay = '';
            switch(policy.frequency) {
                case 'monthly': frequencyDisplay = '/mo'; break;
                case 'quarterly': frequencyDisplay = '/qtr'; break;
                case 'half-yearly': frequencyDisplay = '/6mo'; break;
                case 'yearly': frequencyDisplay = '/yr'; break;
                case 'one-time': frequencyDisplay = 'one-time'; break;
            }
            
            policyItem.innerHTML = `
                <div class="insuranceInfo">
                    <div class="insuranceIcon">
                        <i class="fas ${icon}"></i>
                    </div>
                    <div class="insuranceDetails">
                        <h3>${policy.name}</h3>
                        <p><i class="fas fa-building"></i> ${policy.provider} â€¢ <i class="fas fa-id-card"></i> ${policy.policyNumber}</p>
                        <p><i class="fas fa-calendar-day"></i> ${startDate} to ${endDate}</p>
                    </div>
                </div>
                <div class="insurancePremium">â‚¹${policy.premium.toLocaleString()} ${frequencyDisplay}</div>
                <div class="insuranceActions">
                    <button class="edit" data-id="${policy.id}"><i class="fas fa-edit"></i></button>
                    <button class="delete" data-id="${policy.id}"><i class="fas fa-trash"></i></button>
                </div>
            `;
            
            insurancePoliciesList.appendChild(policyItem);
        });
        
        // Add event listeners to edit and delete buttons
        document.querySelectorAll('.insuranceActions .edit').forEach(btn => {
            btn.addEventListener('click', function() {
                const policyId = this.getAttribute('data-id');
                editPolicy(policyId);
            });
        });
        
        document.querySelectorAll('.insuranceActions .delete').forEach(btn => {
            btn.addEventListener('click', function() {
                const policyId = this.getAttribute('data-id');
                deletePolicy(policyId);
            });
        });
    }

    // Edit policy
    function editPolicy(policyId) {
        const policy = policies.find(p => p.id === policyId);
        if (!policy) return;
        
        // Fill form with policy data
        document.getElementById('insurancePolicyName').value = policy.name;
        document.getElementById('insuranceType').value = policy.type;
        document.getElementById('insuranceProvider').value = policy.provider;
        document.getElementById('insurancePolicyNumber').value = policy.policyNumber;
        document.getElementById('insuranceStartDate').value = policy.startDate;
        document.getElementById('insuranceEndDate').value = policy.endDate;
        document.getElementById('insurancePremium').value = policy.premium;
        document.getElementById('insurancePremiumFrequency').value = policy.frequency;
        document.getElementById('insuranceCoverageAmount').value = policy.coverage;
        document.getElementById('insuranceBeneficiaries').value = policy.beneficiaries;
        document.getElementById('insuranceNotes').value = policy.notes;
        
        // Change form to update mode
        insuranceForm.setAttribute('data-editing-id', policyId);
        modalTitle.textContent = 'Edit Insurance Policy';
        
        openModal();
    }

    // Delete policy
    function deletePolicy(policyId) {
        if (confirm('Are you sure you want to delete this policy?')) {
            policies = policies.filter(p => p.id !== policyId);
            renderPolicies();
            updateSummaryCards();
            renderInsuranceChart();
        }
    }

    // Update summary cards
    function updateSummaryCards() {
        // Active policies count
        activePoliciesCount.textContent = policies.length;
        
        // Calculate monthly premium
        let totalMonthly = 0;
        policies.forEach(policy => {
            switch(policy.frequency) {
                case 'monthly': totalMonthly += policy.premium; break;
                case 'quarterly': totalMonthly += policy.premium / 3; break;
                case 'half-yearly': totalMonthly += policy.premium / 6; break;
                case 'yearly': totalMonthly += policy.premium / 12; break;
                case 'one-time': totalMonthly += 0; break; // One-time payments don't count toward monthly
            }
        });
        monthlyPremium.textContent = `â‚¹${totalMonthly.toLocaleString('en-IN', { maximumFractionDigits: 0 })}`;
        
        // Calculate annual premium
        let totalAnnual = 0;
        policies.forEach(policy => {
            switch(policy.frequency) {
                case 'monthly': totalAnnual += policy.premium * 12; break;
                case 'quarterly': totalAnnual += policy.premium * 4; break;
                case 'half-yearly': totalAnnual += policy.premium * 2; break;
                case 'yearly': totalAnnual += policy.premium; break;
                case 'one-time': totalAnnual += policy.premium; break;
            }
        });
        annualPremium.textContent = `â‚¹${totalAnnual.toLocaleString('en-IN', { maximumFractionDigits: 0 })}`;
        
        // Calculate coverage score
        const totalCoverage = policies.reduce((sum, policy) => sum + policy.coverage, 0);
        const score = Math.min(Math.floor(totalCoverage / 500000) * 10, 100);
        coverageScore.textContent = `${score}/100`;
    }

    // Render insurance chart
    function renderInsuranceChart() {
        const ctx = document.getElementById('insuranceChart').getContext('2d');
        
        // Destroy previous chart if it exists
        if (insuranceChart) {
            insuranceChart.destroy();
        }
        
        // Group by insurance type and calculate total premium for each type
        const typeData = {};
        policies.forEach(policy => {
            if (!typeData[policy.type]) {
                typeData[policy.type] = 0;
            }
            
            // Convert all premiums to annual equivalent for comparison
            let annualPremium;
            switch(policy.frequency) {
                case 'monthly': annualPremium = policy.premium * 12; break;
                case 'quarterly': annualPremium = policy.premium * 4; break;
                case 'half-yearly': annualPremium = policy.premium * 2; break;
                case 'yearly': annualPremium = policy.premium; break;
                case 'one-time': annualPremium = policy.premium; break;
                default: annualPremium = policy.premium;
            }
            
            typeData[policy.type] += annualPremium;
        });
        
        // Prepare data for chart
        const labels = Object.keys(typeData).map(type => {
            switch(type) {
                case 'health': return 'Health';
                case 'life': return 'Life';
                case 'auto': return 'Auto';
                case 'home': return 'Home';
                case 'travel': return 'Travel';
                case 'other': return 'Other';
                default: return type;
            }
        });
        
        const data = Object.values(typeData);
        
        // Colors for each type
        const backgroundColors = Object.keys(typeData).map(type => {
            switch(type) {
                case 'health': return '#2ec4b6';
                case 'life': return '#4361ee';
                case 'auto': return '#ff9e00';
                case 'home': return '#f72585';
                case 'travel': return '#4cc9f0';
                case 'other': return '#6c757d';
                default: return '#adb5bd';
            }
        });
        
        // Create the chart
        insuranceChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: labels,
                datasets: [{
                    data: data,
                    backgroundColor: backgroundColors,
                    borderWidth: 1,
                    hoverOffset: 10
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                            boxWidth: 12,
                            padding: 20,
                            font: {
                                family: "'Poppins', sans-serif",
                                size: 12
                            },
                            color: '#14213d'
                        }
                    },
                    tooltip: {
                        backgroundColor: '#14213d',
                        titleFont: {
                            family: "'Poppins', sans-serif",
                            size: 14,
                            weight: 'bold'
                        },
                        bodyFont: {
                            family: "'Poppins', sans-serif",
                            size: 12
                        },
                        callbacks: {
                            label: function(context) {
                                const label = context.label || '';
                                const value = context.raw || 0;
                                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                const percentage = Math.round((value / total) * 100);
                                return `${label}: â‚¹${value.toLocaleString()} (${percentage}%)`;
                            }
                        }
                    }
                },
                cutout: '65%',
                animation: {
                    animateScale: true,
                    animateRotate: true
                }
            }
        });
    }

    // Filter and search functionality
    function filterPolicies() {
        const searchTerm = insuranceSearch.value.toLowerCase();
        const typeFilter = insuranceTypeFilter.value;
        
        let filtered = policies.filter(policy => {
            const matchesSearch = 
                policy.name.toLowerCase().includes(searchTerm) ||
                policy.provider.toLowerCase().includes(searchTerm) ||
                policy.policyNumber.toLowerCase().includes(searchTerm);
            
            const matchesType = typeFilter === 'all' || policy.type === typeFilter;
            
            return matchesSearch && matchesType;
        });
        
        renderPolicies(filtered);
    }

    // Event listeners for filtering
    insuranceSearch.addEventListener('input', filterPolicies);
    insuranceTypeFilter.addEventListener('change', filterPolicies);
    insuranceSortBy.addEventListener('change', filterPolicies);

    // Initialize the page
    init();
});




  // Global variables to store financial data
let nwtFinancialData = {
    name: '',
    ageGroup: '30-40',
    assets: {
        cash: 0,
        investments: 0,
        realEstate: 0,
        otherAssets: 0
    },
    liabilities: {
        creditCards: 0,
        studentLoans: 0,
        mortgage: 0,
        otherDebts: 0
    },
    goal: {
        target: 0,
        timeframe: 5
    },
    history: []
};

// Age group benchmarks (simplified for demo)
const nwtAgeBenchmarks = {
    under30: { label: "Under 30", average: 50000, good: 100000 },
    '30-40': { label: "30-40", average: 150000, good: 300000 },
    '40-50': { label: "40-50", average: 250000, good: 500000 },
    '50plus': { label: "50+", average: 350000, good: 750000 }
};

// DOM elements
const nwtInputContainer = document.getElementById('nwt-inputContainer');
const nwtDashboardContainer = document.getElementById('nwt-dashboardContainer');
const nwtGenerateBtn = document.getElementById('nwt-generateDashboard');
const nwtEditDetailsBtn = document.getElementById('nwt-editDetailsBtn');
const nwtAddNewItemBtn = document.getElementById('nwt-addNewItemBtn');

// Chart instances
let nwtNetWorthTrendChart = null;
let nwtAssetsPieChart = null;
let nwtLiabilitiesPieChart = null;
let nwtRatioGaugeChart = null;
let nwtMonthlyChangeChart = null;
let nwtProjectionChart = null;

// Initialize the page
document.addEventListener('DOMContentLoaded', function() {
    // Set up event listeners
    nwtGenerateBtn.addEventListener('click', nwtGenerateDashboard);
    nwtEditDetailsBtn.addEventListener('click', nwtShowInputForm);
    nwtAddNewItemBtn.addEventListener('click', nwtAddNewItem);
    
    // Age group selector
    document.querySelectorAll('.nwt-age-group-selector .btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelector('.nwt-age-group-selector .btn.active').classList.remove('active');
            this.classList.add('active');
            nwtFinancialData.ageGroup = this.dataset.age;
        });
    });
    
    // Pre-populate with your data from the markdown
    document.getElementById('nwt-creditCardDebt').value = 20000;
    document.getElementById('nwt-studentLoans').value = 10000;
    document.getElementById('nwt-mortgageAmount').value = 200000;
    document.getElementById('nwt-otherDebts').value = 9000;
    document.getElementById('nwt-netWorthGoal').value = 10000000;
    document.getElementById('nwt-timeframe').value = 2;
});

// Generate the dashboard based on user inputs
function nwtGenerateDashboard() {
    // Get user inputs
    nwtFinancialData.name = document.getElementById('nwt-userName').value || 'User';
    nwtFinancialData.assets.cash = parseFloat(document.getElementById('nwt-cashAmount').value) || 0;
    nwtFinancialData.assets.investments = parseFloat(document.getElementById('nwt-investmentAmount').value) || 0;
    nwtFinancialData.assets.realEstate = parseFloat(document.getElementById('nwt-realEstateAmount').value) || 0;
    nwtFinancialData.assets.otherAssets = parseFloat(document.getElementById('nwt-otherAssetsAmount').value) || 0;
    
    nwtFinancialData.liabilities.creditCards = parseFloat(document.getElementById('nwt-creditCardDebt').value) || 0;
    nwtFinancialData.liabilities.studentLoans = parseFloat(document.getElementById('nwt-studentLoans').value) || 0;
    nwtFinancialData.liabilities.mortgage = parseFloat(document.getElementById('nwt-mortgageAmount').value) || 0;
    nwtFinancialData.liabilities.otherDebts = parseFloat(document.getElementById('nwt-otherDebts').value) || 0;
    
    nwtFinancialData.goal.target = parseFloat(document.getElementById('nwt-netWorthGoal').value) || 0;
    nwtFinancialData.goal.timeframe = parseFloat(document.getElementById('nwt-timeframe').value) || 5;
    
    // Generate historical data for demonstration
    nwtGenerateHistoricalData();
    
    // Update the dashboard view
    nwtUpdateDashboard();
    
    // Switch to dashboard view
    nwtInputContainer.style.display = 'none';
    nwtDashboardContainer.style.display = 'block';
    
    // Set dashboard title
    document.getElementById('nwt-dashboardTitle').textContent = `${nwtFinancialData.name}'s Net Worth Tracker`;
}

// Generate sample historical data based on current values
function nwtGenerateHistoricalData() {
    const currentNetWorth = nwtCalculateNetWorth();
    const months = 12;
    nwtFinancialData.history = [];
    
    // Generate monthly data with some random variation
    for (let i = 0; i < months; i++) {
        const monthValue = currentNetWorth * (0.8 + 0.4 * (i / months)) * (0.98 + Math.random() * 0.04);
        nwtFinancialData.history.push({
            month: i,
            value: Math.round(monthValue),
            date: new Date(new Date().setMonth(new Date().getMonth() - (months - i - 1)))
        });
    }
}

// Calculate current net worth
function nwtCalculateNetWorth() {
    const totalAssets = nwtFinancialData.assets.cash + nwtFinancialData.assets.investments + 
                      nwtFinancialData.assets.realEstate + nwtFinancialData.assets.otherAssets;
    const totalLiabilities = nwtFinancialData.liabilities.creditCards + nwtFinancialData.liabilities.studentLoans + 
                           nwtFinancialData.liabilities.mortgage + nwtFinancialData.liabilities.otherDebts;
    return totalAssets - totalLiabilities;
}

// Calculate total assets
function nwtCalculateTotalAssets() {
    return nwtFinancialData.assets.cash + nwtFinancialData.assets.investments + 
           nwtFinancialData.assets.realEstate + nwtFinancialData.assets.otherAssets;
}

// Calculate total liabilities
function nwtCalculateTotalLiabilities() {
    return nwtFinancialData.liabilities.creditCards + nwtFinancialData.liabilities.studentLoans + 
           nwtFinancialData.liabilities.mortgage + nwtFinancialData.liabilities.otherDebts;
}

// Calculate debt-to-asset ratio
function nwtCalculateDebtRatio() {
    const totalAssets = nwtCalculateTotalAssets();
    if (totalAssets === 0) return 0;
    return (nwtCalculateTotalLiabilities() / totalAssets).toFixed(2);
}

// Format currency
function nwtFormatCurrency(value) {
    return '$' + Math.round(value).toLocaleString();
}

// Update all dashboard elements
function nwtUpdateDashboard() {
    const netWorth = nwtCalculateNetWorth();
    const totalAssets = nwtCalculateTotalAssets();
    const totalLiabilities = nwtCalculateTotalLiabilities();
    const debtRatio = nwtCalculateDebtRatio();
    
    // Update summary numbers
    document.getElementById('nwt-netWorthDisplay').textContent = nwtFormatCurrency(netWorth);
    document.getElementById('nwt-netWorthDisplay').className = `nwt-net-worth-display ${netWorth >= 0 ? 'nwt-positive' : 'nwt-negative'}`;
    document.getElementById('nwt-totalAssets').textContent = nwtFormatCurrency(totalAssets);
    document.getElementById('nwt-totalLiabilities').textContent = nwtFormatCurrency(totalLiabilities);
    document.getElementById('nwt-totalAssetsBadge').textContent = nwtFormatCurrency(totalAssets);
    document.getElementById('nwt-totalLiabilitiesBadge').textContent = nwtFormatCurrency(totalLiabilities);
    
    // Update asset breakdown
    document.getElementById('nwt-liquidAssets').textContent = nwtFormatCurrency(nwtFinancialData.assets.cash);
    document.getElementById('nwt-investmentAssets').textContent = nwtFormatCurrency(nwtFinancialData.assets.investments);
    document.getElementById('nwt-realEstateAssets').textContent = nwtFormatCurrency(nwtFinancialData.assets.realEstate);
    document.getElementById('nwt-propertyAssets').textContent = nwtFormatCurrency(nwtFinancialData.assets.otherAssets);
    
    // Update liability breakdown
    document.getElementById('nwt-creditCardLiabilities').textContent = nwtFormatCurrency(nwtFinancialData.liabilities.creditCards);
    document.getElementById('nwt-studentLoanLiabilities').textContent = nwtFormatCurrency(nwtFinancialData.liabilities.studentLoans);
    document.getElementById('nwt-mortgageLiabilities').textContent = nwtFormatCurrency(nwtFinancialData.liabilities.mortgage);
    document.getElementById('nwt-otherLiabilities').textContent = nwtFormatCurrency(nwtFinancialData.liabilities.otherDebts);
    
    // Update debt ratio
    document.getElementById('nwt-debtRatio').textContent = debtRatio;
    const ratioText = debtRatio < 0.3 ? "Excellent (Low debt)" : 
                     debtRatio < 0.5 ? "Good (Manageable debt)" : 
                     debtRatio < 0.7 ? "Caution (High debt)" : "Danger (Very high debt)";
    document.getElementById('nwt-debtRatioText').textContent = ratioText;
    
    // Update goal progress
    nwtUpdateGoalProgress(netWorth);
    
    // Update age comparison
    nwtUpdateAgeComparison(netWorth);
    
    // Update charts
    nwtUpdateCharts();
    
    // Generate insights
    nwtGenerateInsights();
    
    // Update projections
    nwtUpdateProjections();
}

// Update goal progress section
function nwtUpdateGoalProgress(currentNetWorth) {
    const goal = nwtFinancialData.goal.target;
    if (goal > 0) {
        const progress = Math.min(100, (currentNetWorth / goal) * 100);
        document.getElementById('nwt-goalText').textContent = `Net Worth Goal: ${nwtFormatCurrency(goal)}`;
        document.getElementById('nwt-goalPercentage').textContent = `${progress.toFixed(1)}%`;
        document.getElementById('nwt-goalProgressBar').style.width = `${progress}%`;
        document.getElementById('nwt-goalProgressContainer').style.display = 'block';
    } else {
        document.getElementById('nwt-goalProgressContainer').style.display = 'none';
    }
}

// Update age comparison badge
function nwtUpdateAgeComparison(netWorth) {
    const benchmark = nwtAgeBenchmarks[nwtFinancialData.ageGroup] || nwtAgeBenchmarks['30-40'];
    let comparisonText = '';
    
    if (netWorth > benchmark.good) {
        comparisonText = `Well above average for ${benchmark.label}`;
    } else if (netWorth > benchmark.average) {
        comparisonText = `Above average for ${benchmark.label}`;
    } else if (netWorth > 0) {
        comparisonText = `Below average for ${benchmark.label}`;
    } else {
        comparisonText = `Negative net worth for ${benchmark.label}`;
    }
    
    document.getElementById('nwt-ageComparisonBadge').innerHTML = 
        `<i class="fas fa-user-friends me-1"></i> ${comparisonText}`;
}

// Update all charts
function nwtUpdateCharts() {
    nwtUpdateNetWorthTrendChart();
    nwtUpdateAssetsPieChart();
    nwtUpdateLiabilitiesPieChart();
    nwtUpdateRatioGaugeChart();
    nwtUpdateMonthlyChangeChart();
}

// Net Worth Trend Chart
function nwtUpdateNetWorthTrendChart() {
    const ctx = document.getElementById('nwt-netWorthTrendChart').getContext('2d');
    
    // Prepare data
    const labels = nwtFinancialData.history.map(item => 
        item.date.toLocaleString('default', { month: 'short' }));
    const data = nwtFinancialData.history.map(item => item.value);
    
    if (nwtNetWorthTrendChart) {
        nwtNetWorthTrendChart.destroy();
    }
    
    nwtNetWorthTrendChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
                label: 'Net Worth',
                data: data,
                borderColor: '#4361ee',
                backgroundColor: 'rgba(67, 97, 238, 0.1)',
                borderWidth: 3,
                fill: true,
                tension: 0.3
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    mode: 'index',
                    intersect: false,
                    callbacks: {
                        label: function(context) {
                            return `Net Worth: ${nwtFormatCurrency(context.raw)}`;
                        }
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: false,
                    ticks: {
                        callback: function(value) {
                            return nwtFormatCurrency(value);
                        }
                    }
                }
            }
        }
    });
    
    // Time period selector functionality
    document.querySelectorAll('.nwt-time-period-selector .btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelector('.nwt-time-period-selector .btn.active').classList.remove('active');
            this.classList.add('active');
            
            const period = this.dataset.period;
            let displayMonths = 12; // default 1Y
            
            if (period === '3M') displayMonths = 3;
            else if (period === '6M') displayMonths = 6;
            else if (period === '5Y') displayMonths = 60;
            else if (period === 'All') displayMonths = nwtFinancialData.history.length;
            
            const displayData = nwtFinancialData.history.slice(-displayMonths);
            const displayLabels = displayData.map(item => 
                item.date.toLocaleString('default', { month: 'short' }));
            
            nwtNetWorthTrendChart.data.labels = displayLabels;
            nwtNetWorthTrendChart.data.datasets[0].data = displayData.map(item => item.value);
            nwtNetWorthTrendChart.update();
        });
    });
}

// Assets Pie Chart
function nwtUpdateAssetsPieChart() {
    const ctx = document.getElementById('nwt-assetsPieChart').getContext('2d');
    
    if (nwtAssetsPieChart) {
        nwtAssetsPieChart.destroy();
    }
    
    nwtAssetsPieChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['Cash & Savings', 'Investments', 'Real Estate', 'Other Assets'],
            datasets: [{
                data: [
                    nwtFinancialData.assets.cash,
                    nwtFinancialData.assets.investments,
                    nwtFinancialData.assets.realEstate,
                    nwtFinancialData.assets.otherAssets
                ],
                backgroundColor: [
                    '#28a745',
                    '#17a2b8',
                    '#ffc107',
                    '#6c757d'
                ],
                borderWidth: 0
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'right'
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            const label = context.label || '';
                            const value = context.raw || 0;
                            const total = context.dataset.data.reduce((a, b) => a + b, 0);
                            const percentage = Math.round((value / total) * 100);
                            return `${label}: ${nwtFormatCurrency(value)} (${percentage}%)`;
                        }
                    }
                }
            }
        }
    });
}

// Liabilities Pie Chart
function nwtUpdateLiabilitiesPieChart() {
    const ctx = document.getElementById('nwt-liabilitiesPieChart').getContext('2d');
    
    if (nwtLiabilitiesPieChart) {
        nwtLiabilitiesPieChart.destroy();
    }
    
    nwtLiabilitiesPieChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['Credit Cards', 'Student Loans', 'Mortgage', 'Other Debts'],
            datasets: [{
                data: [
                    nwtFinancialData.liabilities.creditCards,
                    nwtFinancialData.liabilities.studentLoans,
                    nwtFinancialData.liabilities.mortgage,
                    nwtFinancialData.liabilities.otherDebts
                ],
                backgroundColor: [
                    '#dc3545',
                    '#fd7e14',
                    '#6f42c1',
                    '#6c757d'
                ],
                borderWidth: 0
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'right'
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            const label = context.label || '';
                            const value = context.raw || 0;
                            const total = context.dataset.data.reduce((a, b) => a + b, 0);
                            const percentage = Math.round((value / total) * 100);
                            return `${label}: ${nwtFormatCurrency(value)} (${percentage}%)`;
                        }
                    }
                }
            }
        }
    });
}

// Ratio Gauge Chart
function nwtUpdateRatioGaugeChart() {
    const ctx = document.getElementById('nwt-ratioGaugeChart').getContext('2d');
    const debtRatio = parseFloat(nwtCalculateDebtRatio());
    
    if (nwtRatioGaugeChart) {
        nwtRatioGaugeChart.destroy();
    }
    
    nwtRatioGaugeChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['Debt Ratio'],
            datasets: [{
                data: [debtRatio, 1 - debtRatio],
                backgroundColor: [
                    debtRatio < 0.3 ? '#28a745' : 
                    debtRatio < 0.5 ? '#ffc107' : 
                    debtRatio < 0.7 ? '#fd7e14' : '#dc3545',
                    '#e9ecef'
                ],
                borderWidth: 0
            }]
        },
        options: {
            responsive: true,
            circumference: 180,
            rotation: -90,
            cutout: '80%',
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    enabled: false
                }
            }
        }
    });
}

// Monthly Change Chart
function nwtUpdateMonthlyChangeChart() {
    const ctx = document.getElementById('nwt-monthlyChangeChart').getContext('2d');
    const changes = [];
    
    // Calculate monthly changes
    for (let i = 1; i < nwtFinancialData.history.length; i++) {
        changes.push(nwtFinancialData.history[i].value - nwtFinancialData.history[i-1].value);
    }
    
    // Update monthly and annual change displays
    const monthlyChange = changes.length > 0 ? changes[changes.length - 1] : 0;
    const annualChange = changes.reduce((a, b) => a + b, 0);
    
    document.getElementById('nwt-monthlyChange').textContent = `${monthlyChange >= 0 ? '+' : ''}${nwtFormatCurrency(monthlyChange)}`;
    document.getElementById('nwt-monthlyChange').className = `fw-bold ${monthlyChange >= 0 ? 'text-success' : 'text-danger'}`;
    document.getElementById('nwt-annualChange').textContent = `${annualChange >= 0 ? '+' : ''}${nwtFormatCurrency(annualChange)}`;
    document.getElementById('nwt-annualChange').className = `fw-bold ${annualChange >= 0 ? 'text-success' : 'text-danger'}`;
    
    if (nwtMonthlyChangeChart) {
        nwtMonthlyChangeChart.destroy();
    }
    
    nwtMonthlyChangeChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: nwtFinancialData.history.slice(1).map(item => 
                item.date.toLocaleString('default', { month: 'short' })),
            datasets: [{
                label: 'Monthly Change',
                data: changes,
                backgroundColor: changes.map(value => 
                    value >= 0 ? 'rgba(40, 167, 69, 0.7)' : 'rgba(220, 53, 69, 0.7)'),
                borderColor: changes.map(value => 
                    value >= 0 ? 'rgba(40, 167, 69, 1)' : 'rgba(220, 53, 69, 1)'),
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            return `Change: ${nwtFormatCurrency(context.raw)}`;
                        }
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: false,
                    ticks: {
                        callback: function(value) {
                            return nwtFormatCurrency(value);
                        }
                    }
                }
            }
        }
    });
}

// Generate financial insights
function nwtGenerateInsights() {
    const insightsContainer = document.getElementById('nwt-insightsContainer');
    insightsContainer.innerHTML = '';
    
    const netWorth = nwtCalculateNetWorth();
    const totalAssets = nwtCalculateTotalAssets();
    const totalLiabilities = nwtCalculateTotalLiabilities();
    const debtRatio = parseFloat(nwtCalculateDebtRatio());
    
    // Insight 1: Net worth status
    const insight1 = document.createElement('div');
    insight1.className = 'nwt-insight-card d-flex align-items-start';
    let insight1Text = '';
    let insight1Icon = 'fa-smile';
    let insight1Color = 'text-success';
    
    if (netWorth < 0) {
        insight1Text = `Your net worth is negative. Focus on paying down debts and building assets.`;
        insight1Icon = 'fa-frown';
        insight1Color = 'text-danger';
    } else if (netWorth < 50000) {
        insight1Text = `You're building wealth. Consider increasing savings and investments.`;
        insight1Icon = 'fa-meh';
        insight1Color = 'text-warning';
    } else if (netWorth < 250000) {
        insight1Text = `Good progress! You're on your way to financial security.`;
    } else {
        insight1Text = `Excellent! You have substantial net worth. Consider wealth preservation strategies.`;
    }
    
    insight1.innerHTML = `
        <i class="fas ${insight1Icon} nwt-insight-icon ${insight1Color}"></i>
        <div>
            <h6>Net Worth Status</h6>
            <p class="mb-0">${insight1Text}</p>
        </div>
    `;
    insightsContainer.appendChild(insight1);
    
    // Insight 2: Debt assessment
    const insight2 = document.createElement('div');
    insight2.className = 'nwt-insight-card d-flex align-items-start';
    let insight2Text = '';
    let insight2Icon = 'fa-check-circle';
    let insight2Color = 'text-success';
    
    if (debtRatio > 0.7) {
        insight2Text = `Your debt ratio is very high (${debtRatio}). Focus on debt reduction immediately.`;
        insight2Icon = 'fa-exclamation-triangle';
        insight2Color = 'text-danger';
    } else if (debtRatio > 0.5) {
        insight2Text = `Your debt ratio is high (${debtRatio}). Consider paying down debts more aggressively.`;
        insight2Icon = 'fa-exclamation-circle';
        insight2Color = 'text-warning';
    } else if (debtRatio > 0.3) {
        insight2Text = `Your debt ratio is manageable (${debtRatio}). Maintain current repayment strategies.`;
    } else if (totalLiabilities > 0) {
        insight2Text = `Your debt ratio is excellent (${debtRatio}). You're using debt effectively.`;
    } else {
        insight2Text = `You have no debt. Consider leveraging good debt for wealth building.`;
    }
    
    insight2.innerHTML = `
        <i class="fas ${insight2Icon} nwt-insight-icon ${insight2Color}"></i>
        <div>
            <h6>Debt Assessment</h6>
            <p class="mb-0">${insight2Text}</p>
        </div>
    `;
    insightsContainer.appendChild(insight2);
    
    // Insight 3: Asset allocation
    const insight3 = document.createElement('div');
    insight3.className = 'nwt-insight-card d-flex align-items-start';
    const cashPercentage = Math.round((nwtFinancialData.assets.cash / totalAssets) * 100) || 0;
    const investmentPercentage = Math.round((nwtFinancialData.assets.investments / totalAssets) * 100) || 0;
    const realEstatePercentage = Math.round((nwtFinancialData.assets.realEstate / totalAssets) * 100) || 0;
    
    let insight3Text = `Your assets are ${cashPercentage}% cash, ${investmentPercentage}% investments, and ${realEstatePercentage}% real estate. `;
    
    if (cashPercentage > 50) {
        insight3Text += `Consider investing more of your cash to earn higher returns.`;
    } else if (investmentPercentage < 20) {
        insight3Text += `Increasing your investment allocation could help grow your wealth faster.`;
    } else {
        insight3Text += `Your asset allocation looks balanced.`;
    }
    
    insight3.innerHTML = `
        <i class="fas fa-pie-chart nwt-insight-icon"></i>
        <div>
            <h6>Asset Allocation</h6>
            <p class="mb-0">${insight3Text}</p>
        </div>
    `;
    insightsContainer.appendChild(insight3);
}

// Update projections
function nwtUpdateProjections() {
    const ctx = document.getElementById('nwt-projectionChart').getContext('2d');
    const currentNetWorth = nwtCalculateNetWorth();
    const timeframe = nwtFinancialData.goal.timeframe;
    const goal = nwtFinancialData.goal.target;
    
    // Calculate needed monthly growth to reach goal
    const neededGrowth = goal > currentNetWorth ? 
        Math.pow(goal / currentNetWorth, 1 / (timeframe * 12)) - 1 : 0;
    
    // Generate projection data
    const projectionData = [];
    for (let i = 0; i <= timeframe; i++) {
        const yearValue = currentNetWorth * Math.pow(1 + neededGrowth, i * 12);
        projectionData.push(Math.round(yearValue));
    }
    
    // Update projection text
    document.getElementById('nwt-timeframeText').textContent = timeframe;
    document.getElementById('nwt-projectedNetWorth').textContent = nwtFormatCurrency(projectionData[projectionData.length - 1]);
    document.getElementById('nwt-neededGrowth').textContent = `${(neededGrowth * 100).toFixed(2)}% monthly growth`;
    
    if (nwtProjectionChart) {
        nwtProjectionChart.destroy();
    }
    
    nwtProjectionChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: Array.from({length: timeframe + 1}, (_, i) => `Year ${i}`),
            datasets: [{
                label: 'Projected Net Worth',
                data: projectionData,
                borderColor: '#4361ee',
                backgroundColor: 'rgba(67, 97, 238, 0.1)',
                borderWidth: 3,
                fill: true,
                tension: 0.1
            }, {
                label: 'Your Goal',
                data: Array(timeframe + 1).fill(goal),
                borderColor: '#28a745',
                backgroundColor: 'rgba(40, 167, 69, 0.1)',
                borderWidth: 2,
                borderDash: [5, 5],
                fill: false
            }]
        },
        options: {
            responsive: true,
            plugins: {
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            return `${context.dataset.label}: ${nwtFormatCurrency(context.raw)}`;
                        }
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: currentNetWorth < 0,
                    ticks: {
                        callback: function(value) {
                            return nwtFormatCurrency(value);
                        }
                    }
                }
            }
        }
    });
    
    // Update projection text based on goal status
    const projectionText = document.getElementById('nwt-projectionText');
    if (currentNetWorth >= goal) {
        projectionText.innerHTML = `<strong>Congratulations!</strong> You've already reached your net worth goal of ${nwtFormatCurrency(goal)}. ` +
            `Consider setting a new goal to continue growing your wealth.`;
    } else if (neededGrowth > 0.01) {
        projectionText.textContent = `To reach your goal of ${nwtFormatCurrency(goal)} in ${timeframe} years, ` +
            `you'll need an average monthly growth of ${(neededGrowth * 100).toFixed(2)}%. This may require ` +
            `increasing your savings rate or investment returns.`;
    } else {
        projectionText.textContent = `At your current growth rate, you're on track to reach your goal of ` +
            `${nwtFormatCurrency(goal)} in ${timeframe} years. Keep up the good work!`;
    }
}

// Show input form to edit details
function nwtShowInputForm() {
    nwtDashboardContainer.style.display = 'none';
    nwtInputContainer.style.display = 'block';
}

// Add new item (placeholder functionality)
function nwtAddNewItem() {
    alert('This would open a form to add a new asset or liability in a full implementation.');
}

        </script>
    

</body>
</html>
